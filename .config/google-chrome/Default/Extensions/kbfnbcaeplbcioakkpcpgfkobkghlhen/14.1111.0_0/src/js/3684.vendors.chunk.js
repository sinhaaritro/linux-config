(self.webpackChunk=self.webpackChunk||[]).push([[3684],{5315:(e,t)=>{t.x=void 0,t.x=.5},77993:(e,t,n)=>{n.d(t,{Q:()=>i});var i,o=n(63513),r=n(80358);!function(e){function t(e){return"error"===e.kind}e.isCheetahChunk=function(e){return"cheetah:chunk"===e.kind},e.isCheetahSetContext=function(e){return"cheetah:setContext"===e.kind},e.isCheetahResult=function(e){return"cheetah:result"===e.kind},e.isCheetahError=function(e){return"cheetah:error"===e.kind},e.isCheetahAck=function(e){return"cheetah:ack"===e.kind},e.isError=t,e.isErrorSessionNotInitialized=function(e){return t(e)&&e.error===o.jK.SESSION_NOT_INITIALIZED},e.isRelevant=function(e){return r.ld.isCheetahEvent(e)||r.ld.isCheetahAck(e)||"error"===e.kind}}(i||(i={}))},61792:(e,t,n)=>{n.d(t,{a:()=>i});var i,o=n(8125),r=n(5114),s=n(57050);!function(e){let t,n,i;function a(e){return e.kind===t.active}function l(e){return e.kind===t.passive}function c(e){return e.kind===t.unknown}function u(e){return a(e)||c(e)}!function(e){e.unavailable="unavailable",e.active="active",e.passive="passive",e.disabled="disabled",e.pending="pending",e.unknown="unknown"}(t=e.Kind||(e.Kind={})),function(e){const t=(0,o.HP)((e=>{const t=Date.parse(e);return isNaN(t)?0:t}));function n(e){const t=e-Date.now();return Math.floor(t/36e5)}e.parseRefillDate=function(e){return t(e)},e.hoursUntilRefillDate=n,e.daysUntilRefillDate=function(e){return Math.floor(n(e)/24)}}(n=e.Active||(e.Active={})),function(t){t.empty={kind:e.Kind.passive,promptsAllocated:0,promptsRemaining:0,refillDate:0}}(i=e.Passive||(e.Passive={})),e.isActive=a,e.isPassive=l,e.isUnknown=c,e.isUsable=u,e.isVisible=function(e){return u(e)||l(e)},e.isDisabled=function(e){return e.kind===t.disabled},e.isUnavailable=function(e){return e.kind===t.pending||e.kind===t.unavailable||e.kind===t.disabled},e.fromUsage=function(n){return(0,s.zG)(r.fromNullable(n),r.map((n=>{const i=e.Active.parseRefillDate(n.refillDate);return n.promptsRemaining<0?{kind:t.unknown}:n.promptsRemaining>0?{kind:t.active,promptsRemaining:n.promptsRemaining,promptsAllocated:n.promptsAllocated,refillDate:i}:{kind:t.passive,promptsRemaining:n.promptsRemaining,promptsAllocated:n.promptsAllocated,refillDate:i}})),r.getOrElse((()=>({kind:e.Kind.unknown}))))}}(i||(i={}))},35152:(e,t,n)=>{n.d(t,{aU:()=>o,pY:()=>i,Cl:()=>A,ix:()=>k,ec:()=>S,a8:()=>E.a,JZ:()=>O,_y:()=>r,nF:()=>_,x2:()=>d,_H:()=>I,TG:()=>x,lG:()=>w,H3:()=>s,x4:()=>l,z_:()=>m.z,Z7:()=>h,Zq:()=>f,LA:()=>p.L});var i,o,r,s,a=n(57050);!function(e){let t,n;!function(e){e.create=function(e){return e}}(t=e.Id||(e.Id={})),function(e){e.create=function(e,t){return{id:e,kind:"string",value:t}}}(n=e.StringValue||(e.StringValue={}))}(i||(i={})),function(e){function t(e){return"userPrompt"===e.kind}function n(e){return"dynamic"===e.kind}function o(e){return"quickRewrite"===e.kind}let r,s,l,c,u;e.isUserPrompt=t,e.isDynamic=n,e.isQuickRewrite=o,e.willGenerateResult=function(e){return t(e)||o(e)||n(e)&&e.generatesResult},function(e){e.create=function(e){return e}}(r=e.Id||(e.Id={})),function(e){e.isFollowUpQuestion=function(e){return 1===e.args.length&&"string"===e.args[0].kind},e.isQuickAction=function(e){return 0===e.args.length}}(s=e.DynamicInput||(e.DynamicInput={})),function(e){e.fromInputAndValue=function(e,t){return Object.assign(Object.assign({},e),{args:[(0,a.zG)(e.args[0],(e=>i.StringValue.create(e.id,t)))]})}}(l=e.FollowUpQuestionValue||(e.FollowUpQuestionValue={})),function(e){e.fromInput=function(e,t){return Object.assign(Object.assign({},e),{arg:i.StringValue.create(e.arg.id,t)})}}(c=e.UserPromptValue||(e.UserPromptValue={})),function(e){e.fromInput=function(e){return Object.assign(Object.assign({},e),{args:[]})}}(u=e.QuickRewriteValue||(e.QuickRewriteValue={}))}(o||(o={})),function(e){let t;!function(e){e.create=function(e){return e}}(t=e.Id||(e.Id={})),e.isPending=function(e){return"pending"===e.kind},e.isReceived=function(e){return"received"===e.kind}}(r||(r={})),function(e){let t,n;e.empty={previousMessageInfo:{author:{name:"",email:""},directRecipients:[],text:""},title:"",author:{name:"",email:""},directRecipients:[],indirectRecipients:[],undisclosedRecipients:[]},function(e){e.empty={name:"",email:""},e.extractNameAndEmailString=function(e){const t=""!==e.email?`<${e.email}>`:"";return[e.name,t].filter((e=>""!==e)).join(" ")}}(t=e.Person||(e.Person={})),function(e){e.empty={author:{name:"",email:""},directRecipients:[],text:""}}(n=e.PreviousMessageInfo||(e.PreviousMessageInfo={}))}(s||(s={}));var l,c=n(8125),u=n(38305);!function(e){let t,n;!function(e){e.create=function(e){return`${e}`},e.toPrimitive=function(e){return parseInt(e)},e.eq=u.Eq}(t=e.Id||(e.Id={})),function(e){e.insert="insert",e.reportOffensive="reportOffensive"}(n=e.Feedback||(e.Feedback={})),e.hasId=function(e){return"id"in e},e.isComplete=function(e){return"complete"===e.kind},e.isInProgressOngoing=function(e){return"inProgressOngoing"===e.kind},e.isInProgressPending=function(e){return"inProgressPending"===e.kind},e.isInProgress=(0,c.Kg)(e.isInProgressOngoing,e.isInProgressPending)}(l||(l={}));var d,m=n(45626),p=n(9295);!function(e){let t,n;!function(e){e.ok="ok",e.satisfied="satisfied",e.dissatisfied="dissatisfied"}(t=e.Mood||(e.Mood={})),function(e){e.resultCard="resultCard",e.quickReplyInitialActions="quickReplyInitialActions"}(n=e.Source||(e.Source={}))}(d||(d={}));var h,g=n(22232);!function(e){let t,n,i,o,r,s,l;!function(e){let t;!function(e){e.rephrase="rephrase",e.dismiss="dismiss",e.insert="insert",e.offensive="offensive"}(t=e.UserAction||(e.UserAction={}))}(t=e.Result||(e.Result={})),function(e){let t;!function(e){e.open="open",e.skip="skip",e.openFromBanner="openFromBanner"}(t=e.UserAction||(e.UserAction={}))}(n=e.VoiceProfile||(e.VoiceProfile={})),function(e){let t;!function(e){e.openStore="openStore",e.offensive="offensive"}(t=e.UserAction||(e.UserAction={}))}(i=e.Actions||(e.Actions={})),function(e){let t;!function(e){e.search="search"}(t=e.UserAction||(e.UserAction={}))}(o=e.Prompt||(e.Prompt={})),function(e){let t;!function(e){e.hover="hover",e.click="click"}(t=e.UserAction||(e.UserAction={}))}(r=e.UsageInfo||(e.UsageInfo={})),function(e){let t;!function(e){e.view="view",e.skip="skip",e.next="next"}(t=e.UserAction||(e.UserAction={}))}(s=e.Onboarding||(e.Onboarding={})),function(e){let t;!function(e){e.close="close"}(t=e.UserAction||(e.UserAction={}))}(l=e.Assistant||(e.Assistant={})),e.getComponentId=function(e,t){return(0,a.zG)(e.kind,(t=>{switch(t){case"result":return"card";case"voiceProfile":return"voice";case"actions":return e.userAction===i.UserAction.openStore?"group":"card";case"assistant":return"widget";case"onboardingPromptsTooltip":return"onboardingPromptTooltip";case"onboardingReviewTooltip":return"onboardingReviewtextTooltip";case"usageInfo":case"prompt":case"onboardingPopup":case"onboardingRewriteTooltip":return t;default:(0,g.L0)(t)}}),(e=>`cheetah:${e}${t?`:${t}`:""}`))},e.getUserAction=function(e){return(0,a.zG)(e.kind,(t=>{switch(t){case"actions":return e.userAction===i.UserAction.openStore?"All Ideas":e.userAction;case"assistant":return e.userAction===l.UserAction.close?"dismiss":e.userAction;case"result":case"voiceProfile":case"prompt":case"usageInfo":case"onboardingPopup":case"onboardingPromptsTooltip":case"onboardingReviewTooltip":case"onboardingRewriteTooltip":return e.userAction;default:(0,g.L0)(t)}}))}}(h||(h={}));var f,x,b=n(5114),v=n(95195),y=n(69243),C=n(64015);!function(e){const t=["initial","prompts","review","rewrite"],n=["extension","editor","llamaMac","llamaWin"];function i(e,t){return`${e}|${t}`}function o(e,t,n){return`${e}|${t}|${n}`}function r(e){return b.isSome(h(e))}function s(e){return b.isSome(g(e))}const l=new y.Dy("CompletedStepName",(e=>"string"==typeof e&&r(e)),((e,t)=>"string"==typeof e&&r(e)?y.Vp(e):y.Rn(e,t)),y.yR),c=new y.Dy("LastSeenStepName",(e=>"string"==typeof e&&s(e)),((e,t)=>"string"==typeof e&&s(e)?y.Vp(e):y.Rn(e,t)),y.yR),u=y.OT(y.r$({completed:y.Bk(l),lastSeen:y.Bk(c)}));let d,m,p;function h(e){return(0,a.zG)(b.some(e.split("|")),b.filter((e=>2===e.length)),b.filter((e=>t.includes(e[0])&&n.includes(e[1]))))}function g(e){return(0,a.zG)(b.some(e.split("|")),b.filter((e=>3===e.length)),b.filter((e=>t.includes(e[0])&&n.includes(e[1]))),b.filterMap((e=>(0,a.zG)(parseInt(e[2],10),(t=>Number.isNaN(t)?b.none:b.some([e[0],e[1],t]))))))}function f(e,t,n){var i,o,r,s;return{extension:{completed:t.some((t=>t[0]===e&&"extension"===t[1])),lastSeen:null===(i=n.find((t=>t[0]===e&&"extension"===t[1])))||void 0===i?void 0:i[2]},editor:{completed:t.some((t=>t[0]===e&&"editor"===t[1])),lastSeen:null===(o=n.find((t=>t[0]===e&&"editor"===t[1])))||void 0===o?void 0:o[2]},llamaMac:{completed:t.some((t=>t[0]===e&&"llamaMac"===t[1])),lastSeen:null===(r=n.find((t=>t[0]===e&&"llamaMac"===t[1])))||void 0===r?void 0:r[2]},llamaWin:{completed:t.some((t=>t[0]===e&&"llamaWin"===t[1])),lastSeen:null===(s=n.find((t=>t[0]===e&&"llamaWin"===t[1])))||void 0===s?void 0:s[2]}}}e.emptyClientStep={completed:!1,lastSeen:void 0},function(e){e.everyClient=function(e){return t=>e(t.extension)&&e(t.editor)&&e(t.llamaMac)&&e(t.llamaWin)}}(d=e.Step||(e.Step={})),e.emptyStep={extension:e.emptyClientStep,llamaMac:e.emptyClientStep,llamaWin:e.emptyClientStep,editor:e.emptyClientStep},e.codec=new y.Dy("UpstreamOnboarding",(e=>u.is(e)),((e,t)=>(0,a.zG)(u.validate(e,t),v.UI((e=>{const t=(0,a.zG)(e.completed||[],C.UI(h),C.oA),n=(0,a.zG)(e.lastSeen||[],C.UI(g),C.oA);return{initial:f("initial",t,n),prompts:f("prompts",t,n),review:f("review",t,n),rewrite:f("rewrite",t,n)}})))),(e=>({completed:(0,a.zG)(Object.entries(e),C.tS((([e,t])=>function(e,t){return(0,a.zG)(Object.entries(t),C.tS((([t,n])=>n.completed?[i(e,t)]:[])))}(e,t)))),lastSeen:(0,a.zG)(Object.entries(e),C.tS((([e,t])=>function(e,t){return(0,a.zG)(Object.entries(t),C.tS((([t,n])=>n.lastSeen?[o(e,t,n.lastSeen)]:[])))}(e,t))))}))),function(t){t.empty={initial:e.emptyStep,prompts:e.emptyStep,review:e.emptyStep,rewrite:e.emptyStep},t.toClientState=function(e,t){return{initial:e.initial[t],prompts:e.prompts[t],review:e.review[t],rewrite:e.rewrite[t]}},t.patch=function(e,t){return n=>({initial:Object.assign(Object.assign({},n.initial),{[t]:e.initial}),prompts:Object.assign(Object.assign({},n.prompts),{[t]:e.prompts}),review:Object.assign(Object.assign({},n.review),{[t]:e.review}),rewrite:Object.assign(Object.assign({},n.rewrite),{[t]:e.rewrite})})}}(m=e.State||(e.State={})),function(t){t.empty={initial:e.emptyClientStep,prompts:e.emptyClientStep,review:e.emptyClientStep,rewrite:e.emptyClientStep}}(p=e.ClientState||(e.ClientState={}))}(f||(f={})),function(e){let t;!function(e){e.initial="initial",e.prompts="prompts",e.review="review",e.rewrite="rewrite"}(t=e.StepName||(e.StepName={})),function(e){e.isAssistantOnboardingStep=function(t){return t===e.prompts||t===e.review},e.isTooltipOnboardingStep=function(t){return t===e.prompts||t===e.review||t===e.rewrite}}(t=e.StepName||(e.StepName={}))}(x||(x={}));var k,w,S,_,E=n(61792);!function(e){let t;!function(e){e.mount="mount",e.unmount="unmount",e.close="close",e.goBack="goBack",e.openVoiceProfile="openVoiceProfile",e.closeVoiceProfile="closeVoiceProfile",e.applyVoiceProfile="applyVoiceProfile",e.toggleTone="toggleTone",e.selectStyle="selectStyle",e.selectRole="selectRole",e.selectDialect="selectDialect",e.promptFieldChange="promptFieldChange",e.promptFieldFocusChange="promptFieldFocusChange",e.clickActionBrick="clickActionBrick",e.promptSend="promptSend",e.generateStop="generateStop",e.escapePressed="escapePressed",e.insert="insert",e.rephrase="rephrase",e.dismissResult="dismissResult",e.dismissError="dismissError",e.openFeedbackForm="openFeedbackForm",e.updateFeedbackForm="updateFeedbackForm",e.submitFeedbackForm="submitFeedbackForm",e.reportOffensiveResult="reportOffensive",e.reportOffensiveActions="reportOffensiveActions",e.clickResultHeader="clickResultHeader",e.collapsePromptMenu="collapsePromptMenu",e.creditsInfoHover="creditsInfoHover",e.creditsInfoClick="creditsInfoClick",e.cardHover="cardHover",e.cardFocus="cardFocus",e.reportMenuVisibilityChange="reportMenuVisibilityChange"}(t=e.Kind||(e.Kind={})),e.is=function(e){return t=>t.kind===e},e.isResultAction=(0,c.Kg)(e.is(e.Kind.insert),e.is(e.Kind.rephrase),e.is(e.Kind.dismissResult),e.is(e.Kind.reportOffensiveResult))}(k||(k={})),(0,g.L0)(void 0),function(e){let t;!function(e){e.close="close",e.tryItOut="tryItOut",e.mount="mount"}(t=e.Kind||(e.Kind={})),e.is=function(e){return t=>t.kind===e}}(w||(w={})),(0,g.L0)(void 0),function(e){e.initialActionsList="initialActionsList",e.followUpActionsList="followUpActionsList",e.creditsInfoButton="creditsInfoButton"}(S||(S={})),function(e){e.initialPopupAnchor="initialPopupAnchor",e.rewriteTooltipAnchor="rewriteTooltipAnchor"}(_||(_={}));var O,I,A,R=n(17771),P=n(63513);!function(e){let t;function n(e){switch(e){case t.sensitiveResult:return{header:"Assistance is unavailable",text:"GrammarlyGO assistance is unavailable for that text or prompt.\nTry something else."};case t.overload:return{header:"Couldn’t generate text",text:"We’re handling a lot of prompts right now and couldn’t generate that text.\nPlease try again later."};case t.unsupportedLanguage:return{header:"Hmm, don’t know that language",text:"GrammarlyGO assistance is currently only available for English."};case t.critical:case t.timeout:case t.emptyResult:case t.truncatedResult:case t.usageExceeded:return{header:"Something went wrong",text:"We’re not sure what happened, but we couldn’t generate that text.\nPlease try again."};default:(0,g.L0)(e)}}!function(e){e.create=function(t){switch(t){case P.vv.Schema.ErrorKind.Generic:return e.critical;case P.vv.Schema.ErrorKind.Overflow:return e.truncatedResult;case P.vv.Schema.ErrorKind.PromptsLimitExceeded:return e.usageExceeded;case P.vv.Schema.ErrorKind.SensitiveContent:return e.sensitiveResult;case P.vv.Schema.ErrorKind.ServerOverloaded:return e.overload;case P.vv.Schema.ErrorKind.UnsupportedLanguage:return e.unsupportedLanguage;default:(0,g.L0)(t)}}}(t=e.Reason||(e.Reason={})),function(e){e.emptyResult="emptyResult",e.truncatedResult="truncatedResult",e.sensitiveResult="sensitiveResult",e.usageExceeded="usageExceeded",e.unsupportedLanguage="unsupportedLanguage",e.overload="overload",e.timeout="timeout",e.critical="critical"}(t=e.Reason||(e.Reason={})),e.create=function(e){const i=t.create(e.kind),o=(0,a.zG)(R.Yt(b.Apply)({header:(0,a.zG)(b.fromNullable(e.title),b.filter((e=>""!==e.trim()))),text:(0,a.zG)(b.fromNullable(e.text),b.filter((e=>""!==e.trim())))}),b.getOrElse((()=>n(i))));return Object.assign({reason:i},o)},e.createCriticalError=function(e){return{reason:t.critical,header:"Something went wrong",text:e?"We’re not sure what happened.\nPlease try again later.":"We’re not sure what happened, but we couldn’t generate that text.\nPlease try again."}},e.createEmptyResultError=function(){return Object.assign({reason:t.emptyResult},n(t.emptyResult))}}(O||(O={})),function(e){let t,n,i;e.isInfo=function(e){return e.kind===t.info},e.isError=function(e){return e.kind===t.error},function(e){e.info="info",e.error="error"}(t=e.Kind||(e.Kind={})),function(e){let n,i,o;!function(e){e.startSession="startSession",e.action="action"}(n=e.Name||(e.Name={})),function(e){e.create=function(e){return{kind:t.info,name:n.startSession,sessionMode:e}}}(i=e.StartSession||(e.StartSession={})),function(e){e.create=function(e){return{kind:t.info,name:n.action,sessionMode:e}}}(o=e.Action||(e.Action={}))}(n=e.Info||(e.Info={})),function(e){let n,i,o,r,s;!function(e){e.waitForContextTimeout="waitForContextTimeout",e.waitForResultTimeout="waitForResultTimeout",e.waitForAckTimeout="waitForAckTimeout"}(n=e.Name||(e.Name={})),function(e){e.startSession="startSession",e.action="action"}(i=e.SourceEvent||(e.SourceEvent={})),function(e){e.create=function(e,i){return{kind:t.error,name:n.waitForContextTimeout,sourceEvent:e,sessionMode:i}}}(o=e.WaitForContextTimeout||(e.WaitForContextTimeout={})),function(e){e.create=function(e){return{kind:t.error,name:n.waitForResultTimeout,sessionMode:e}}}(r=e.WaitForResultTimeout||(e.WaitForResultTimeout={})),function(e){e.create=function(e,i){return{kind:t.error,name:n.waitForAckTimeout,sourceEvent:e,sessionMode:i}}}(s=e.WaitForAckTimeout||(e.WaitForAckTimeout={}))}(i=e.Error||(e.Error={}))}(I||(I={})),function(e){let t;!function(e){e.feedbackSubmitted="feedbackSubmitted"}(t=e.Kind||(e.Kind={}))}(A||(A={}))},9295:(e,t,n)=>{n.d(t,{L:()=>i});var i,o=n(22232),r=n(5114),s=n(48044),a=n(13853),l=n(73975),c=n(38305);!function(e){let t,n,i,u,d;!function(e){let t;!function(e){e.create=function(e){return e},e.eq=c.Eq}(t=e.Id||(e.Id={}))}(t=e.Tone||(e.Tone={})),function(e){let t;!function(e){e.create=function(e){return e},e.eq=c.Eq}(t=e.Id||(e.Id={}))}(n=e.Style||(e.Style={})),function(e){let t;!function(e){e.create=function(e){return e},e.eq=c.Eq}(t=e.Id||(e.Id={}))}(i=e.Role||(e.Role={})),function(e){let t,n;function i(e){switch(e){case t.american:return"American English";case t.australian:return"Australian English";case t.british:return"British English";case t.canadian:return"Canadian English";case t.indian:return"Indian English";default:(0,o.L0)(e)}}function r(e){switch(e){case t.american:return"https://assets.grammarly.com/emoji/v1/1f1fa-1f1f8.svg";case t.australian:return"https://assets.grammarly.com/emoji/v1/1f1e6-1f1fa.svg";case t.british:return"https://assets.grammarly.com/emoji/v1/1f1ec-1f1e7.svg";case t.canadian:return"https://assets.grammarly.com/emoji/v1/1f1e8-1f1e6.svg";case t.indian:return"https://assets.grammarly.com/emoji/v1/1f1ee-1f1f3.svg";default:(0,o.L0)(e)}}!function(e){e.fromString=function(t){switch(t){case"american":return e.american;case"australian":return e.australian;case"british":return e.british;case"canadian":return e.canadian;case"indian":return e.indian;default:(0,o.L0)(t)}}}(t=e.Value||(e.Value={})),function(e){e.american="american",e.australian="australian",e.british="british",e.canadian="canadian",e.indian="indian"}(t=e.Value||(e.Value={})),function(e){e.create=function(e){return e},e.eq=c.Eq}(n=e.Id||(e.Id={})),e.american={id:n.create(t.american),label:i(t.american),iconUrl:r(t.american)},e.australian={id:n.create(t.australian),label:i(t.australian),iconUrl:r(t.australian)},e.british={id:n.create(t.british),label:i(t.british),iconUrl:r(t.british)},e.canadian={id:n.create(t.canadian),label:i(t.canadian),iconUrl:r(t.canadian)},e.indian={id:n.create(t.indian),label:i(t.indian),iconUrl:r(t.indian)},e.all=function(){return[e.american,e.australian,e.british,e.canadian,e.indian]}}(u=e.Dialect||(e.Dialect={})),function(e){e.eq=l.n_({selectedStyle:n.Id.eq,selectedTonesPerStyle:s.Eh(n.Id.eq,a.Eh(t.Id.eq)),selectedRole:r.getEq(i.Id.eq),selectedDialect:u.Id.eq})}(d=e.Selections||(e.Selections={}))}(i||(i={}))},22337:(e,t,n)=>{n.d(t,{$C:()=>R,gz:()=>S,ZP:()=>E,c3:()=>P});var i=n(31699),o=n(57050),r=n(63513),s=n(8709),a=n(9922),l=n(98403),c=n(16118),u=n(80900),d=n(5114),m=n(83078),p=n(22232),h=n(38983),g=n(64015),f=n(81531),x=n(46680),b=n(35152),v=n(17889),y=n(77993),C=n(95195);async function k(e,t,n,i){if(n)try{const o=await n();C.nM(o)?t.warn("runTaskEither() - error running task",{name:e,result:o}):null==i||i()}catch(n){t.error("runTaskEither() - promise rejection running task",n,{name:e})}}var w=n(32952);class S{constructor(){this._events=new w.xQ}static getInstance(){return null===S.instance&&(S.instance=new S),S.instance}notify(e){this._events.next(e)}get events(){return this._events.asObservable()}}S.instance=null;var _=n(97547);class E{constructor(e){var t,n,i,r,s;this._params=e,this._subs=new a.w.Keeper,this._session=h.h.create({kind:"starting",mode:this._params.startSessionOptions.mode,selectedText:(0,o.zG)(d.fromNullable(this._params.startSessionOptions.mode===b.z_.Mode.rewrite||this._params.startSessionOptions.mode===b.z_.Mode.quickRewrite?this._params.startSessionOptions.selectedRange:void 0),d.map((e=>this._params.textEditorService.getText(e)))),quickReplyContext:d.fromNullable(this._params.startSessionOptions.mode===b.z_.Mode.quickReply?this._params.startSessionOptions.quickReplyContext:void 0),error:d.none}),this._resultById=new Map,this._contextIdByResultId=new Map,this._contextById=new Map,this._stateBlobByContextId=new Map,this._initialReceivedContext=null,this._upstreamDialect=h.h.create(b.LA.Dialect.Id.create(b.LA.Dialect.Value.american)),this._cheetahAckIds=new Set,this._cheetahAckHandlers=new Array,this._resultTimeout=void 0,this._contextTimeout=void 0,this._cheetahAckTimeout=void 0,this._resultTimeoutMs=null!==(t=this._params.resultTimeoutMs)&&void 0!==t?t:1e4,this._contextTimeoutMs=null!==(n=this._params.contextTimeoutMs)&&void 0!==n?n:1e4,this._cheetahAckTimeoutMs=null!==(i=this._params.cheetahAckTimeoutMs)&&void 0!==i?i:1e4,this._monitoringService=null!==(r=this._params.monitoringService)&&void 0!==r?r:S.getInstance(),this._logger=null!==(s=this._params.logger)&&void 0!==s?s:f.C8.Logging.getLogger("CheetahWeb.SessionService",x.i.DEBUG),this._subs.push(this._params.relevantCAPIEvents.subscribe((e=>this._handleRelevantCAPIEvent(e)))),this._subs.push(this._params.upstreamDialect.subscribe((e=>l.wW(this._upstreamDialect)(b.LA.Dialect.Id.create(e))))),this._subs.push(this._upstreamDialect.subscribe((e=>this._handleUpstreamDialectChange(e)))),this._session.pipe(c.G()).subscribe((([e,t])=>this._logger.debug("session updated",{prevSession:e,newSession:t}))),this._startSession(this._params.startSessionOptions)}get session(){return this._session.view()}async _startSession(e,t){var n;this._logger.debug("startSession()",{startSessionOptions:e}),await this._params.textEditorService.flush();const i=d.fromNullable(e.mode===b.z_.Mode.rewrite||e.mode===b.z_.Mode.quickRewrite?e.selectedRange:void 0),r=d.fromNullable(e.mode===b.z_.Mode.quickReply?e.quickReplyContext:void 0);this._setupCheetahAckHandler(b._H.Error.SourceEvent.startSession,(()=>{this._setupContextTimeout(b._H.Error.SourceEvent.startSession)}));const s={entryPoint:this._prepareEntryPoint(e.mode),selectedRange:(0,o.zG)(i,d.getOrElse((()=>({start:0,end:0})))),outerContext:(0,o.zG)(r,d.map((e=>this._prepareOuterContext(e))),d.toUndefined),stateBlob:t,metadata:e.metadata};this._logger.debug("startSession() - sending `cheetah:startSession` to CAPI",{data:s}),k("cheetahStartSession",this._logger,null===(n=this._params.getCAPIClient())||void 0===n?void 0:n.cheetahStartSession(s),(()=>this._monitoringService.notify(b._H.Info.StartSession.create(this._session.get().mode))))}submitAction(e){this._logger.debug("submitAction()",{action:e}),this._submitAction(e)}setVoiceProfile(e){var t,n;this._logger.debug("setVoiceProfile()",{voiceProfileSelections:e});const i=this._session.get();if("started"===i.kind){this._session.set(Object.assign(Object.assign({},i),{voiceProfile:Object.assign(Object.assign({},i.voiceProfile),e),context:Object.assign(Object.assign({},i.context),{kind:"pending",loadingMessage:"Working on it..."})}));const s={voice:{selectedStyle:e.selectedStyle,selectedTones:Array.from(e.selectedTonesPerStyle.get(e.selectedStyle)||[]),selectedRole:(0,o.zG)(e.selectedRole,d.toUndefined),needSetup:!1}};if(this._logger.debug("setVoiceProfile() - sending `cheetah:setVoice` to CAPI",{data:s}),k("cheetahSetVoice",this._logger,null===(t=this._params.getCAPIClient())||void 0===t?void 0:t.cheetahSetVoice(s)),!b.LA.Dialect.Id.eq.equals(i.voiceProfile.selectedDialect,e.selectedDialect)){const t={kind:r.rP.Context,context:{goals:d.none,domain:d.none,audience:d.none,style:d.none,dialect:d.some(e.selectedDialect),outcomeContext:d.none}};this._logger.debug("setVoiceProfile() - sending `set_context` to CAPI",{data:t}),k("setSessionOption",this._logger,null===(n=this._params.getCAPIClient())||void 0===n?void 0:n.setSessionOption(t)),this._params.onVoiceProfileSelectedDialectChange(e.selectedDialect)}}else this._logger.warn("setVoiceProfile() - setting voice profile with a session that is not `started`, skipping",{session:i})}stopInProgressResult(){this._logger.debug("stopInProgressResult()");const e=this._session.get();if("started"===e.kind){let t=e.context;if(this._clearAllTimeouts(),e.resultHistory.length>0){this._logger.debug("stopInProgressResult() - non-empty result history, will try to restore context from latest result",{session:e});const n=this._extractLatestResultContext(e);n?(this._logger.debug("stopInProgressResult() - non-empty result history, found context for latest result, will restore its context",{session:e,latestResultContext:n}),t=n):this._logger.warn("stopInProgressResult() - non-empty result history, could not find context for latest result, context will not be updated",{session:e})}else{this._logger.debug("stopInProgressResult() - empty result history, will try to restore initial context",{session:e});const n=this._extractInitialContext();n?(this._logger.debug("stopInProgressResult() - empty result history, found initial context, restoring it",{session:e,initialContext:n}),t=n):this._logger.warn("stopInProgressResult() - empty result history, but there is no initial context to restore, keeping the latest context",{session:e})}this._session.modify((e=>Object.assign(Object.assign({},e),{context:t,inProgressResult:d.none}))),(0,o.zG)(e.inProgressResult,d.filter(b.x4.isInProgressOngoing),m.bw((e=>{var t;const n={promptId:b.x4.Id.toPrimitive(e.id)};this._logger.debug("stopInProgressResult() - sending `cheetah:interrupt` to CAPI",{data:n}),k("cheetahInterrupt",this._logger,null===(t=this._params.getCAPIClient())||void 0===t?void 0:t.cheetahInterrupt(n))})),m.ew((()=>this._logger.warn("stopInProgressResult() - trying to stop in-progress result when we have no result in-progress-ongoing, skipping",{session:e}))))}else this._logger.warn("stopInProgressResult() - trying to stop in-progress result with a session that is not `started`, skipping",{session:e})}regenerateResult(e){this._logger.debug("regenerateResult()",{resultId:e});const t=this._session.get();if("started"===t.kind){const n=this._resultById.get(e);if(n){this._submitAction(n.source.action,n.source.contextId);const t=this._contextIdByResultId.get(e);this._params.trackingService.trackResultRephrase(t)}else this._logger.warn("regenerateResult() - could not find result for provided result ID, skipping",{session:t,resultId:e})}else this._logger.warn("regenerateResult() - trying to regenerate result with a session that is not `started`, skipping",{session:t,resultId:e})}dismissResult(e){this._logger.debug("dismissResult()",{resultId:e});const t=this._session.get();if("started"===t.kind){if(this._resultById.delete(e)){const n=t.resultHistory.findIndex((t=>t.id===e));let i=t.context;if(0===n&&t.resultHistory.length>1){this._logger.debug("dismissResult() - dismissing latest result, will try to restore context from previous result",{session:t,resultId:e});const n=this._extractPreviousResultContext(t);n?(this._logger.debug("dismissResult() - found context for previous result, will restore its context",{session:t,resultId:e,previousResultContext:n}),i=n):this._logger.warn("dismissResult() - could not find context for previous result, context will not be updated",{session:t,resultId:e})}else if(1===t.resultHistory.length){const n=this._extractInitialContext();n?(this._logger.debug("dismissResult() - dismissed all results, restoring initial context",{session:t,resultId:e,initialContext:n}),i=n):this._logger.warn("dimissResult() - dismissed all results, but there is no initial context to restore, keeping the latest context",{session:t,resultId:e})}this._session.set(Object.assign(Object.assign({},t),{context:i,resultHistory:t.resultHistory.filter((t=>!b.x4.Id.eq.equals(t.id,e)))}));const o=this._contextIdByResultId.get(e);this._params.trackingService.trackResultDismiss(o)}else this._logger.warn("dismissResult() - could not find result for provided result ID, skipping",{session:t,resultId:e})}else this._logger.warn("dismissResult() - trying to dismiss result with a session that is not `started`, skipping",{session:t,resultId:e})}dismissError(){this._logger.debug("dismissError()"),this._session.modify((e=>Object.assign(Object.assign({},e),{error:d.none})))}trackResultInsert(e){this._logger.debug("trackResultInsert()",{resultId:e});if(this._resultById.get(e)){const t=this._contextIdByResultId.get(e);this._params.trackingService.trackResultInsert(t)}else this._logger.warn("trackResultInsert() - could not find result for provided result ID, skipping",{resultId:e})}trackResultOffensive(e){this._logger.debug("trackResultOffensive()",{resultId:e});if(this._resultById.get(e)){const t=this._contextIdByResultId.get(e);this._params.trackingService.trackResultOffensive(t)}else this._logger.warn("trackResultOffensive() - could not find result for provided result ID, skipping",{resultId:e})}trackActionsOffensive(){this._logger.debug("trackActionsOffensive()");const e=this._session.get();if("started"!==e.kind)return this._logger.warn("trackActionsOffensive() - tracking actions as offensive with a session that is not `started`, skipping");this._params.trackingService.trackActionsOffensive(e.context.id)}dispose(e){this._logger.debug("dispose()",{reason:e}),this._endSession(),this._subs.dispose()}_endSession(){var e;this._logger.debug("endSession() - sending `cheetah:endSession` to CAPI"),k("cheetahEndSession",this._logger,null===(e=this._params.getCAPIClient())||void 0===e?void 0:e.cheetahEndSession())}_handleRelevantCAPIEvent(e){y.Q.isCheetahSetContext(e)?this._handleCheetahSetContext(e):y.Q.isCheetahChunk(e)?this._handleCheetahChunk(e):y.Q.isCheetahResult(e)?this._handleCheetahResult(e):y.Q.isCheetahError(e)?this._handleCheetahError(e):y.Q.isCheetahAck(e)?this._handleCheetahAck(e):y.Q.isError(e)?this._handleError(e):(this._logger.warn("_handleRelevantCAPIEvent() - unknown event",{event:e}),(0,p.L0)(e))}_handleCheetahSetContext(e){this._logger.debug("_handleCheetahSetContext()",{event:e}),this._clearContextTimeout();const t=this._session.get(),n=e.message,i=this._extractVoiceProfile(n.context.voice),o={id:b._y.Id.create(n.context.id),dynamicActions:this._extractDynamicActions(n.context.availableActions),userPromptAction:this._extractUserPromptAction(n.context.promptAction),quickRewriteAction:this._extractQuickRewriteAction(n.context.quickRewriteAction),intent:this._extractIntent(n.context.intent)},r=n.progressMessage?Object.assign(Object.assign({},o),{kind:"pending",loadingMessage:n.progressMessage}):Object.assign(Object.assign({},o),{kind:"received"});let s=!1;if(0===this._contextById.size&&b._y.isReceived(r)&&(s=!0,this._initialReceivedContext=r),this._contextById.set(r.id,r),this._stateBlobByContextId.set(r.id,n.context.stateBlob),this._session.set(Object.assign(Object.assign({},t),{kind:"started",voiceProfile:i,context:r,inProgressResult:"started"===t.kind?t.inProgressResult:d.none,resultHistory:"started"===t.kind?t.resultHistory:[]})),s&&b.z_.Mode.isQuickRewrite(t.mode)){const i=b.aU.QuickRewriteValue.fromInput(this._extractQuickRewriteAction(n.context.quickRewriteAction));this._logger.debug("_handleCheetahSetContext() - received initial context for quick rewrite session, submitting quick rewrite action",{session:t,event:e,quickRewriteAction:i}),this._submitAction(i)}}_handleCheetahChunk(e){this._logger.debug("_handleCheetahChunk()",{event:e});const t=this._session.get();if("started"!==t.kind)return this._logger.warn("_handleCheetahChunk() - received chunk with a session that is not `started`, skipping",{session:t,event:e});const n=e.message,i=b.x4.Id.create(n.promptId);(0,o.zG)(t.inProgressResult,d.filter(b.x4.isInProgressOngoing),d.filter((e=>b.x4.Id.eq.equals(e.id,i))),d.map((e=>{this._clearAllTimeouts(),this._session.set(Object.assign(Object.assign({},t),{inProgressResult:d.some(Object.assign(Object.assign({},e),{text:e.text+n.token}))}))})),m.ew((()=>this._logger.warn("_handleCheetahChunk() - received chunk that does not correspond to our in-progress-ongoing result, skipping",{session:t,event:e}))))}_handleCheetahResult(e){this._logger.debug("_handleCheetahResult()",{event:e});const t=this._session.get();if("started"!==t.kind)return this._logger.warn("_handleCheetahResult() - received result with a session that is not `started`, skipping",{session:t,event:e});const n=e.message,i=b.x4.Id.create(n.promptId);(0,o.zG)(t.inProgressResult,d.filter(b.x4.isInProgressOngoing),d.filter((e=>b.x4.Id.eq.equals(e.id,i))),d.map((i=>{if(this._clearAllTimeouts(),n.error||!n.text||""===n.text.plain){const i=n.error?b.JZ.create(n.error):b.JZ.createEmptyResultError();this._logger.warn("_handleCheetahResult() - received result with error, adding error to session",{session:t,event:e,error:i}),this._session.set(Object.assign(Object.assign({},t),{inProgressResult:d.none,error:d.some(i)}))}else if(n.text.interrupted)this._logger.debug("_handleCheetahResult() - received result with interrupted text, skipping",{session:t,event:e});else{const o=Object.assign(Object.assign({},i),{kind:"complete",text:n.text.plain,timestamp:Date.now(),delta:"ops"in n.text.delta&&Array.isArray(n.text.delta.ops)?new s.i([...n.text.delta.ops]):new s.i});let r,a,l;this._logger.debug("_handleCheetahResult() - received complete result, saving complete result into history",{session:t,event:e,result:o}),n.context?(a=this._extractVoiceProfile(n.context.voice),r={kind:"received",id:b._y.Id.create(n.context.id),dynamicActions:this._extractDynamicActions(n.context.availableActions),userPromptAction:this._extractUserPromptAction(n.context.promptAction),intent:this._extractIntent(n.context.intent)},l=n.context.stateBlob,this._logger.debug("_handleCheetahResult() - received result with context, will update voice profile and context accordingly",{session:t,event:e,voiceProfile:a,context:r})):(this._logger.warn("_handleCheetahResult() - received result without context, keeping latest voice profile and context",{session:t,event:e}),a=t.voiceProfile,r=t.context,l=this._stateBlobByContextId.get(t.context.id)),this._contextById.set(r.id,r),void 0!==l&&this._stateBlobByContextId.set(r.id,l),this._resultById.set(o.id,o),this._contextIdByResultId.set(o.id,r.id),this._session.set(Object.assign(Object.assign({},t),{voiceProfile:a,context:r,inProgressResult:d.none,resultHistory:[o,...t.resultHistory]}))}})),m.ew((()=>this._logger.warn("_handleCheetahResult() - received result that does not correspond to our in-progress-ongoing result, skipping",{session:t,event:e}))))}_handleCheetahError(e){this._logger.debug("_handleCheetahError",{event:e}),this._clearAllTimeouts();const t=b.JZ.create(e.message.error);this._logger.warn("_handleCheetahError - received error, adding error to session",{error:t}),this._session.modify((e=>Object.assign(Object.assign({},e),{inProgressResult:d.none,error:d.some(t)})))}_handleUpstreamDialectChange(e){this._logger.debug("_handleUpstreamDialectChange()",{upstreamDialect:e});const t=this._session.get();if("started"===t.kind){const n=b.LA.Dialect.Id.create(e);this._logger.debug("_handleUpstreamDialectChange() - dialect changed on upstream services, updating selected dialect on voice profile",{session:t,selectedDialect:n}),this._session.set(Object.assign(Object.assign({},t),{voiceProfile:Object.assign(Object.assign({},t.voiceProfile),{selectedDialect:n})}))}}_handleCheetahAck(e){this._logger.debug("_handleCheetahAck()",{event:e}),this._clearCheetahAckTimeout(),this._cheetahAckIds.add(e.id);const t=this._cheetahAckHandlers.length>0?this._cheetahAckHandlers[0]:void 0;t&&(this._logger.debug("_handleCheetahAck() - extracting `cheetah:ack` handler from queue and executing it",{event:e,cheetahAckHandlers:this._cheetahAckHandlers}),this._cheetahAckHandlers=this._cheetahAckHandlers.slice(1),t(e.id))}_handleError(e){if(this._logger.debug("_handleError()",{event:e}),this._cheetahAckIds.has(e.id))if(this._clearAllTimeouts(),y.Q.isErrorSessionNotInitialized(e)){const t=(0,o.zG)(b.z_.toStarted(this._session.get()),d.map((e=>this._stateBlobByContextId.get(e.context.id))),d.toUndefined);this._logger.warn("_handleError() - received session not initialized error, restarting session",{event:e,startSessionOptions:this._params.startSessionOptions,stateBlob:t}),this._session.modify((e=>Object.assign(Object.assign({},e),{inProgressResult:d.none}))),this._startSession(this._params.startSessionOptions,t)}else{const e=b.JZ.createCriticalError((0,o.zG)(b.z_.toStarting(this._session.get()),d.isSome));this._logger.warn("_handleError - received error event that corresponds to one of the `cheetah:*` messages, adding error to session",{error:e}),this._session.modify((t=>Object.assign(Object.assign({},t),{inProgressResult:d.none,error:d.some(e)})))}}_extractVoiceProfile(e){var t,n;const i=(0,o.zG)(b.z_.toStarted(this._session.get()),d.map((e=>e.voiceProfile.styles)),d.getOrElse((()=>[]))),r=(0,o.zG)(b.z_.toStarted(this._session.get()),d.map((e=>e.voiceProfile.roles)),d.getOrElse((()=>[]))),s=(0,o.zG)(null!==(t=e.styles)&&void 0!==t?t:[],g.UI((e=>({id:b.LA.Style.Id.create(e.button.label),label:e.button.label,iconUrl:e.button.iconUrl,tones:e.tones.map((e=>({id:b.LA.Tone.Id.create(e.label),label:e.label,iconUrl:e.iconUrl,description:e.description}))),maxTones:e.maxTones,description:e.button.description}))),(e=>e.length>0?e:i)),a=b.LA.Style.Id.create(e.selectedStyle),l=s.find((e=>b.LA.Style.Id.eq.equals(e.id,a))),c={styles:s,roles:(0,o.zG)(null!==(n=e.roles)&&void 0!==n?n:[],g.UI((e=>({id:b.LA.Role.Id.create(e),label:e}))),(e=>e.length>0?e:r)),selectedStyle:a,selectedTonesPerStyle:(new Map).set(a,new Set(e.selectedTones.filter((e=>null==l?void 0:l.tones.map((e=>e.id.toString())).includes(e))))),selectedRole:(0,o.zG)(d.fromNullable(e.selectedRole),d.map((e=>e.trim())),d.filter((e=>""!==e)),d.map(b.LA.Role.Id.create)),dialects:b.LA.Dialect.all(),selectedDialect:(0,o.zG)(b.z_.toStarted(this._session.get()),d.fold((()=>b.LA.Dialect.Id.create(this._upstreamDialect.get())),(e=>e.voiceProfile.selectedDialect))),needsSetup:e.needSetup};return this._logger.debug("_extractVoiceProfile()",{voice:e,voiceProfile:c}),c}_extractDynamicActions(e){const t=e.map((e=>e.group)),n=e.map((e=>({id:b.aU.Id.create(e.id),kind:"dynamic",iconUrl:e.iconUrl,group:{label:e.group,rank:t.findIndex((t=>e.group===t))},label:(0,i.sanitize)(e.label,{ALLOWED_TAGS:_.ap}),searchLabel:(0,i.sanitize)(e.label,{ALLOWED_TAGS:[]}),searchTags:e.searchTags,generatesResult:e.generatesText,args:e.args.map((e=>({id:b.pY.Id.create(e.name),kind:"string",label:e.label,hints:(0,o.zG)(d.fromNullable(e.hint),d.map((e=>({header:e.header,items:e.text}))))})))})));return this._logger.debug("_extractDynamicActions()",{availableActions:e,dynamicActions:n}),n}_extractUserPromptAction(e){const t=(0,o.zG)(e.args,g.YM,d.map((t=>({id:b.aU.Id.create(e.id),kind:"userPrompt",arg:{id:b.pY.Id.create(t.name),kind:"string",label:t.label,hints:(0,o.zG)(d.fromNullable(t.hint),d.map((e=>({header:e.header,items:e.text}))))}}))));return d.isSome(t)?this._logger.debug("_extractUserPromptAction()",{promptAction:e,userPromptAction:t}):this._logger.warn("_extractUserPromptAction() - failed to extract user prompt action, received empty action args",{promptAction:e}),t}_extractQuickRewriteAction(e){const t={kind:"quickRewrite",id:b.aU.Id.create(e.id),label:(0,i.sanitize)(e.label,{ALLOWED_TAGS:_.ap}),iconUrl:e.iconUrl};return this._logger.debug("_extractQuickRewriteAction()",{quickRewriteAction:e,extractedQuickRewriteAction:t}),t}_extractIntent(e){const t=(0,o.zG)(d.fromNullable(e),d.filter((e=>e.length>0)),d.map((e=>({header:"Sender's intent",text:(0,i.sanitize)(e,{ALLOWED_TAGS:[..._.ap,"person"]})}))));return this._logger.debug("_extractIntent()",{intent:e,extractedIntent:t}),t}_prepareOuterContext(e){const t={title:e.title,people:{from:[b.H3.Person.extractNameAndEmailString(e.author)],to:e.directRecipients.map(b.H3.Person.extractNameAndEmailString),cc:e.indirectRecipients.map(b.H3.Person.extractNameAndEmailString),bcc:e.undisclosedRecipients.map(b.H3.Person.extractNameAndEmailString)},items:[{text:e.previousMessageInfo.text,people:{from:[b.H3.Person.extractNameAndEmailString(e.previousMessageInfo.author)],to:e.previousMessageInfo.directRecipients.map(b.H3.Person.extractNameAndEmailString)}}]};return this._logger.debug("_prepareOuterContext()",{quickReplyContext:e,preparedOuterContext:t}),t}_submitAction(e,t){var n;this._logger.debug("_submitAction()",{action:e,contextId:t});const i=this._session.get();if("started"===i.kind){const r=null!=t?t:i.context.id,s=this._stateBlobByContextId.get(r);if(void 0===s)return this._logger.warn("_submitAction() - cannot find state blob for context ID, skipping",{session:i,contextId:r,contextStateBlob:s});this._session.set(Object.assign(Object.assign({},i),{context:Object.assign(Object.assign({},i.context),{kind:"pending",loadingMessage:"Working on it..."}),inProgressResult:b.aU.willGenerateResult(e)?d.some({kind:"inProgressPending",header:{label:b.aU.isUserPrompt(e)?e.arg.value:e.label,iconUrl:b.aU.isUserPrompt(e)?d.none:d.some(e.iconUrl),copiablePrompt:b.aU.isUserPrompt(e)?d.some(e.arg.value):d.none},text:"",source:{contextId:r,action:e}}):d.none,error:d.none})),this._setupCheetahAckHandler(b._H.Error.SourceEvent.action,(e=>{this._setupContextTimeout(b._H.Error.SourceEvent.action),(0,o.zG)(b.z_.toStarted(this._session.get()),d.chain((e=>e.inProgressResult)),d.filter(b.x4.isInProgressPending),d.map((t=>Object.assign(Object.assign({},t),{kind:"inProgressOngoing",id:b.x4.Id.create(e)}))),m.bw((t=>{this._logger.debug("received `cheetah:ack` related to in-progress-pending result, transitioning result to in-progress-ongoing",{ackId:e,inProgressResult:t}),this._resultById.set(t.id,t),this._clearResultTimeout(),this._logger.debug("setting up result timeout",{ackId:e,inProgressResult:t}),this._resultTimeout=u.H(this._resultTimeoutMs).subscribe((()=>{const e=b.JZ.createCriticalError((0,o.zG)(b.z_.toStarting(this._session.get()),d.isSome));this._logger.warn("waited too long with an in-progress-ongoing result, adding error to session",{error:e}),this._session.modify((t=>Object.assign(Object.assign({},t),{inProgressResult:d.none,error:d.some(e)}))),this._monitoringService.notify(b._H.Error.WaitForResultTimeout.create(this._session.get().mode))})),this._session.modify((e=>Object.assign(Object.assign({},e),{inProgressResult:d.some(t)})))})),m.ew((()=>this._logger.warn("received `cheetah:ack` related to in-progress-pending result but we don't have an in-progress-pending result, skipping",{ackId:e}))))}));const a={contextId:r,actionId:e.id,args:b.aU.isUserPrompt(e)?[{name:e.arg.id,value:e.arg.value}]:(0,o.zG)(v.c2(e.args),d.fold((()=>[]),(e=>e.map((e=>({name:e.id,value:e.value})))))),stateBlob:s};this._logger.debug("_submitAction() - sending `cheetah:action` to CAPI",{data:a}),k("cheetahAction",this._logger,null===(n=this._params.getCAPIClient())||void 0===n?void 0:n.cheetahAction(a),(()=>this._monitoringService.notify(b._H.Info.Action.create(this._session.get().mode))))}else this._logger.warn("_submitAction() - submitting action with a session that is not `started`, skipping",{session:i,action:e,contextId:t})}_prepareEntryPoint(e){let t;switch(e){case b.z_.Mode.ideation:t=r.vv.Schema.MessageStartSessionEntryPoint.Ideation;break;case b.z_.Mode.rewrite:t=r.vv.Schema.MessageStartSessionEntryPoint.Rewrite;break;case b.z_.Mode.quickRewrite:t=r.vv.Schema.MessageStartSessionEntryPoint.QuickRewrite;break;case b.z_.Mode.quickReply:t=r.vv.Schema.MessageStartSessionEntryPoint.QuickReply;break;default:(0,p.L0)(e)}return this._logger.debug("_prepareEntryPoint()",{sessionMode:e,entryPoint:t}),t}_extractLatestResultContext(e){return this._extractContextFromResultHistory(e,0)}_extractPreviousResultContext(e){return this._extractContextFromResultHistory(e,1)}_extractContextFromResultHistory(e,t){const n=(0,o.zG)(d.fromNullable(e.resultHistory[t]),d.map((e=>e.id)),d.chain((e=>d.fromNullable(this._contextIdByResultId.get(e)))),d.chain((e=>d.fromNullable(this._contextById.get(e)))),d.toUndefined);return n?this._logger.debug("_extractContextFromResultHistory()",{session:e,resultIndex:t,resultContext:n}):this._logger.warn("_extractContextFromResultHistory() - could not find context for result",{session:e,resultIndex:t}),n}_extractInitialContext(){return null!==this._initialReceivedContext?(this._logger.debug("_extractInitialContext()",{initialContext:this._initialReceivedContext}),this._initialReceivedContext):void this._logger.warn("_extractInitialContext() - could not find initial context")}_clearResultTimeout(){var e;this._logger.trace("_clearResultTimeout()"),null===(e=this._resultTimeout)||void 0===e||e.unsubscribe(),this._resultTimeout=void 0}_clearContextTimeout(){var e;this._logger.trace("_clearContextTimeout()"),null===(e=this._contextTimeout)||void 0===e||e.unsubscribe(),this._contextTimeout=void 0}_clearCheetahAckTimeout(){var e;this._logger.trace("_clearCheetahAckTimeout()"),null===(e=this._cheetahAckTimeout)||void 0===e||e.unsubscribe(),this._cheetahAckTimeout=void 0}_clearAllTimeouts(){this._logger.trace("_clearAllTimeouts()"),this._clearResultTimeout(),this._clearContextTimeout(),this._clearCheetahAckTimeout()}_setupContextTimeout(e){this._logger.debug("_setupContextTimeout()",{sourceEvent:e}),this._clearContextTimeout(),this._contextTimeout=u.H(this._contextTimeoutMs).subscribe((()=>{const t=b.JZ.createCriticalError((0,o.zG)(b.z_.toStarting(this._session.get()),d.isSome));this._logger.warn("waited too long to receive `cheetah:setContext`, adding error to session",{error:t}),this._session.modify((e=>Object.assign(Object.assign({},e),{inProgressResult:d.none,error:d.some(t)}))),this._monitoringService.notify(b._H.Error.WaitForContextTimeout.create(e,this._session.get().mode))}))}_setupCheetahAckTimeout(e){this._logger.debug("_setupCheetahAckTimeout()",{sourceEvent:e}),this._clearCheetahAckTimeout(),this._cheetahAckTimeout=u.H(this._cheetahAckTimeoutMs).subscribe((()=>{const t=b.JZ.createCriticalError((0,o.zG)(b.z_.toStarting(this._session.get()),d.isSome));this._logger.warn("waited too long to receive an ACK for a `cheetah:*` command, adding error to session",{error:t}),this._session.modify((e=>Object.assign(Object.assign({},e),{inProgressResult:d.none,error:d.some(t)}))),this._monitoringService.notify(b._H.Error.WaitForAckTimeout.create(e,this._session.get().mode))}))}_setupCheetahAckHandler(e,t){this._setupCheetahAckTimeout(e),this._cheetahAckHandlers.push(t)}}var O=n(24209),I=n(8125),A=n(61792);class R{constructor(e,t,n,i=f.C8.Logging.getLogger("CheetahWeb.AvailabilityService",x.i.DEBUG)){this._capiSessionStartedPartialEvent=e,this._capiCheetahSetContextEvents=t,this._capiCheetahResultEvents=n,this._logger=i,this._subs=new a.w.Keeper,this.availability=h.h.create({kind:A.a.Kind.pending}),this.promptsAllocated=this.availability.view((e=>(0,o.zG)(e,d.fromPredicate((0,I.Kg)(A.a.isActive,A.a.isPassive)),d.map((e=>e.promptsAllocated))))),this._subs.push(this._capiSessionStartedPartialEvent.subscribe((({allowedFeatures:e,cheetahUsage:t})=>this.availability.set(e.includes(r.vv.AllowedFeature)?A.a.fromUsage(t):{kind:A.a.Kind.unavailable}))),O.T(this._capiCheetahSetContextEvents,this._capiCheetahResultEvents).subscribe((e=>this.availability.set(A.a.fromUsage(e.message.usage)))),this.availability.pipe(c.G()).subscribe((([e,t])=>{this._logger.debug("availability updated",{prevAvailability:e,newAvailability:t}),(A.a.isActive(t)||A.a.isPassive(t))&&0===t.refillDate&&this._logger.warn("availability updated - error parsing refill date for new availability, setting timestamp to 0",{prevAvailability:e,newAvailability:t})})))}dispose(){this._subs.dispose()}}class P{constructor(e,t=f.C8.Logging.getLogger("CheetahWeb.TrackingService",x.i.DEBUG)){this._getCAPIClient=e,this._logger=t}trackResultInsert(e){this._logger.debug("trackResultInsert()",{contextId:e}),e||this._logger.warn("trackResultInsert() - tracking result insert without context"),this._trackUxInteraction({kind:"result",userAction:b.Z7.Result.UserAction.insert},e)}trackResultOffensive(e){this._logger.debug("trackResultOffensive()",{contextId:e}),e||this._logger.warn("trackResultOffensive() - tracking result offensive without context"),this._trackUxInteraction({kind:"result",userAction:b.Z7.Result.UserAction.offensive},e)}trackResultDismiss(e){this._logger.debug("trackResultDismiss()",{contextId:e}),e||this._logger.warn("trackResultDismiss() - tracking result dismiss without context"),this._trackUxInteraction({kind:"result",userAction:b.Z7.Result.UserAction.dismiss},e)}trackResultRephrase(e){this._logger.debug("trackResultRephrase()",{contextId:e}),e||this._logger.warn("trackResultRephrase() - tracking result rephrase without context"),this._trackUxInteraction({kind:"result",userAction:b.Z7.Result.UserAction.rephrase},e)}trackVoiceProfileOpen(e){this._logger.debug("trackVoiceProfileOpen()",{source:e}),this._trackUxInteraction({kind:"voiceProfile",userAction:"toolbar"===e?b.Z7.VoiceProfile.UserAction.open:b.Z7.VoiceProfile.UserAction.openFromBanner})}trackVoiceProfileSkip(){this._logger.debug("trackVoiceProfileSkip()"),this._trackUxInteraction({kind:"voiceProfile",userAction:b.Z7.VoiceProfile.UserAction.skip})}trackActionsOpenStore(){this._logger.debug("trackActionsOpenStore()"),this._trackUxInteraction({kind:"actions",userAction:b.Z7.Actions.UserAction.openStore})}trackActionsOffensive(e){this._logger.debug("trackActionsOffensive()"),e||this._logger.warn("trackActionsOffensive() - tracking actions offensive without context"),this._trackUxInteraction({kind:"actions",userAction:b.Z7.Actions.UserAction.offensive},e)}trackPromptSearch(){this._logger.debug("trackPromptSearch()"),this._trackUxInteraction({kind:"prompt",userAction:b.Z7.Prompt.UserAction.search})}trackUsageInfoClick(){this._logger.debug("trackUsageInfoClick()"),this._trackUxInteraction({kind:"usageInfo",userAction:b.Z7.UsageInfo.UserAction.click})}trackUsageInfoHover(){this._logger.debug("trackUsageInfoHover()"),this._trackUxInteraction({kind:"usageInfo",userAction:b.Z7.UsageInfo.UserAction.hover})}trackOnboardingPopupView(){this._logger.debug("trackOnboardingPopupView()"),this._trackUxInteraction({kind:"onboardingPopup",userAction:b.Z7.Onboarding.UserAction.view})}trackOnboardingPopupSkip(){this._logger.debug("trackOnboardingPopupSkip()"),this._trackUxInteraction({kind:"onboardingPopup",userAction:b.Z7.Onboarding.UserAction.skip})}trackOnboardingPopupNext(){this._logger.debug("trackOnboardingPopupNext()"),this._trackUxInteraction({kind:"onboardingPopup",userAction:b.Z7.Onboarding.UserAction.next})}trackOnboardingPromptsTooltipView(){this._logger.debug("trackOnboardingPromptsTooltipView()"),this._trackUxInteraction({kind:"onboardingPromptsTooltip",userAction:b.Z7.Onboarding.UserAction.view})}trackOnboardingReviewTooltipView(){this._logger.debug("trackOnboardingReviewTooltipView()"),this._trackUxInteraction({kind:"onboardingReviewTooltip",userAction:b.Z7.Onboarding.UserAction.view})}trackOnboardingRewriteTooltipView(){this._logger.debug("trackOnboardingRewriteTooltipView()"),this._trackUxInteraction({kind:"onboardingRewriteTooltip",userAction:b.Z7.Onboarding.UserAction.view})}trackAssistantClose(){this._logger.debug("trackAssistantClose()"),this._trackUxInteraction({kind:"assistant",userAction:b.Z7.Assistant.UserAction.close})}_trackUxInteraction(e,t){var n;const i=b.Z7.getComponentId(e,t),o=b.Z7.getUserAction(e);this._logger.debug("_trackUxInteraction() - sending `user_action` to CAPI",{componentId:i,userAction:o,uxInteraction:e,contextId:t}),k("sendUserAction",this._logger,null===(n=this._getCAPIClient())||void 0===n?void 0:n.sendUserAction(i,o))}}},61862:(e,t,n)=>{n.d(t,{TB:()=>W,WY:()=>js,aK:()=>Fs});var i=n(57050),o=n(20654),r=n(14601),s=n(2768),a=n(85985),l=n(2834),c=n(49708),u=n(5114),d=n(55415),m=n(38983);function p(e){return(0,i.zG)(e,u.fromPredicate((e=>"initial"===e.kind||"dragged"===e.kind)))}class h{constructor(e,t){this._positionInfo=e,this._onFocus=t,this._internalState=m.h.create({managedPositionInfo:u.none,assistant:u.none,dragState:u.none,assistantMaxHeight:u.none}),this.state=this._internalState.view((e=>(0,i.zG)(e.dragState,u.map((t=>{return n=t,i=e.assistantMaxHeight,{kind:"dragged",dragging:n.dragging,referencePosition:n.translationOrigin,assistantMaxHeight:i,translation:(0,o.NN)(Object.assign(Object.assign({},n.assistantSize),{top:n.viewportSize.height-n.translationOrigin.bottom-n.assistantSize.height,left:n.viewportSize.width-n.translationOrigin.right-n.assistantSize.width}),Object.assign({left:0,top:0},n.viewportSize))(n.translation)};var n,i})),u.alt((()=>(0,i.zG)(e.managedPositionInfo,u.map((t=>({kind:"initial",referenceElement:t.referenceElement,placement:t.placement,offset:t.offset,assistantMaxHeight:e.assistantMaxHeight})))))),u.getOrElse((()=>({kind:"none"})))))),this._subs=new r.w,this._subs.add(this._positionInfo.pipe(s.R(this._internalState.view("dragState").pipe(a.h(u.isSome))),l.b((e=>this._internalState.lens("managedPositionInfo").set(u.some(e))))).subscribe()),this._subs.add(c.R(self,"resize").pipe(l.b((()=>this._internalState.lens("dragState").modify(u.map(o.eG.set("viewportSize",(0,i.zG)((0,o.C7)(),d.H6("width","height")))))))).subscribe())}onFocus(e){this._onFocus(e)}onMount(e){this._internalState.lens("assistant").set(u.some(e))}onResize(e){this._internalState.lens("dragState").modify(u.map(o.eG.set("assistantSize",(0,i.zG)(e,d.H6("width","height")))))}onMaxHeightChange(e){this._internalState.lens("assistantMaxHeight").set(u.some(e))}onDrag(e){this._internalState.modify((t=>Object.assign(Object.assign({},t),{dragState:(0,i.zG)(t.dragState,u.map((0,i.ls)(o.eG.set("translation",e),o.eG.set("dragging",!0))),u.alt((()=>(0,i.zG)(t.assistant,u.map((e=>({assistantRect:e.getBoundingClientRect(),viewportSize:(0,i.zG)((0,o.C7)(),d.H6("width","height"))}))),u.map((({assistantRect:t,viewportSize:n})=>({dragging:!0,viewportSize:n,assistantSize:{width:t.width,height:t.height},translation:e,translationOrigin:{bottom:n.height-(t.top+t.height),right:n.width-(t.left+t.width)}})))))))})))}onDragEnd(){this._internalState.lens("dragState").modify(u.map(o.eG.set("dragging",!1)))}dispose(){this._subs.unsubscribe()}}var g,f,x,b=n(17771),v=n(48044),y=n(13853),C=n(64015),k=n(17889),w=n(38305),S=n(81531),_=n(99341),E=n(32952),O=n(78674),I=n(41398),A=n(77176),R=n(98403),P=n(24209),U=n(60797),B=n(19751),z=n(2844),T=n(66310),G=n(76974),F=n(93508),j=n(8125),N=n(45701),V=n(95195),D=n(83078),M=n(22232),$=n(35152),L=n(35498),H=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n};!function(e){let t,n;e.isSupportedDynamicAction=(0,j.Kg)($.aU.DynamicInput.isFollowUpQuestion,$.aU.DynamicInput.isQuickAction),function(e){e.ordByGroup=N.contramap((e=>e.group.rank))(L.Df)}(t=e.SupportedDynamicActions||(e.SupportedDynamicActions={})),function(e){e.make=function(e){return{kind:"backendAction",action:e}}}(n=e.BackendAction||(e.BackendAction={}))}(g||(g={})),function(e){e.eq=V.Eh(w.Eq,$.x4.Id.eq),e.card=function(e){return V.F2(e)},e.uiItem=function(e){return V.t$(e)},e.toCard=function(e){return u.fromEither(e)},e.toUIItem=function(e){return(0,i.zG)(e,V.g_(u.some,(()=>u.none)))}}(f||(f={})),function(e){function t(e){return t=>Object.assign(Object.assign({},t),{activeView:e,previousView:t.activeView})}e.create=function(){return{activeView:"loading",previousView:"loading",stagingVoiceProfile:u.none,stagingFeedbackFormData:{},textBox:"",selectedDynamicAction:u.none,contentOverflowUnderToolbar:!1,promptAutofocusToken:0,cardsState:{hoveredCard:u.none,focusedCard:u.none},promptMenu:u.none,reportMenuVisible:u.none}},e.updateActiveView=t,e.goToPreviousView=e=>t(e.previousView)(e)}(x||(x={}));class K{constructor(e,t,n,s,c,d,p,h,b=S.C8.Logging.getLogger(K.name)){var v,y,w;this._userService=e,this._availabilityService=t,this._trackingService=n,this._textEditorService=s,this._uphookService=c,this._feedbackService=d,this._sessionService=p,this._handlers=h,this._log=b,this._state=m.h.create(x.create()),this._subs=new r.w,this._userTyped=new E.xQ,this._promptMenuActions=new E.xQ,this._reportMenuVisibleDebounced=m.h.create(u.none),this.state=m.h.combine(this._state,this._userService.user,this._availabilityService.availability,this._sessionService.session,this._reportMenuVisibleDebounced,((e,t,n,o,r)=>{var{cardsState:s,reportMenuVisible:a}=e,l=H(e,["cardsState","reportMenuVisible"]);return Object.assign(Object.assign({},l),{user:t,availability:n,session:o,userPromptAction:(0,i.zG)($.z_.toStarted(o),u.chain((e=>e.context.userPromptAction))),activeCards:new Set((0,i.zG)([s.hoveredCard,(0,i.zG)(s.focusedCard,D.vx((0,i.zG)(r,u.chain(f.toCard))))],C.oA)),canScroll:u.isNone(a),contextualActions:Z(o)})})),this._subs.add(this.state.subscribe((e=>this._log.debug("State update",e)))),this._subs.add(this._updateActiveView().subscribe()),this._subs.add(this._userTyped.pipe(O.b(150),I.M(this._state),A.U((([e,t])=>t)),a.h((e=>u.isNone(e.selectedDynamicAction))),l.b((e=>this._promptMenuActions.next({kind:"showSearchRestuls",search:e.textBox})))).subscribe()),this._subs.add((v=this._promptMenuActions,y=this._sessionService.session,w=this._availabilityService.availability,z.aj([v.pipe(T.w((e=>"showSearchRestuls"===e.kind?y.view($.z_.toStarted).pipe(A.U((t=>(0,i.zG)(t,u.filter((()=>""!==e.search.trim())),u.chain((t=>function(e,t){return(0,i.zG)(e,C.DZ((e=>(0,i.zG)((0,o.lA)(t,e.searchLabel,e.searchTags),u.map((t=>({data:e,matchScore:t})))))),C.DY((0,o.JY)()),C.UI((({data:e})=>e)),k.c2)}((0,i.zG)(t.context.dynamicActions,C.hX(g.isSupportedDynamicAction)),e.search))),u.map((e=>({kind:"searchResults",actions:e}))))))):"showActionsStore"===e.kind?y.view((0,i.ls)(Z,u.map((e=>({kind:"actionsStore",actions:e}))))):"close"===e.kind?G.of(u.none):(0,M.L0)(e))),F.O(u.none)),w]).pipe(A.U((([e,t])=>(0,i.zG)(e,u.filter((()=>!$.a8.isUnavailable(t)))))))).subscribe(R.wW(this._state.lens("promptMenu")))),this._subs.add(P.T(this._state.view("reportMenuVisible").pipe(U.oA,A.U(u.some)),this._state.view("reportMenuVisible").pipe(B.skipBy(u.getEq(f.eq)),O.b(250),a.h(u.isNone))).subscribe(R.wW(this._reportMenuVisibleDebounced)))}_updateActiveView(){return m.h.combine(this._sessionService.session.view($.z_.toStarting).view((0,i.ls)(u.chain((e=>e.error)),u.fold(i.jv,i.W8))),this._sessionService.session.view($.z_.toStarted).view(u.map((e=>({hasResults:e.resultHistory.length>0,hasInProgressResult:u.isSome(e.inProgressResult)})))),this._state.view("selectedDynamicAction").view(u.isSome),((e,t,n)=>{const o=e?u.some("loadingError"):(0,i.zG)(t,u.map((({hasResults:e,hasInProgressResult:t})=>n?"actionSelected":e||t?"afterResults":"beforeResults")));(0,i.zG)(o,D.bw((e=>this._state.modify((t=>"voiceProfile"!==t.activeView&&"feedbackForm"!==t.activeView?x.updateActiveView(e)(t):t)))))}))}notify(e){switch(this._handlers.notify(e),e.kind){case $.ix.Kind.close:return this._close();case $.ix.Kind.goBack:return this._goBack();case $.ix.Kind.openVoiceProfile:return this._openVoiceProfile(e.source);case $.ix.Kind.closeVoiceProfile:return this._closeVoiceProfile();case $.ix.Kind.applyVoiceProfile:return this._applyVoiceProfile();case $.ix.Kind.toggleTone:return this._toggleTone(e.id,e.selected);case $.ix.Kind.selectStyle:return this._selectStyle(e.id);case $.ix.Kind.selectRole:return this._selectRole((0,i.zG)(e.role,u.map((e=>e.id))));case $.ix.Kind.selectDialect:return this._selectDialect(e.dialect.id);case $.ix.Kind.promptFieldChange:return this._updateTextBox(e.text);case $.ix.Kind.promptFieldFocusChange:return this._onPromptFieldFocusChange(e.focused);case $.ix.Kind.clickActionBrick:return this._executeAction(e.action);case $.ix.Kind.promptSend:return this._go();case $.ix.Kind.generateStop:return this._stop();case $.ix.Kind.insert:return this._insert(e.result);case $.ix.Kind.rephrase:return this._rephrase(e.result);case $.ix.Kind.dismissResult:return this._dismissResult(e.result);case $.ix.Kind.dismissError:return this._dismissError();case $.ix.Kind.openFeedbackForm:return this._openFeedbackForm(e.source);case $.ix.Kind.updateFeedbackForm:return this._updateFeedbackForm(e.feedbackData);case $.ix.Kind.submitFeedbackForm:return this._submitFeedbackForm(e.feedbackData);case $.ix.Kind.reportOffensiveResult:return this._reportOffensiveResult(e.result);case $.ix.Kind.reportOffensiveActions:return this._reportOffensiveActions();case $.ix.Kind.clickResultHeader:return this._clickResultHeader(e.prompt);case $.ix.Kind.collapsePromptMenu:return this._collapsePromptMenu();case $.ix.Kind.creditsInfoHover:return this._onCreditsInfoHover();case $.ix.Kind.creditsInfoClick:return this._onCreditsInfoClick(e.userIsFree);case $.ix.Kind.cardHover:return this._onCardHover(e.resultId,e.hovered);case $.ix.Kind.cardFocus:return this._onCardFocus(e.resultId,e.focused);case $.ix.Kind.reportMenuVisibilityChange:return this._onCardReportMenuVisibilityChange(e.trigger,e.visible);case $.ix.Kind.mount:e.name===$.ec.creditsInfoButton&&this._uphookService.onShowGetMorePrompts(this._userService.user.get().isFree);break;case $.ix.Kind.unmount:break;case $.ix.Kind.escapePressed:this._onEscapePressed();break;default:(0,M.L0)(e)}}contentOverflowUnderToolbar(e){this._state.lens("contentOverflowUnderToolbar").set(e)}dispose(){this._subs.unsubscribe()}_onCardHover(e,t){this._state.lens("cardsState").lens("hoveredCard").modify(t?()=>u.some(e):u.filter((t=>t!==e)))}_onCardFocus(e,t){this._state.lens("cardsState").lens("focusedCard").modify(t?()=>u.some(e):u.filter((t=>t!==e)))}_onCardReportMenuVisibilityChange(e,t){this._state.modify((n=>Object.assign(Object.assign({},n),{reportMenuVisible:t?u.some(e):(0,i.zG)(n.reportMenuVisible,u.filter((t=>!f.eq.equals(t,e)))),cardsState:Object.assign(Object.assign({},n.cardsState),{hoveredCard:(0,i.zG)(f.toCard(e),u.fold((()=>n.cardsState.hoveredCard),(e=>t?n.cardsState.hoveredCard:(0,i.zG)(n.cardsState.hoveredCard,u.filter((t=>t!==e))))))})})))}_onEscapePressed(){this._sessionService.session.view((e=>"started"===e.kind&&u.isNone(e.inProgressResult))).get()&&this._close()}_close(e=$.z_.EndReason.closed){e===$.z_.EndReason.closed&&this._trackingService.trackAssistantClose(),this._handlers.close(e)}_goBack(){const e=(0,i.zG)($.z_.toStarted(this._sessionService.session.get()),u.map((e=>e.resultHistory.length>0)),u.fold(i.jv,i.W8));this._state.modify((t=>Object.assign(Object.assign({},"actionSelected"===t.activeView?x.updateActiveView(e?"afterResults":"beforeResults")(t):x.updateActiveView(t.previousView)(t)),{selectedDynamicAction:"actionSelected"===t.activeView?u.none:t.selectedDynamicAction,textBox:"actionSelected"===t.activeView?"":t.textBox})))}_openVoiceProfile(e){(0,i.zG)($.z_.toStarted(this._sessionService.session.get()),D.bw((t=>{this._trackingService.trackVoiceProfileOpen(e),this._state.modify((0,i.ls)(x.updateActiveView("voiceProfile"),_.e.set("stagingVoiceProfile",u.some({selectedStyle:t.voiceProfile.selectedStyle,selectedTonesPerStyle:t.voiceProfile.selectedTonesPerStyle,selectedRole:t.voiceProfile.selectedRole,selectedDialect:t.voiceProfile.selectedDialect,needsSetup:t.voiceProfile.needsSetup})),_.e.set("reportMenuVisible",u.none),_.e.set("cardsState",{hoveredCard:u.none,focusedCard:u.none})))})))}_closeVoiceProfile(){this._trackingService.trackVoiceProfileSkip(),this._state.modify((e=>(0,i.zG)(x.updateActiveView(e.previousView)(e),_.e.set("stagingVoiceProfile",u.none))))}_applyVoiceProfile(){const e=this._state.get().stagingVoiceProfile;this._state.modify((e=>(0,i.zG)(x.updateActiveView(e.previousView)(e),_.e.set("stagingVoiceProfile",u.none)))),(0,i.zG)(e,D.bw((e=>{this._sessionService.setVoiceProfile(e)})))}_toggleTone(e,t){this._state.lens("stagingVoiceProfile").modify(u.map((n=>Object.assign(Object.assign({},n),{selectedTonesPerStyle:(0,i.zG)(n.selectedTonesPerStyle,t?(0,_.n)($.LA.Style.Id.eq)(n.selectedStyle,u.fold((()=>new Set([e])),y.$T($.LA.Tone.Id.eq)(e))):(0,i.ls)(v.cq($.LA.Style.Id.eq)(n.selectedStyle,y.Od($.LA.Tone.Id.eq)(e)),u.getOrElse((()=>n.selectedTonesPerStyle))))}))))}_selectStyle(e){this._state.lens("stagingVoiceProfile").modify(u.map((t=>Object.assign(Object.assign({},t),{selectedStyle:e}))))}_selectRole(e){this._state.lens("stagingVoiceProfile").modify(u.map((t=>Object.assign(Object.assign({},t),{selectedRole:e}))))}_selectDialect(e){this._state.lens("stagingVoiceProfile").modify(u.map((t=>Object.assign(Object.assign({},t),{selectedDialect:e}))))}_updateTextBox(e){this._state.lens("textBox").set(e),this._userTyped.next(e)}_onPromptFieldFocusChange(e){this._handlers.onFocus(e),""===this._state.view("textBox").get().trim()||e||this._trackingService.trackPromptSearch()}_executeAction(e){if(this._promptMenuActions.next({kind:"close"}),"backendAction"===e.kind)if($.aU.DynamicInput.isFollowUpQuestion(e.action)){const t=e.action;this._state.modify((e=>Object.assign(Object.assign({},e),{textBox:"",selectedDynamicAction:u.some(t)})))}else $.aU.DynamicInput.isQuickAction(e.action)?(this._state.modify((e=>Object.assign(Object.assign({},e),{textBox:"",selectedDynamicAction:u.none}))),this._sessionService.submitAction(e.action)):(0,M.L0)(e.action);else"allResults"===e.kind?(this._trackingService.trackActionsOpenStore(),this._promptMenuActions.next({kind:"showActionsStore"})):"go"===e.kind?this._go():(0,M.L0)(e)}_go(){this._promptMenuActions.next({kind:"close"}),u.isSome(this._state.get().selectedDynamicAction)?this._submitSelectedFollowUpAction():this._submitCustomPrompt()}_stop(){this._sessionService.stopInProgressResult()}_insert(e){this._sessionService.trackResultInsert(e.id),this._textEditorService.insertText(e.text),this._close($.z_.EndReason.textInserted)}_rephrase(e){this._sessionService.regenerateResult(e.id)}_dismissResult(e){this._sessionService.dismissResult(e.id),this._state.modify((t=>Object.assign(Object.assign({},t),{reportMenuVisible:(0,i.zG)(t.reportMenuVisible,u.filter((t=>!f.eq.equals(t,f.card(e.id))))),cardsState:{hoveredCard:(0,i.zG)(t.cardsState.hoveredCard,u.filter((t=>t!==e.id))),focusedCard:(0,i.zG)(t.cardsState.hoveredCard,u.filter((t=>t!==e.id)))}})))}_dismissError(){this._sessionService.dismissError()}_openFeedbackForm(e){this._state.modify((t=>Object.assign(Object.assign({},x.updateActiveView("feedbackForm")(t)),{stagingFeedbackFormData:{source:e},reportMenuVisible:u.none,cardsState:{hoveredCard:u.none,focusedCard:u.none}})))}_updateFeedbackForm(e){this._state.modify((t=>Object.assign(Object.assign({},t),{stagingFeedbackFormData:Object.assign(Object.assign({},t.stagingFeedbackFormData),e)})))}_submitFeedbackForm(e){this._state.modify((e=>Object.assign(Object.assign({},x.goToPreviousView(e)),{stagingFeedbackFormData:{}}))),this._feedbackService.submitFeedback(e)}_reportOffensiveResult(e){this._sessionService.trackResultOffensive(e.id)}_reportOffensiveActions(){this._sessionService.trackActionsOffensive()}_clickResultHeader(e){this._state.modify((t=>Object.assign(Object.assign({},t),{textBox:e,promptAutofocusToken:t.promptAutofocusToken+1})))}_collapsePromptMenu(){this._promptMenuActions.next({kind:"close"})}_onCreditsInfoHover(){this._trackingService.trackUsageInfoHover()}_onCreditsInfoClick(e){this._trackingService.trackUsageInfoClick(),this._uphookService.onClickGetMorePrompts(e)}_submitSelectedFollowUpAction(){const e=(0,i.zG)(this._state.get().textBox.trim(),u.fromPredicate((e=>""!==e)));(0,i.zG)(b.Yt(u.Apply)({text:e,selectedDynamicAction:this._state.get().selectedDynamicAction}),u.map((({text:e,selectedDynamicAction:t})=>$.aU.FollowUpQuestionValue.fromInputAndValue(t,e))),D.bw((e=>{this._state.modify((e=>Object.assign(Object.assign({},e),{selectedDynamicAction:u.none,textBox:""}))),this._sessionService.submitAction(e)})))}_submitCustomPrompt(){(0,i.zG)(this._state.get().textBox.trim(),u.fromPredicate((e=>""!==e)),u.chain((e=>(0,i.zG)($.z_.toStarted(this._sessionService.session.get()),u.chain((e=>e.context.userPromptAction)),u.map((t=>({userPromptAction:t,text:e})))))),D.bw((({text:e,userPromptAction:t})=>{this._state.lens("textBox").set(""),this._sessionService.submitAction($.aU.UserPromptValue.fromInput(t,e))})))}}function Z(e){return(0,i.zG)($.z_.toStarted(e),u.map((e=>e.context.dynamicActions)),u.chain((0,i.ls)(C.hX(g.isSupportedDynamicAction),k.c2)))}var W,q,Y=n(80900),X=n(28043);class Q{constructor(e,t,n=3e3,i=1){this._assistantUIActions=e,this._activeView=t,this._notificationsDurationMs=n,this._maxNotificationsCountAtOnce=i,this._state=m.h.create([]),this._notificationsSubs=new Map,this._subs=new r.w,this._nextToastId=0,this.state=this._state.view(),this._subs.add(this._showFeedbackSubmittedToast().subscribe()),this._subs.add(this._clearNotificationsOnViewChange().subscribe())}dismiss(e){var t;null===(t=this._notificationsSubs.get(e))||void 0===t||t.unsubscribe(),this._notificationsSubs.delete(e),this._state.modify(C.hX((t=>t.id!==e)))}clearAll(){this._notificationsSubs.forEach((e=>e.unsubscribe())),this._notificationsSubs.clear(),this._state.set([])}dispose(){this._subs.unsubscribe(),this.clearAll()}_showNotification(e){const t=this._nextToastId++;this._notificationsSubs.set(t,Y.H(this._notificationsDurationMs).subscribe((()=>this.dismiss(t)))),this._state.modify((0,i.ls)(C.Ce({kind:e,id:t}),C.ke(this._maxNotificationsCountAtOnce)))}_showFeedbackSubmittedToast(){return this._assistantUIActions.pipe(a.h((0,j.Kg)($.ix.is($.ix.Kind.submitFeedbackForm),$.ix.is($.ix.Kind.reportOffensiveResult),$.ix.is($.ix.Kind.reportOffensiveActions))),l.b((()=>this._showNotification($.Cl.Kind.feedbackSubmitted))))}_clearNotificationsOnViewChange(){return this._activeView.pipe(X.x(),l.b((e=>{"feedbackForm"!==e&&"voiceProfile"!==e||this.clearAll()})))}}!function(e){e.create=function(e,t,n,i,o,r,s,a,l){const c=q.create(e,t,n,i,o,r,s,a),u=new h(l,(e=>a.onFocus(e)));return Object.assign(Object.assign({},c),{position:u,dispose:()=>{u.dispose(),c.dispose()}})}}(W||(W={})),function(e){e.create=function(e,t,n,i,o,r,s,a){const l=new E.xQ,c=new K(e,t,n,i,o,r,s,Object.assign(Object.assign({},a),{notify:e=>{l.next(e),a.notify(e)}})),u=new Q(l,c.state.view("activeView"));return{assistant:c,notifications:u,dispose:()=>{u.dispose(),c.dispose()}}}}(q||(q={}));var J=n(27378),ee=n(34217),te=n(5739),ne=n(12187),ie=n(74204),oe=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n};const re=e=>{var{placement:t,onMount:n,onMaxSizeChange:r,children:s}=e,a=oe(e,["placement","onMount","onMaxSizeChange","children"]);const[l,c]=J.useState(null),d="initial"===t.kind?t:void 0,m=(0,o.gM)(r),{styles:p}=(0,ie.D)(null==d?void 0:d.referenceElement,l,{placement:null==d?void 0:d.placement,modifiers:[m,...(0,i.zG)((null==d?void 0:d.offset)||u.none,u.fold((()=>[]),(e=>[{name:"offset",options:{offset:e}}])))]});return J.createElement("div",Object.assign({ref:e=>{c(e),e&&e!==l&&n(e)},style:"initial"===t.kind?p.popper:{position:"fixed",top:t.referencePosition.top,left:t.referencePosition.left,bottom:t.referencePosition.bottom,right:t.referencePosition.right,transform:`translate(${t.translation.x}px, ${t.translation.y}px)`},tabIndex:0},a),s)},se=J.createContext({portalContainer:m.h.create(u.none)});var ae=n(89894),le=n(62172),ce=n(88392),ue=n(9546);const de="content",me="toolbar",pe=e=>ae.ux.color(le.BlueGray40).toRGBA().fade(e).toString(),he={fontFamily:"Inter, sans-serif",width:ae.ux.rem(26.875),boxShadow:`0px 0px 0px 0.5px ${le.BlueGray40}, 0px 0px 2px 0.5px ${pe(.5)}, 0px 1px 8px 0.5px ${pe(.1)}, 0px 2px 12px 0.5px ${pe(.1)}, 0px 4px 20px 0.5px ${pe(.25)}`,backdropFilter:`blur(${ae.ux.rem(.34375)})`,borderRadius:ae.ux.rem(ce.ze),background:"linear-gradient(180deg, #FCFCFC 0%, #FCFCFC 100%)",$nest:{"&[data-dragging='true']":{cursor:"grabbing",$nest:{[`.${de}`]:{pointerEvents:"none"},[`.${me}`]:{pointerEvents:"none"}}}}},ge={maxWidth:ae.ux.rem(40),minWidth:ae.ux.rem(18),width:ae.ux.percent(100)},fe={display:"flex",alignItems:"center",justifyContent:"space-between",gap:ae.ux.rem(ue.x),padding:`${ae.ux.rem(ue.F2)} ${ae.ux.rem(ue.x)}`,height:ae.ux.rem(2.5),boxSizing:"border-box"},xe={borderBottom:`0.5px solid ${le.BlueGray10}`},be={container:ae.ux.style(he),fixedContainer:ae.ux.style(he,ge),toolbar:ae.ux.joinClasses([me,ae.ux.style(fe)]),toolbarDraggable:ae.ux.joinClasses([me,ae.ux.style(fe,{cursor:"grab",$nest:{"&:active":{cursor:"grabbing"}}})]),toolbarOverflow:ae.ux.style(xe),content:de};var ve=n(15906),ye=n(90845),Ce=n(99094),ke=n(31278);const we=ee.UI.Grid.make((({slots:e,state:t,notify:n})=>{const{ref:i,onMount:o}=ye.P.useElWatcher();return J.createElement(se.Provider,{value:{portalContainer:i}},J.createElement(Ce.f.Context.Provider,{value:Ce.f.emptyWithName("cheetahAssistant")},J.createElement(te.F.Fragment,null,t.pipe(A.U((t=>"initial"===t.kind||"dragged"===t.kind?J.createElement(re,{placement:t,onFocus:n({kind:"focus",focused:!0}),onBlur:n({kind:"focus",focused:!1}),onMount:e=>{n({kind:"mount",element:e})(),o(e)},onMaxSizeChange:e=>n({kind:"maxSize",maxSize:e})(),"data-grammarly-part":"ideation-assistant","data-dragging":"dragged"===t.kind&&t.dragging,className:be.container},J.createElement("header",Object.assign({},(0,ne.Sh)(be.toolbarDraggable,t.contentOverflowUnderToolbar?be.toolbarOverflow:null),{ref:e=>e&&n({kind:"dragHandleMount",element:e})()}),e.toolbar,J.createElement(ve.zx.Tertiary,{onClick:n({kind:$.ix.Kind.close}),compact:!0,size:"large",name:"toolbarClose","aria-label":"Close Assistant"},J.createElement(ke.JO.Close,null))),J.createElement("main",{className:be.content},e.content)):"none"===t.kind?null:(0,M.L0)(t)))))))}));var Se=n(38194),_e=n(49143),Ee=n(85089),Oe=n(83401);function Ie(e,t){return(0,i.ls)(Se.B(),(n=>P.T(n.pipe(l.b((n=>function(e,t,n){switch(e.kind){case"focus":return t.onFocus(e.focused);case"mount":return t.onMount(e.element);case"maxSize":return t.onMaxHeightChange(e.maxSize.height);case"dragHandleMount":break;case $.ix.Kind.close:return n.notify(e);default:(0,M.L0)(e)}}(n,e,t))),_e.l()),n.pipe(function(e){return(0,i.ls)(A.U((e=>"dragHandleMount"===e.kind?u.some(e.element):u.none)),U.oA,(0,o.uj)(),(t=e,(0,i.ls)(Se.B(),(e=>(0,i.zG)(P.T(e.pipe(a.h((e=>o.E9.l1Distance(o.E9.fromCartesian(e.translate),o.E9.fromCartesian(e.lastTranslate))>=3)),l.b((e=>t.onDrag(e.translate)))),e.pipe(a.h((e=>e.dragEnd)),l.b((()=>t.onDragEnd())))),_e.l())))),_e.l());var t}(e)),n.pipe(function(e){return(0,i.ls)(A.U((e=>"mount"===e.kind?u.some(e.element):u.none)),U.oA,T.w((e=>Ee.YC(e).pipe(F.O(null),A.U((()=>e.getBoundingClientRect()))))),l.b((t=>e.onResize(t))),_e.l())}(e)),n.pipe((0,i.ls)(A.U((e=>"mount"===e.kind?u.some(e.element):u.none)),U.oA,A.U(u.some),ye.P.FocusTrap.dynamicFocusTrap(ye.P.FocusTrap.InitialFocus.none,Ae,Re),_e.l())),z.aj([e.state,t.state]).pipe(A.U((([e,{contentOverflowUnderToolbar:t,activeView:n}])=>Object.assign(Object.assign({},e),{contentOverflowUnderToolbar:t&&"voiceProfile"!==n&&"feedbackForm"!==n})))))))}function Ae(e){var t;if(e instanceof HTMLIFrameElement){const n=null===(t=e.contentWindow)||void 0===t?void 0:t.document;if(n){const e=n.body.querySelector("textarea:not([disabled]), input:not([disabled])");e&&"focus"in e&&"function"==typeof e.focus&&e.focus()}}else e.focus()}function Re(e,t){return e instanceof HTMLIFrameElement?e.contentDocument?c.R(e.contentDocument.body,t):Oe.C:c.R(e,t)}const Pe=ee.UI.Grid.make((({slots:e,state:t,notify:n})=>{const{ref:o,onMount:r}=ye.P.useElWatcher();return J.createElement(se.Provider,{value:{portalContainer:o}},J.createElement(Ce.f.Context.Provider,{value:Ce.f.emptyWithName("cheetahAssistant")},J.createElement(te.F.Fragment,null,t.pipe(A.U((t=>J.createElement(te.F.div,{key:"ideation-assistant-container",className:be.fixedContainer,mount:e=>{(0,i.zG)(u.fromNullable(e),D.bw((e=>{n({kind:"mount",element:e})}))),r(e)}},J.createElement(te.F.header,Object.assign({},(0,ne.Sh)(be.toolbar,t.contentOverflowUnderToolbar?be.toolbarOverflow:null)),e.toolbar,J.createElement(ve.zx.Tertiary,{onClick:n({kind:$.ix.Kind.close}),compact:!0,size:"large",name:"toolbarClose","aria-label":"Close Assistant"},J.createElement(ke.JO.Close,null))),J.createElement(te.F.main,{className:be.content},e.content))))))))}));var Ue=n(13578);const Be="brick",ze=o.Es.buttonOverrideSpecificity({padding:`0 ${ae.ux.rem(ue.x)} 0 ${ae.ux.rem(ue.F2)}`},Be),Te={display:"flex",alignItems:"center",gap:ae.ux.rem(ue.x)},Ge=o.Es.buttonOverrideSpecificity({minHeight:ae.ux.rem(1.75),fontSize:ae.ux.rem(.75),lineHeight:ae.ux.rem(1.125),color:le.BlueGray80},Be),Fe=o.Es.buttonOverrideSpecificity({minHeight:ae.ux.rem(2),fontSize:ae.ux.rem(.875),lineHeight:ae.ux.rem(1.375),color:Ue.XY.Content.Primary.Default},Be),je=o.Es.buttonOverrideSpecificity({boxShadow:`inset 0 0 0 ${ae.ux.rem(.125)} ${o.BO.BrandGreen60}`},Be),Ne={textAlign:"left",whiteSpace:"initial",lineHeight:ae.ux.rem(1.125),margin:`${ae.ux.rem(.25)} 0 ${ae.ux.rem(.25)} 0`},Ve=Object.assign({},o.Es.iconSizeRems(1.5)),De={brick:ae.ux.joinClasses([Be,ae.ux.style(ze)]),content:ae.ux.style(Te),compact:ae.ux.style(Ge),standard:ae.ux.style(Fe),goAction:ae.ux.style(je),label:ae.ux.style(Ne),ideasIcon:ae.ux.style(Ve),goIcon:ae.ux.style(Ve)};var Me=n(97547);const $e=(0,ne.xb)(ve.zx.Secondary),Le=ee.UI.Node.make((({view:e,notify:t})=>J.createElement($e,Object.assign({onClick:e("action").pipe(A.U((e=>t({kind:$.ix.Kind.clickActionBrick,action:e})))),name:"actionBrick"},(0,ne.Sh)(De.brick,e("action").pipe(A.U((({kind:e})=>"go"===e?De.goAction:null))),e("mode").pipe(A.U((e=>"compact"===e?De.compact:"standard"===e?De.standard:(0,M.L0)(e)))))),J.createElement(te.F.div,{className:De.content},e("icon").pipe(A.U(V.g_((({kind:e})=>{switch(e){case"allResults":return J.createElement(ve.k8,{className:De.ideasIcon});case"go":return J.createElement(ve.CT,{className:De.goIcon});default:(0,M.L0)(e)}}),(({url:e})=>J.createElement("img",{src:e,style:{width:20,height:20}}))))),J.createElement(te.F.span,Object.assign({className:De.label},(0,Me.E)(e("label"))))))));function He(e,t,n){return ee.Z.fromSideEffect((t=>e.notify(t)),z.aj([t,e.state.view("textBox")]).pipe(A.U((([e,t])=>({icon:"backendAction"===e.kind?V.F2({url:e.action.iconUrl}):V.t$({kind:e.kind}),label:"backendAction"===e.kind?e.action.label:"allResults"===e.kind?"More":"go"===e.kind?`”${t.trim()}”`:(0,M.L0)(e),action:e,mode:n})))))}const Ke=ee.UI.List.make(C.bw,Le);function Ze(e,t,n){return ee.Z.composeList(C.Ot,(()=>t.pipe(A.U(u.getOrElse((()=>[]))))),(t=>He(e,G.of(t),n)))}function We(e=3,t=(t=>t.length>e)){return n=>t(n)?C.R3({kind:"allResults"})(C.ke(e)(n)):n}const qe={background:"white",display:"flex",flexDirection:"column",gap:ae.ux.rem(ue.x)},Ye={color:Ue.XY.Content.Secondary.Default,fontWeight:400,fontSize:ae.ux.rem(.75),lineHeight:ae.ux.rem(1.125),overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},Xe={display:"flex",flexDirection:"row",flexWrap:"wrap",gap:ae.ux.rem(ue.x)},Qe=ae.ux.prefixedStylesheet("action_group",{container:[qe],header:[Ye],content:[Xe]}),Je=({className:e,children:t,header:n})=>J.createElement("div",Object.assign({},(0,ne.Sh)(Qe.container,e)),n?J.createElement("div",{className:Qe.header},n):null,J.createElement("div",{className:Qe.content},t)),et={background:"transparent",padding:`${ae.ux.rem(ue.x)} 0`},tt=ae.ux.prefixedStylesheet("action_groups",{group:[et]}),nt=ee.UI.Grid.make((({slots:e,view:t})=>J.createElement(Je,{header:J.createElement(te.F.Fragment,null,t("group")),className:tt.group},e.actions))),it=ee.UI.Knot.make(nt,{actions:Ke}),ot=ee.UI.List.make(C.bw,it);function rt(e,t){return ee.Z.composeList(C.Ot,(()=>t),(t=>function(e,t){return ee.Z.composeKnot({root:()=>G.of({group:t.group}),actions:Ze(e,G.of(u.some(t.actions)),"standard")})}(e,t)))}const st={display:"flex",flexDirection:"column",gap:ae.ux.rem(ue.x)},at={position:"relative",backgroundColor:le.White,padding:`${ae.ux.rem(ue.F2)} ${ae.ux.rem(ue.qp)}`,border:`0.5px solid ${le.BlueGray10}`,borderRadius:ae.ux.rem(ce.xB+ce.fe)},lt={position:"absolute",top:ae.ux.rem(ue.qp),right:ae.ux.rem(ue.qp)},ct=ae.ux.stylesheet({wrapper:[st],actionsContainer:[at],reportMenu:[lt]}),ut={display:"flex",flexDirection:"column",padding:ae.ux.rem(ue.qp),border:`0.5px solid ${le.BlueGray10}`,borderRadius:ae.ux.rem(ce.xB+ce.fe),gap:ae.ux.rem(ue.yC)},dt={color:Ue.XY.Content.Secondary.Default,fontWeight:400,fontSize:ae.ux.rem(.75),lineHeight:ae.ux.rem(1.125)},mt={color:Ue.XY.Content.Primary.Default,fontStyle:"normal",fontWeight:400,fontSize:ae.ux.rem(.75),lineHeight:ae.ux.rem(1.125),fontFeatureSettings:"'ss01' on",$nest:{"& person":{color:le.Blue60,fontWeight:700,$nest:{"&::before":{content:"''",display:"inline-block",width:ae.ux.rem(1),height:ae.ux.rem(1),backgroundSize:"cover",verticalAlign:"text-bottom",backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundImage:`url('data:image/svg+xml;utf8,${encodeURIComponent(`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.95768 3.00512C8.95983 3.00512 9.7855 3.83575 9.7855 4.8769V6.01259C9.7855 7.05374 8.95983 7.88437 7.95768 7.88437C6.95553 7.88437 6.12986 7.05374 6.12986 6.01259V4.8769C6.12986 3.83575 6.95553 3.00512 7.95768 3.00512ZM10.5847 4.8769C10.5847 3.40916 9.41586 2.20593 7.95768 2.20593C6.4995 2.20593 5.33067 3.40916 5.33067 4.8769V6.01259C5.33067 7.48032 6.4995 8.68355 7.95768 8.68355C8.20909 8.68355 8.45189 8.64779 8.68159 8.58107C8.68635 8.65317 8.69342 8.72016 8.70392 8.78578C8.81061 9.45248 9.17662 10.0499 9.72211 10.4478C9.88673 10.5679 10.0776 10.6652 10.3757 10.8171L11.2702 11.2732C11.6108 11.4469 11.7408 11.5145 11.8477 11.5924C12.2227 11.866 12.4743 12.2767 12.5477 12.7351C12.5589 12.8055 12.5645 12.8807 12.5672 12.995H9.90666C9.68597 12.995 9.50707 13.1739 9.50707 13.3946C9.50707 13.6152 9.68597 13.7941 9.90666 13.7941H12.9694C13.19 13.7941 13.3689 13.6152 13.3689 13.3946L13.369 13.3588C13.369 13.0242 13.369 12.81 13.3368 12.6088C13.2301 11.9421 12.8641 11.3446 12.3186 10.9468C12.154 10.8267 11.9632 10.7294 11.665 10.5775C11.6546 10.5721 11.644 10.5667 11.6332 10.5612L10.7705 10.1214C10.43 9.94773 10.2999 9.88006 10.1931 9.80215C9.81805 9.52861 9.56642 9.11785 9.49307 8.65949C9.4762 8.55408 9.47217 8.43819 9.47124 8.19619C10.1462 7.71137 10.5847 6.9116 10.5847 6.01259V4.8769Z" fill="${le.Blue60}"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7.91127 3.00512C6.90913 3.00512 6.08346 3.83575 6.08346 4.8769V6.01259C6.08346 7.05374 6.90913 7.88437 7.91127 7.88437C8.91342 7.88437 9.73909 7.05374 9.73909 6.01259V4.8769C9.73909 3.83575 8.91342 3.00512 7.91127 3.00512ZM5.28427 4.8769C5.28427 3.40916 6.45309 2.20593 7.91127 2.20593C9.36946 2.20593 10.5383 3.40916 10.5383 4.8769V6.01259C10.5383 7.48032 9.36946 8.68355 7.91127 8.68355C7.65987 8.68355 7.41706 8.64779 7.18737 8.58107C7.1826 8.65317 7.17553 8.72016 7.16503 8.78578C7.05834 9.45248 6.69233 10.0499 6.14684 10.4478C5.98222 10.5679 5.7914 10.6652 5.49326 10.8171L4.59875 11.2732C4.25818 11.4469 4.12811 11.5145 4.02129 11.5924C3.64626 11.866 3.39463 12.2767 3.32128 12.7351C3.31001 12.8055 3.30447 12.8807 3.30176 12.995H10.2779C10.4986 12.995 10.6775 13.1739 10.6775 13.3946C10.6775 13.6152 10.4986 13.7941 10.2779 13.7941H2.8996C2.67891 13.7941 2.50001 13.6152 2.50001 13.3946L2.5 13.3588C2.49996 13.0242 2.49994 12.81 2.53214 12.6088C2.63883 11.9421 3.00484 11.3446 3.55033 10.9468C3.71494 10.8267 3.90577 10.7294 4.2039 10.5775C4.21438 10.5721 4.22499 10.5667 4.23574 10.5612L5.09841 10.1214C5.43899 9.94773 5.56906 9.88006 5.67588 9.80215C6.0509 9.52861 6.30254 9.11785 6.37589 8.65949C6.39276 8.55408 6.39678 8.43819 6.39771 8.19619C5.72278 7.71137 5.28427 6.9116 5.28427 6.01259V4.8769Z" fill="${le.Blue60}"/></svg>`)}')`}}}}},pt={container:ae.ux.style(ut),header:ae.ux.style(dt),text:ae.ux.style(mt)},ht=ee.UI.Node.make((({view:e})=>J.createElement("div",{className:pt.container},J.createElement(te.F.div,{className:pt.header},e("header")),J.createElement(te.F.div,Object.assign({className:pt.text},(0,Me.E)(e("text"),[...Me.ap,"person"])))))),gt=ee.UI.Union.asOption(ht),ft="setVoiceBtn",xt={padding:ae.ux.rem(ue.qp),border:`0.5px solid ${le.BlueGray10}`,borderRadius:ae.ux.rem(ce.xB+ce.fe),backgroundColor:"#D8F2EC",backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"right",backgroundImage:"url('https://d201kpdrh73vuz.cloudfront.net/text-generation/voice-banner.png')"},bt={fontWeight:700,fontSize:ae.ux.rem(.875),lineHeight:ae.ux.rem(1.375),color:Ue.XY.Content.Primary.Default},vt={fontWeight:400,fontSize:ae.ux.rem(.75),lineHeight:ae.ux.rem(1.125),color:Ue.XY.Content.Secondary.Default},yt=o.Es.buttonOverrideSpecificity({marginTop:ae.ux.rem(ue.x),padding:`0 ${ae.ux.rem(ue.x)} 0 ${ae.ux.rem(ue.F2)}`,lineHeight:ae.ux.rem(1.125),gap:ae.ux.rem(ue.F2),$nest:{"& > i":Object.assign({marginLeft:0},o.Es.iconSizeRems(1.5))}},ft),Ct={container:ae.ux.style(xt),header:ae.ux.style(bt),description:ae.ux.style(vt),setVoiceBtn:ae.ux.joinClasses([ft,ae.ux.style(yt)]),voiceIcon:ae.ux.style({stroke:"white"})},kt=ee.UI.Node.make((({notify:e})=>J.createElement("div",{className:Ct.container},J.createElement("div",{className:Ct.header},"Set your voice"),J.createElement("div",{className:Ct.description},"Choose how you want your generated text to sound."),J.createElement(ve.zx.Primary,{className:Ct.setVoiceBtn,onClick:e({kind:$.ix.Kind.openVoiceProfile,source:"banner"}),name:"bannerVoiceProfile",size:"small"},J.createElement(ve.uA,{className:Ct.voiceIcon}),"Set voice")))),wt=ee.UI.Union.asOption(kt);function St(e){return ee.Z.fromSideEffect((t=>e.notify(t)),null)}var _t=n(80544),Et=n(79692),Ot=n(9223),It=n(93002),At=n(18599),Rt=n(74911),Pt=n(55935),Ut=n(13444),Bt=n(93497);const zt="reportMenuBtnIcon",Tt=o.Es.buttonOverrideSpecificity(o.Es.iconSizeRems(1.5),zt),Gt=J.memo((function({className:e,reportMenuButtonClassName:t,onClickReportOffensive:n,onClickProvideFeedback:o,onVisibilityChange:r}){const{ref:s,onMount:a}=ye.P.useElWatcher(),c=J.useMemo((()=>m.h.create(!1)),[]),[d,p]=J.useState("Provide feedback"),h=J.useMemo((()=>c.pipe(Pt.T(1),T.w((e=>e?G.of(!1):G.of(!1).pipe(Ut.g(250),F.O(!0)))),Bt.n((e=>!e)),X.x(),l.b((e=>{var t;e?(null===(t=u.toNullable(s.get()))||void 0===t||t.focus(),p("")):p("Provide feedback")})))),[c]);return ye.P.useSubscriptionTo(h),J.createElement(se.Consumer,null,(({portalContainer:s})=>J.createElement(te.F.Fragment,null,s.view(u.fold(i.gn,(i=>J.createElement("div",{className:e},J.createElement(It.v.Dropdown,{"aria-label":d,name:"reportMenu",label:J.createElement("div",{ref:a},J.createElement(At.Gv,{className:ae.ux.joinClasses([zt,ae.ux.style(Tt)])})),placement:"bottom end",appearanceBehavior:"mouseClick",theme:{button:ae.ux.joinClasses([t,(0,Rt.P)({type:"tertiary",compact:!0,size:"small"})])},onAction:e=>{switch(e){case"provideFeedback":return o();case"reportOffensive":return n()}},onOpenChange:e=>{null==r||r(e),c.set(e)},portalContainer:i},J.createElement(It.v.Item,{key:"provideFeedback",textValue:"provideFeedback"},J.createElement(ke.JO.AssistantFeedback,null),"Share your thoughts"),J.createElement(It.v.Item,{key:"reportOffensive",textValue:"reportOffensive"},J.createElement(ke.JO.Report,null),"Report as offensive")))))))))})),Ft=J.createContext({notifyUnmount:i.Q1}),jt=ee.UI.Knot.make(ee.UI.Grid.make((({slots:e,notify:t,state:n})=>{const{ref:i,onMount:o}=ye.P.useElWatcher(),{notifyUnmount:r}=J.useContext(Ft),s=J.useMemo((()=>i.pipe(_t.QV(Et.E),U.oA,l.b((e=>t({kind:$.ix.Kind.mount,name:$.ec.initialActionsList,element:e})())),Ot.x((()=>r({kind:$.ix.Kind.unmount,name:$.ec.initialActionsList}))))),[i]);return ye.P.useSubscriptionTo(s),J.createElement("div",{className:ct.actionsContainer,ref:o},J.createElement(te.F.Fragment,null,n.pipe(A.U((({isQuickReply:e})=>e?J.createElement(Gt,{className:ct.reportMenu,onClickProvideFeedback:t({kind:$.ix.Kind.openFeedbackForm,source:$.x2.Source.quickReplyInitialActions}),onClickReportOffensive:t({kind:$.ix.Kind.reportOffensiveActions}),onVisibilityChange:e=>t({kind:$.ix.Kind.reportMenuVisibilityChange,trigger:f.uiItem($.ec.initialActionsList),visible:e})()}):null))),e.actions))})),{actions:ot}),Nt=ee.UI.Union.asOption(jt),Vt=ee.UI.Grid.make((({slots:e})=>J.createElement("div",{className:ct.wrapper},e.voiceBanner,e.intent,e.initialActions))),Dt=ee.UI.Knot.make(Vt,{voiceBanner:wt,intent:gt,initialActions:Nt}),Mt=ee.UI.Union.asOption(Dt);var $t=n(45626);function Lt(e){const t=e.state.view("session").view((0,i.ls)($t.z.toStarted,u.filter((e=>$t.z.Mode.isQuickReply(e.mode))),u.map(d.ei("context")),u.chain((e=>e.intent))));return ee.Z.composeOption(function(e){return()=>e.pipe(U.oA)}(t),(()=>t))}function Ht(e){const t=e.state.view("session").view((0,i.ls)($t.z.toStarted,u.chain((e=>e.selectedText)))),n=e.state.view("session").view((0,i.ls)($t.z.toStarted,u.fold(i.jv,(e=>e.voiceProfile.needsSetup)))),o=e.state.view("session").view((0,i.ls)($t.z.toStarted,u.fold(i.jv,(e=>$t.z.Mode.isQuickReply(e.mode))))),r=m.h.combine(e.state.view("contextualActions"),t,o,((e,t,n)=>(0,i.zG)(e,u.map(k.UI(g.BackendAction.make)),u.map((e=>k.of({group:n?"Ways to reply":u.isSome(t)?`Your text: "${t.value}"`:"Ideas for you",actions:n?e:We()(e)}))))));return ee.Z.composeOption(function(e,t,n,i){return ee.Z.composeKnot({initialActions:Kt(e,t,i),voiceBanner:ee.Z.composeOption(St(e),(()=>n.view((e=>e?u.some(null):u.none)))),intent:Lt(e)})}(e,r,n,o),(()=>m.h.combine(r,n,((e,t)=>u.isSome(e)||t?u.some(null):u.none))))}function Kt(e,t,n){return ee.Z.composeOption(ee.Z.composeKnot({root:ee.Z.fromSideEffect((t=>e.notify(t)),n.view((e=>({isQuickReply:e})))),actions:rt(e,t.pipe(U.oA))}),(()=>t))}const Zt={border:`0.5px solid ${le.BlueGray10}`,borderRadius:ae.ux.rem(ce.xB+ce.fe),padding:ae.ux.rem(ue.qp),background:"white",display:"flex",alignItems:"center",flexDirection:"row",gap:ae.ux.rem(ue.x),color:Ue.XY.Content.Secondary.Default,fontSize:ae.ux.rem(.75),lineHeight:ae.ux.rem(1.125)},Wt=ae.ux.keyframes({from:{transform:"rotate(0deg)"},to:{transform:"rotate(360deg)"}}),qt=Object.assign({animation:`${Wt} 1s linear infinite`},o.Es.iconSizeRems(1)),Yt=ae.ux.prefixedStylesheet("loading",{container:[Zt],icon:[qt]}),Xt=ee.UI.Node.make((({view:e})=>J.createElement(te.F.div,{className:Yt.container},J.createElement(ve.Ho,{className:Yt.icon}),e("loadingMessage"))));function Qt(e){return()=>e.state.view("session").view($.z_.toStarted).view((0,i.ls)(u.map((e=>e.context)),u.filter($._y.isPending),u.fold((()=>({loadingMessage:"Working on it..."})),(e=>({loadingMessage:e.loadingMessage})))))}var Jt=n(99223);const en="primaryBtn",tn="rephraseBtn",nn="dismissBtn",on="reportBtn",rn="editHeaderBtn",sn="headerBtn",an="ignoreIcon",ln=o.Es.buttonOverrideSpecificity(o.Es.iconSizeRems(1.5),an),cn={dismissButton:nn,reportButton:on,insertButton:en,rephraseButton:tn,editHeaderButton:rn,ignoreIcon:ae.ux.joinClasses([an,ae.ux.style(ln)])},un={background:"white",$nest:{[`& .${nn}, & .${on}`]:{opacity:1,pointerEvents:"auto"},[`& ${o.Es.repeatClassSelector(en,Jt.cheetahButtonContentOverrideSpecificity)}`]:{color:"white",backgroundColor:o.BO.BrandGreen60,border:"1px solid transparent"}}},dn={display:"flex",flexDirection:"column",padding:ae.ux.rem(ue.qp),gap:ae.ux.rem(ue.x),background:"transparent",border:`0.5px solid ${le.BlueGray10}`,borderRadius:ae.ux.rem(ce.xB+ce.fe),$nest:{"&:not(:last-of-type)":{borderBottom:`0.5px solid ${le.BlueGray10}`},[`& ${o.Es.repeatClassSelector(en,Jt.cheetahButtonContentOverrideSpecificity)}`]:{lineHeight:ae.ux.rem(1.125),backgroundColor:"white",color:Ue.XY.Content.Secondary.Default,border:`1px solid ${le.BlueGray5}`,boxSizing:"border-box"},[`& ${o.Es.repeatClassSelector(tn,Jt.cheetahButtonContentOverrideSpecificity)}`]:{lineHeight:ae.ux.rem(1.5)},[`& .${nn}, & .${on}`]:{opacity:0,pointerEvents:"none",justifyContent:"center"},"&:focus, &:hover":Object.assign({},un),"&[data-active='true']":Object.assign({},un)}},mn={gap:ae.ux.rem(ue.x),display:"flex",alignItems:"center",justifyContent:"space-between"},pn={display:"flex",alignItems:"center",gap:ae.ux.rem(ue.x)},hn=pn,gn={container:ae.ux.style(dn),footer:ae.ux.style(mn),footerLeft:ae.ux.style(pn),footerRight:ae.ux.style(hn)},fn=o.Es.buttonOverrideSpecificity({height:ae.ux.rem(1.5),lineHeight:ae.ux.rem(1.125),padding:`0 ${ae.ux.rem(ue.F2)}`,margin:`0 ${ae.ux.rem(-ue.F2)}`,$nest:{[`& .${rn}`]:{opacity:0,pointerEvents:"none"},"&:focus, &:hover":{background:le.BlueGray0,[`& .${rn}`]:{opacity:1,pointerEvents:"auto",color:Ue.XY.Content.Primary.Default}}}},sn),xn={display:"flex",alignItems:"center",gap:ae.ux.rem(ue.x+ue.yC),height:ae.ux.rem(1.5),fontWeight:400,fontSize:ae.ux.rem(.75),lineHeight:ae.ux.rem(1.125),color:le.BlueGray60},bn={display:"flex",justifyContent:"space-between",width:"100%",gap:ae.ux.rem(ue.F2)},vn=ae.ux.keyframes({from:{transform:"rotate(0deg)"},to:{transform:"rotate(360deg)"}}),yn={marginBottom:`-${ae.ux.rem(ue.yC)}`,display:"inline-flex",alignItems:"center",justifyContent:"center",animation:`${vn} 1s linear infinite`,width:ae.ux.rem(1),height:ae.ux.rem(1),minWidth:ae.ux.rem(1),minHeight:ae.ux.rem(1)},Cn={header:ae.ux.style(xn),headerButton:ae.ux.joinClasses([sn,ae.ux.style(fn)]),headerWrapper:ae.ux.style(bn),loadingIcon:ae.ux.style(yn),label:ae.ux.style({overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",textAlign:"left"})},kn=({isActive:e,id:t,children:n,onHovered:i,onFocused:o})=>{const r=J.useRef(null),s=J.useCallback((()=>{var e,t;return null===(t=(null===(e=document.activeElement)||void 0===e?void 0:e.shadowRoot)||document)||void 0===t?void 0:t.activeElement}),[]);return J.createElement("div",{ref:r,className:gn.container,"data-active":e,"data-id":t,onMouseEnter:()=>null==i?void 0:i(!0),onMouseLeave:()=>null==i?void 0:i(!1),onFocus:()=>{var e;return null==o?void 0:o((null===(e=r.current)||void 0===e?void 0:e.contains(s()))||!1)},onBlur:()=>{var e;return null==o?void 0:o((null===(e=r.current)||void 0===e?void 0:e.contains(s()))||!1)}},n)},wn=({header:e,footer:t,isActive:n,resultId:i,onHovered:o,onFocused:r,body:s})=>J.createElement(kn,{id:i,isActive:n,onHovered:o,onFocused:r},e,s,t),Sn=({onInsert:e,onRephrase:t,onDismiss:n,onProvideFeedback:i,onReportOffensive:o,onReportMenuVisibilityChange:r,disabled:s})=>J.createElement("div",{className:gn.footer},J.createElement("div",{className:gn.footerLeft},J.createElement(ve.zx.Primary,{className:cn.insertButton,name:"insertResult",onClick:e,size:"small"},"Insert"),J.createElement(ve.zx.Tertiary,{className:cn.rephraseButton,name:"rephraseResult",onClick:t,disabled:s,size:"small"},"Rephrase")),J.createElement("div",{className:gn.footerRight},J.createElement(ve.zx.Tertiary,{onClick:n,className:cn.dismissButton,compact:!0,size:"small",name:"dismissResult",title:"Delete"},J.createElement(ve.L3,{className:cn.ignoreIcon})),J.createElement(Gt,{reportMenuButtonClassName:cn.reportButton,onClickProvideFeedback:i,onClickReportOffensive:o,onVisibilityChange:r}))),_n=({header:e,onClick:t,disabled:n})=>J.createElement(ve.zx.Tertiary,{compact:!0,disabled:n,onClick:t,className:Cn.headerButton,name:"editResultPrompt",size:"small"},J.createElement("div",{className:Cn.headerWrapper},J.createElement("div",Object.assign({className:Cn.label},(0,Me.E)(e))),J.createElement("div",{className:cn.editHeaderButton},"Edit"))),En=({iconUrl:e,loading:t,header:n})=>J.createElement("div",{className:Cn.header},t?J.createElement(ve.Ho,{className:Cn.loadingIcon}):(0,i.zG)(e,u.fold(i.gn,(e=>J.createElement("img",{src:e,style:{width:ae.ux.rem(1.25),height:ae.ux.rem(1.25)}})))),J.createElement("span",Object.assign({className:Cn.label},(0,Me.E)(n))));var On=n(36991),In=n(65223);const An={whiteSpace:"break-spaces",overflowWrap:"anywhere",fontStyle:"normal",fontWeight:"normal",fontSize:ae.ux.rem(.875),fontFeatureSettings:"'ss03' on",lineHeight:ae.ux.rem(1.3125),color:Ue.XY.Content.Primary.Default},Rn={backgroundColor:le.Green0,borderRadius:ae.ux.rem(ce.fe)},Pn={backgroundColor:le.Blue0,borderRadius:ae.ux.rem(ce.fe)},Un={result:ae.ux.style(An),insertPart:ae.ux.style(Rn),knowledgeHubPart:ae.ux.style(Pn)};var Bn;!function(e){e.generatedText="generatedText",e.knowledgeHubTerm="knowledgeHubTerm",e.none="none"}(Bn||(Bn={}));const zn=({delta:e})=>J.createElement("div",{className:Un.result},e.map(((e,t)=>{if(!On.s.isInsert(e))return null;switch(Gn(e.attributes)){case Bn.generatedText:return J.createElement(Fn,{key:t},e.insert);case Bn.knowledgeHubTerm:return J.createElement(jn,{key:t},e.insert);default:return J.createElement(Nn,{key:t},e.insert)}})));var Tn;!function(e){e.generatedText="generatedText",e.knowledgeHubTerm="knowledgeHubTerm"}(Tn||(Tn={}));const Gn=e=>{switch(!0){case null==e?void 0:e[Tn.knowledgeHubTerm]:return Bn.knowledgeHubTerm;case null==e?void 0:e[Tn.generatedText]:return Bn.generatedText;default:return Bn.none}},Fn=({children:e})=>J.createElement("span",{className:Un.insertPart},e),jn=({children:e})=>J.createElement(In.u,{title:"from knowledge share"},J.createElement("span",{className:Un.knowledgeHubPart},e)),Nn=({children:e})=>J.createElement("span",null,e),Vn=({text:e})=>""!==e.trim()?J.createElement("div",{className:Un.result},e):null,Dn=ee.UI.Node.make((({state:e})=>J.createElement(te.F.Fragment,null,e.pipe(A.U((({result:e})=>J.createElement(wn,{resultId:"in-progress",body:J.createElement(Vn,{text:e.text}),header:J.createElement(En,{header:"Working on it...",iconUrl:u.none,loading:!0}),isActive:!0}))))))),Mn=ee.UI.Union.asOption(Dn);function $n(e){const t=e.state.view("session").view($.z_.toStarted).view((0,i.ls)(u.chain(d.ei("inProgressResult")),u.map((e=>({result:e})))));return ee.Z.composeOption((()=>t.pipe(U.oA)),(()=>t))}const Ln=ee.UI.Grid.make((({slots:e,state:t,notify:n})=>J.createElement(te.F.Fragment,null,t.pipe(A.U((({result:t,disabled:i,isActive:o})=>J.createElement(wn,{resultId:t.id,body:J.createElement(zn,{delta:t.delta}),header:e.header,footer:J.createElement(Sn,{onRephrase:n({kind:$.ix.Kind.rephrase,result:t}),onInsert:n({kind:$.ix.Kind.insert,result:t}),onDismiss:n({kind:$.ix.Kind.dismissResult,result:t}),onProvideFeedback:n({kind:$.ix.Kind.openFeedbackForm,source:$.x2.Source.resultCard}),onReportOffensive:n({kind:$.ix.Kind.reportOffensiveResult,result:t}),onReportMenuVisibilityChange:e=>n({kind:$.ix.Kind.reportMenuVisibilityChange,trigger:f.card(t.id),visible:e})(),disabled:i}),isActive:o,onHovered:e=>n({kind:$.ix.Kind.cardHover,hovered:e,resultId:t.id})(),onFocused:e=>n({kind:$.ix.Kind.cardFocus,focused:e,resultId:t.id})()})))))));var Hn;!function(e){e.searchLabel="searchLabel",e.clickableSearchLabel="clickableSearchLabel",e.knowledgeHub="knowledgeHub"}(Hn||(Hn={}));const Kn=ee.UI.Node.make((({notify:e,state:t})=>J.createElement(te.F.Fragment,null,t.pipe(A.U((t=>{switch(t.kind){case Hn.clickableSearchLabel:return J.createElement(_n,{header:t.label,disabled:t.disabled,onClick:e({kind:$.ix.Kind.clickResultHeader,prompt:t.copiablePrompt})});case Hn.searchLabel:return J.createElement(En,{header:t.label,iconUrl:t.iconUrl,loading:!1});case Hn.knowledgeHub:return J.createElement(En,{header:"Knowledge share content was used.",iconUrl:u.none,loading:!1});default:return(0,M.L0)(t)}}))))));var Zn=n(17343);function Wn(e,t,n){return ee.Z.composeKnot({root:ee.Z.fromSideEffect((t=>e.notify(t)),e.state.view((({availability:e,activeCards:o,session:r})=>({disabled:$.a8.isUnavailable(e),result:t,isActive:(0,i.zG)(!!o.has(t.id)||0===o.size&&n&&!qn($.z_.toStarted(r)))})))),header:ee.Z.fromSideEffect((t=>e.notify(t)),e.state.pipe(T.w((e=>{const n=(0,i.zG)(t.header.copiablePrompt,u.fold((()=>({kind:Hn.searchLabel,label:t.header.label,iconUrl:t.header.iconUrl})),(n=>({kind:Hn.clickableSearchLabel,label:t.header.label,disabled:$.a8.isUnavailable(e.availability),copiablePrompt:n}))));return function(e){return e.delta.ops.some((e=>{var t;return On.s.isInsert(e)&&!!(null===(t=e.attributes)||void 0===t?void 0:t[Tn.knowledgeHubTerm])}))}(t)&&t.timestamp+3e3>Date.now()?Y.H(t.timestamp+3e3-Date.now()).pipe(Zn.h(n),F.O({kind:Hn.knowledgeHub})):G.of(n)}))))})}function qn(e){return(0,i.zG)(e,u.fold(i.jv,(e=>u.isSome(e.inProgressResult)||u.isSome(e.error))))}const Yn=ee.UI.Knot.make(Ln,{header:Kn}),Xn=ee.UI.List.make(C.bw,Yn);const Qn={display:"flex",flexDirection:"column",gap:ae.ux.rem(ue.x)},Jn={display:"flex",flexDirection:"column",gap:ae.ux.rem(ue.x)},ei={display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"flex-end",flexDirection:"row",width:"100%",gap:ae.ux.rem(ue.x),marginBottom:ae.ux.rem(ue.x)},ti=ae.ux.prefixedStylesheet("results",{container:[Qn],history:[Jn],actions:[ei]}),ni={display:"flex",alignItems:"center",gap:ae.ux.rem(ue.F2)},ii={fontSize:ae.ux.rem(.875),lineHeight:ae.ux.rem(1.375),fontWeight:700,color:Ue.XY.Content.Primary.Default},oi={fontSize:ae.ux.rem(.75),lineHeight:ae.ux.rem(1.125),color:Ue.XY.Content.Secondary.Default,whiteSpace:"break-spaces",overflowWrap:"anywhere"},ri=Object.assign({padding:ae.ux.rem(ue.yC)},o.Es.iconSizeRems(1.125)),si={header:ae.ux.style(ni),title:ae.ux.style(ii),body:ae.ux.style(oi),gotItBtn:en,warningIcon:ae.ux.style(ri)},ai=ee.UI.Node.make((({view:e,notify:t})=>J.createElement(kn,{id:"error",isActive:!1},J.createElement(te.F.div,{className:si.header},e("error").pipe(A.U((e=>J.createElement(J.Fragment,null,J.createElement(ve.T6,{className:si.warningIcon}),J.createElement("span",{className:si.title},e.header)))))),J.createElement(te.F.div,{className:si.body},e("error").pipe(A.U((e=>e.text)))),J.createElement(te.F.div,null,e("showGotItButton").pipe(A.U((e=>e?J.createElement(ve.zx.Primary,{className:si.gotItBtn,name:"gotItButton",onClick:t({kind:$.ix.Kind.dismissError}),size:"small"},"OK"):null))))))),li=ee.UI.Union.asOption(ai);function ci(e){const t=e.state.view("session").pipe(A.U((e=>e.error)));return ee.Z.composeOption(function(e,t){const n=e.state.view("activeView").view((e=>"loadingError"!==e));return ee.Z.fromSideEffect((t=>e.notify(t)),t.pipe(I.M(n),A.U((([e,t])=>({error:e,showGotItButton:t})))))}(e,t.pipe(U.oA)),(()=>t))}var ui=n(60135);const di=ee.UI.Grid.make((({slots:e,view:t})=>{const{ref:n,onMount:i}=ye.P.useElWatcher(),o=J.useMemo((()=>z.aj([n.pipe(U.oA),t("scrollToken").pipe(X.x())]).pipe(A.U(ui.li),l.b((e=>e.scrollIntoView({behavior:"auto",block:"end"}))))),[n]);return ye.P.useSubscriptionTo(o),J.createElement("div",{className:ti.container,ref:i},e.intent,e.history,e.belowHistory)})),mi=ee.UI.Knot.make(ee.UI.Grid.make((({slots:e,notify:t})=>{const{ref:n,onMount:i}=ye.P.useElWatcher(),{notifyUnmount:o}=J.useContext(Ft),r=J.useMemo((()=>n.pipe(_t.QV(Et.E),U.oA,l.b((e=>t({kind:$.ix.Kind.mount,name:$.ec.followUpActionsList,element:e})())),Ot.x((()=>o({kind:$.ix.Kind.unmount,name:$.ec.followUpActionsList}))))),[n]);return ye.P.useSubscriptionTo(r),J.createElement("div",{className:ti.actions,ref:i},e.actions)})),{actions:Ke}),pi=ee.UI.Union.asOption(mi),hi=ee.UI.Union.asOption(ee.UI.Composite.make(ee.UI.Grid.make((({slots:e})=>J.createElement("div",{className:ti.history},e.history))),Xn)),gi=ee.UI.Union.make("kind",{inProgressResult:Mn,error:li,followUpActions:pi}),fi=ee.UI.Union.asOption(gi),xi=ee.UI.Knot.make(di,{intent:gt,history:hi,belowHistory:fi});function bi(e,t){return ee.Z.composeOption(function(e,t){return ee.Z.composeList(C.Ot,(()=>t.pipe(A.U((0,i.ls)(C.ke(50),C.Su(((e,t)=>({result:t,isLast:0===e}))),C.GY)))),(({result:t,isLast:n})=>Wn(e,t,n)))}(e,t.view(u.getOrElse((()=>[])))),(()=>t))}function vi(e){const t=e.state.view("session").view($.z_.toStarted).pipe(A.U(u.map((e=>u.isSome(e.error)?"error":u.isSome(e.inProgressResult)?"inProgressResult":"followUpActions"))));return ee.Z.composeOption(function(e,t){return ee.Z.composeUnion({inProgressResult:$n(e),followUpActions:(0,i.zG)(e.state.view("contextualActions").view((t=>(0,i.zG)(t,u.filter((()=>!$.a8.isUnavailable(e.state.get().availability))),u.map((0,i.ls)(k.UI(g.BackendAction.make),We()))))),(t=>ee.Z.composeOption(ee.Z.composeKnot({root:ee.Z.fromSideEffect((t=>e.notify(t)),null),actions:Ze(e,t,"compact")}),(()=>t)))),error:ci(e)},(()=>t.pipe(U.oA,A.U((e=>({kind:e}))))))}(e,t),(()=>t))}function yi(e){const t=e.state.view("session").view((0,i.ls)($.z_.toStarted,u.map((e=>e.resultHistory)),u.chain(k.c2)));return ee.Z.composeKnot({root:()=>e.state.view("session").view((0,i.ls)($.z_.toStarted,u.chain((e=>e.inProgressResult)),u.map((e=>e.text)))).pipe(U.oA,F.O(""),A.U((e=>({scrollToken:e})))),intent:Lt(e),history:bi(e,t),belowHistory:vi(e)})}const Ci=ue.x,ki=ue.x,wi={display:"flex",flexDirection:"column",gap:ae.ux.rem(ki)},Si=ae.ux.prefixedStylesheet("chat",{container:[wi]}),_i=ee.UI.Union.make("kind",{loading:Xt,loadingError:li,initialError:li,initialActions:Mt,results:xi}),Ei=10,Oi=34.75,Ii=ee.UI.Grid.make((({slots:e,state:t,view:n,notify:o})=>{const{rect:r,onMount:s}=ye.P.useRectWatcher(),a=J.useMemo((()=>r.pipe(U.oA,l.b((e=>o({kind:"contentSizeChange",height:e.height})())))),[r]);return ye.P.useSubscriptionTo(a),J.createElement(te.F.div,{mount:s,onScroll:e=>o({kind:"contentScroll",scrollTop:e.currentTarget.scrollTop})(),style:{overflow:n("canScroll").pipe(A.U((0,j.RN)("auto","hidden"))),maxHeight:t.pipe(A.U((({assistantMaxHeight:e,promptHeight:t})=>(0,i.zG)(b.Yt(u.Apply)({assistantMaxHeight:e,promptHeight:t}),u.fold((()=>ae.ux.rem(Oi)),(({assistantMaxHeight:e,promptHeight:t})=>(0,i.zG)(function(e,t,n=.25){const i=`calc(${ae.ux.rem(Ci+ki+2.5)} + ${ae.ux.px(t)})`;return`calc(${e}px - ${i} - ${ae.ux.rem(n)})`}(e,t),(e=>`max(min(${e}, ${ae.ux.rem(Oi)}), ${ae.ux.rem(Ei)})`))))))),F.O(ae.ux.rem(Oi)))}},e.content)})),Ai=ee.UI.Knot.make(Ii,{content:_i}),Ri=ee.UI.Union.asOption(Ai);var Pi=n(61792);function Ui(e,t){return ee.Z.composeUnion({loading:Qt(e),loadingError:ci(e),initialError:ci(e),initialActions:Ht(e),results:yi(e)},(()=>t.pipe(U.oA,A.U((e=>({kind:e}))))))}function Bi(e,t,n,i){const o=e.state.pipe(A.U((({activeView:e,availability:t,session:n})=>{switch(e){case"loading":return u.some("loading");case"loadingError":return u.some("loadingError");case"beforeResults":return u.isSome(n.error)?u.some("initialError"):Pi.a.isUnavailable(t)?u.none:u.some("initialActions");case"actionSelected":case"voiceProfile":case"feedbackForm":return u.none;case"afterResults":return u.some("results");default:(0,M.L0)(e)}})));return ee.Z.composeOption(function(e,t,n,i,o){return ee.Z.composeKnot({root:ee.Z.fromSideEffect((t=>{switch(t.kind){case"contentScroll":return e.contentOverflowUnderToolbar(t.scrollTop>0);case"contentSizeChange":return n.set(u.some(t.height+8));default:(0,M.L0)(t)}}),m.h.combine(i,o,e.state.view("canScroll"),((e,t,n)=>({assistantMaxHeight:e,promptHeight:t,canScroll:n})))),content:Ui(e,t)})}(e,o,t,n,i),(()=>o))}const zi="goBtn",Ti={display:"flex",alignItems:"flex-start",padding:`${ae.ux.rem(ue.x)} ${ae.ux.rem(ue.qp)}`,gap:ae.ux.rem(ue.F2),justifyContent:"space-between"},Gi={flexGrow:1,$nest:{"&[data-hashints='false']":{paddingTop:ae.ux.rem(ue.F2+ue.W9)}}},Fi={width:ae.ux.percent(100),border:"none"},ji=o.Es.buttonOverrideSpecificity({alignSelf:"flex-end",$nest:{"&[data-disabled='true']":{opacity:1,$nest:{"& svg":{fill:le.BlueGray30}}}}},zi),Ni={container:ae.ux.style(Ti),textBoxContainer:ae.ux.style(Gi),textBoxIframe:ae.ux.style(Fi),goBtn:ae.ux.joinClasses([zi,ae.ux.style(ji)])},Vi=ee.UI.Node.make((({state:e,view:t,notify:n})=>J.createElement(te.F.div,{className:Ni.container},J.createElement(te.F.div,{className:Ni.textBoxContainer,"data-hashints":t("hasHints")},e.pipe(A.U((({placeholder:e,kind:t,text:i,autofocusToken:o,availability:r})=>J.createElement(ve.b,{text:i,className:Ni.textBoxIframe,placeholder:"ready"===t?u.toUndefined(e):void 0,fitContentHeight:!0,autofocus:o,onChange:e=>n({kind:$.ix.Kind.promptFieldChange,text:e})(),onKeyPressEnter:"ready"===t?n({kind:$.ix.Kind.promptSend,text:i}):()=>null,onKeyUpEscape:()=>{n({kind:$.ix.Kind.escapePressed})(),"waitingForResult"===t&&n({kind:$.ix.Kind.generateStop})()},onFocus:n({kind:$.ix.Kind.promptFieldFocusChange,focused:!0}),onBlur:n({kind:$.ix.Kind.promptFieldFocusChange,focused:!1}),disabled:$.a8.isUnavailable(r)}))))),e.pipe(A.U((({kind:e,text:t,availability:i})=>"waitingForResult"===e?J.createElement(ve.zx.Tertiary,{onClick:n({kind:$.ix.Kind.generateStop}),name:"generateStop",compact:!0,size:"large"},J.createElement(ve.wN,null)):"ready"===e?J.createElement(ve.zx.Tertiary,{className:Ni.goBtn,onClick:n({kind:$.ix.Kind.promptSend,text:t}),disabled:""===t.trim()||$.a8.isUnavailable(i),name:"promptSend",compact:!0,size:"large"},J.createElement(ve.kc,null)):null))))));function Di(e){return ee.Z.fromSideEffect((t=>e.notify(t)),e.state.view((e=>{return{kind:(0,i.zG)($.z_.toStarted(e.session),u.fold((()=>"loading"),(e=>(0,i.zG)(e.inProgressResult,u.fold((()=>"ready"),(()=>"waitingForResult")))))),availability:e.availability,placeholder:(t=e,(0,i.zG)(t.selectedDynamicAction,u.map((e=>(""!==e.args[0].label.trim()?[e.args[0].label]:[]).concat((0,i.zG)(e.args[0].hints,u.fold((()=>[]),(e=>(""!==e.header.trim()?[e.header]:[]).concat(...e.items.filter((e=>""!==e.trim())).map((e=>`• ${e}`))))))))),u.alt((()=>(0,i.zG)(t.userPromptAction,u.map((e=>[e.arg.label]))))))),hasHints:(0,i.zG)(e.selectedDynamicAction,u.fold(i.jv,(e=>u.isSome(e.args[0].hints)))),text:e.textBox,autofocusToken:ve.vw.create(`${e.activeView}_${(0,i.zG)($.z_.toStarted(e.session),u.chain((e=>e.inProgressResult)),u.fold((()=>"done"),(()=>"inProgress")))}_${(0,i.zG)(e.selectedDynamicAction,u.fold((()=>"no-selected-action"),(()=>"selected-action")))}_${e.promptAutofocusToken}_${(0,i.zG)(e.promptMenu,u.fold((()=>"prompt-menu-closed"),(()=>"prompt-menu-opened")))}`)};var t})))}const Mi={padding:"12px 12px 0 12px",color:Ue.XY.Content.Secondary.Default,fontWeight:400,fontSize:ae.ux.rem(.75),lineHeight:ae.ux.rem(1.125)},$i={display:"flex",alignItems:"center",gap:ae.ux.rem(ue.x)},Li=ae.ux.prefixedStylesheet("header",{container:[Mi],header:[$i]}),Hi=ee.UI.Node.make((({view:e})=>J.createElement("div",{className:Li.container},J.createElement("div",{className:Li.header},J.createElement(te.F.img,{src:e("iconUrl"),style:{width:16,height:16}}),J.createElement(te.F.span,Object.assign({},(0,Me.E)(e("label")))))))),Ki=ee.UI.Union.asOption(Hi);function Zi(e){return ee.Z.composeOption(function(e){return()=>e.state.view("selectedDynamicAction").pipe(U.oA,A.U((e=>({label:e.label,iconUrl:e.iconUrl}))))}(e),(()=>e.state.view("selectedDynamicAction")))}const Wi={padding:`${ae.ux.rem(ue.F2)} ${ae.ux.rem(ue.qp)}`},qi=ae.ux.stylesheet({container:[Wi]}),Yi=ee.UI.Union.asOption(ee.UI.Composite.make(ee.UI.Grid.make((({slots:e})=>J.createElement("div",{className:qi.container},e.content))),ot));function Xi(e,t){const n=t.pipe(A.U(u.map((e=>function(e){return(0,i.zG)(e,C.pO((e=>{const{init:t,rest:n}=C.zT((t=>t.group.label===e[0].group.label))(e);return[t,n]})),C.UI((e=>b.Yt(u.Apply)({group:(0,i.zG)(e,C.YM,u.map((e=>e.group.label))),actions:(0,i.zG)(e,C.UI(g.BackendAction.make),k.c2)}))),C.oA,k.c2,u.getOrElse((()=>[{group:e[0].group.label,actions:[g.BackendAction.make(e[0])]}])))}((0,i.zG)(e,k.DY(g.SupportedDynamicActions.ordByGroup)))))));return ee.Z.composeOption(rt(e,n.pipe(U.oA)),(()=>n))}const Qi={background:"transparent",padding:ae.ux.rem(ue.qp),display:"flex",flexDirection:"column",alignItems:"flex-start",gap:ae.ux.rem(ue.x)},Ji={display:"flex",flexDirection:"row",flexWrap:"wrap",gap:ae.ux.rem(ue.x)},eo=ae.ux.prefixedStylesheet("search_results",{container:[Qi],actions:[Ji]}),to=ee.UI.List.make(C.bw,Le),no=ee.UI.Grid.make((({slots:e})=>J.createElement("div",{className:eo.container},e.customPromptGo,J.createElement("div",{className:eo.actions},e.searchResults)))),io=ee.UI.Knot.make(no,{searchResults:to,customPromptGo:Le});function oo(e,t){return ee.Z.composeKnot({searchResults:Ze(e,t.pipe(A.U(u.map(k.UI(g.BackendAction.make)))),"standard"),customPromptGo:He(e,G.of({kind:"go"}),"standard")})}const ro={overflowY:"scroll",borderBottom:`0.5px solid ${Ue.XY.Boundaries.Secondary.Default}`},so={position:"absolute",top:ae.ux.rem(ue.x),right:ae.ux.rem(ue.x),zIndex:1,$nest:{"&:not(:hover)":{backgroundColor:ae.ux.important(le.White)}}},ao="arrowIcon",lo=o.Es.buttonOverrideSpecificity(o.Es.iconSizeRems(1.5),ao),co={container:ae.ux.style(ro),collapseBtn:ae.ux.style(so),arrowIcon:ae.ux.joinClasses([ao,ae.ux.style(lo)])},uo=ee.UI.Union.make("kind",{searchResults:io,actionsStore:Yi}),mo=ee.UI.Knot.make(ee.UI.Grid.make((({slots:e,view:t,notify:n})=>J.createElement(te.F.div,{className:co.container,style:{maxHeight:t("maxHeight")}},J.createElement(ve.zx.Tertiary,{compact:!0,className:co.collapseBtn,onClick:n({kind:$.ix.Kind.collapsePromptMenu}),name:"collapsePromptMenu",size:"small"},J.createElement(ke.JO.Arrow,{direction:ke.n4.down,className:co.arrowIcon})),e.content))),{content:uo}),po=ee.UI.Union.asOption(mo);function ho(e,t){return ee.Z.composeOption(ee.Z.composeKnot({root:ee.Z.fromSideEffect((t=>e.notify(t)),t.pipe(U.oA)),content:ee.Z.composeUnion({searchResults:oo(e,t.pipe(A.U((0,i.ls)(u.filter((({kind:e})=>"searchResults"===e)),u.map(d.ei("actions")))))),actionsStore:Xi(e,t.pipe(A.U((0,i.ls)(u.filter((({kind:e})=>"actionsStore"===e)),u.map(d.ei("actions"))))))},(()=>t.pipe(U.oA)))}),(()=>t))}const go=e=>ae.ux.color(le.BlueGray40).toRGBA().fade(e).toString(),fo={background:"white",boxShadow:`0px 0px 0px 0.5px ${le.BlueGray40}, 0px 0px 2px 0.5px ${go(.5)}, 0px 1px 6px 0.5px ${go(.25)}`,borderRadius:ae.ux.rem(ce.xB+ce.fe),$nest:{"&[data-expanded='true']":{position:"absolute",bottom:0,width:"100%"}}},xo=ae.ux.prefixedStylesheet("prompt",{container:[{position:"relative"}],promptAndMenuContainer:[fo],placeholder:[{opacity:0,pointerEvents:"none"}]}),bo=ee.UI.Grid.make((({slots:e,view:t,notify:n})=>{const{onMount:o,rect:r}=ye.P.useRectWatcher(),s=J.useMemo((()=>r.pipe(l.b((e=>n({kind:"promptHeight",height:(0,i.zG)(e,u.map((e=>e.height)))})())))),[r]);return ye.P.useSubscriptionTo(s),J.createElement(te.F.div,{className:xo.container},J.createElement(te.F.div,{className:xo.promptAndMenuContainer,"data-expanded":t("menuExpanded")},e.promptMenu,J.createElement("div",{ref:o},e.promptHeader,e.promptField)),z.aj([r,t("menuExpanded")]).pipe(A.U((([e,t])=>(0,i.zG)(e,u.filter((()=>t)),u.fold(i.gn,(e=>J.createElement("div",{className:xo.placeholder,style:{height:e.height}}))))))))})),vo=ee.UI.Knot.make(bo,{promptField:Vi,promptHeader:Ki,promptMenu:po}),yo=ee.UI.Union.asOption(vo);var Co=n(598);function ko(e,t,n){const o=e.state.view((({activeView:e})=>"loadingError"!==e?u.some(!0):u.none));return ee.Z.composeOption(function(e,t,n){const o=z.aj([e.state.view("promptMenu"),t]).pipe(A.U((([e,t])=>(0,i.zG)(b.Yt(u.Apply)({maxHeight:t,menu:e}),u.map((({menu:e,maxHeight:t})=>Object.assign(Object.assign({},e),{maxHeight:t})))))),B.shareReplay({bufferSize:1,refCount:!0}));return ee.Z.composeKnot({root:ee.Z.fromSideEffect((e=>{if("promptHeight"===e.kind)return n.set(e.height);(0,M.L0)(e.kind)}),o.pipe(A.U((e=>({menuExpanded:u.isSome(e)}))))),promptField:Di(e),promptHeader:Zi(e),promptMenu:ho(e,o)})}(e,o.pipe(U.oA,Co.c(t)),n),(()=>o))}const wo=ee.UI.Grid.make((({slots:e})=>J.createElement("div",{className:Si.container},e.content,e.prompt))),So=ee.UI.Knot.make(wo,{content:Ri,prompt:yo});function _o(e,t){const n=m.h.create(u.none),i=m.h.create(u.none);return ee.Z.composeKnot({content:Bi(e,n,t,i),prompt:ko(e,n,i)})}const Eo={display:"flex",alignItems:"center",justifyContent:"center",gap:ae.ux.rem(ue.x),padding:`${ae.ux.rem(ue.F2)} ${ae.ux.rem(.625)} ${ae.ux.rem(ue.F2)} ${ae.ux.rem(ue.x)}`,background:Ue.XY.Surface.Primary.Default,border:`${ae.ux.px(1)} solid transparent`,borderRadius:ae.ux.rem(1.875),fontSize:ae.ux.rem(.875),lineHeight:ae.ux.rem(1.375),boxSizing:"border-box",$nest:{"&[data-kind='unselected']":{border:`${ae.ux.px(1)} solid ${le.BlueGray5}`,color:Ue.XY.Content.Primary.Default,cursor:"pointer"},"&[data-kind='disabled']":{border:`${ae.ux.px(1)} solid ${le.BlueGray5}`,color:le.BlueGray40,cursor:"default"},"&[data-kind='selected']":{border:`${ae.ux.px(2)} solid ${o.BO.BrandGreen60}`,padding:`${ae.ux.rem(.1875)} ${ae.ux.rem(.5625)} ${ae.ux.rem(.1875)} ${ae.ux.rem(.4375)}`,position:"relative",$nest:{"&[data-unselectable='true']":{cursor:"pointer"}}}}},Oo=Object.assign(Object.assign({position:"absolute",top:ae.ux.rem(-(ue.F2+ue.W9)),right:ae.ux.rem(-(ue.F2+ue.W9)),boxSizing:"content-box"},o.Es.iconSizeRems(.75)),{border:`${ae.ux.rem(.125)} solid white`,borderRadius:"50%",background:o.BO.BrandGreen60,display:"flex",alignItems:"center",justifyContent:"center"}),Io=ae.ux.prefixedStylesheet("selectable_chip",{chip:[Eo],selectedIcon:[Oo]}),Ao=({kind:e,label:t,description:n,iconUrl:i,isUnselectable:r,onToggle:s})=>J.createElement(In.u,{title:n},J.createElement("button",{disabled:"disabled"===e,className:Io.chip,"data-kind":e,"data-unselectable":r,onClick:(0,o.m)((()=>{"disabled"!==e&&s("selected"!==e&&("unselected"===e||(0,M.L0)(e)))}))},i?J.createElement("img",{src:i,style:{width:20,height:20}}):null,J.createElement("span",null,t),r&&"selected"===e?J.createElement(ve.cv,{className:Io.selectedIcon}):null)),Ro={display:"flex",flexWrap:"wrap",gap:ae.ux.rem(ue.F2),$nest:{div:{marginTop:ae.ux.rem(ue.F2)}}},Po=ae.ux.prefixedStylesheet("chip_selector",{chips:[Ro]}),Uo=({chips:e,className:t,onToggle:n})=>J.createElement(te.F.div,Object.assign({},(0,ne.Sh)(Po.chips,t)),e.pipe(A.U(C.UI((e=>J.createElement(Ao,Object.assign({},e,{onToggle:t=>n(e,t),key:e.label}))))))),Bo={margin:0,padding:ae.ux.rem(ue.mh),background:"white",border:`0.5px solid ${le.BlueGray10}`,borderRadius:ae.ux.rem(ce.xB+ce.fe),display:"flex",flexDirection:"column",gap:ae.ux.rem(ue.mh)},zo={color:Ue.XY.Content.Primary.Default,fontWeight:700,fontSize:ae.ux.rem(.875),lineHeight:ae.ux.rem(1.375),margin:"0"},To={color:Ue.XY.Content.Secondary.Default,fontWeight:400,fontSize:ae.ux.rem(.75),lineHeight:ae.ux.rem(1.125)},Go={marginTop:ae.ux.rem(ue.x)},Fo={color:le.BlueGray60,fontWeight:400,fontSize:ae.ux.rem(.75),lineHeight:ae.ux.rem(1.125)},jo={display:"flex",justifyContent:"flex-end",gap:ae.ux.rem(ue.x)},No={fontSize:ae.ux.important(ae.ux.rem(.875))},Vo={marginTop:ae.ux.rem(ue.x)},Do={marginTop:ae.ux.rem(ue.x)},Mo={display:"flex",alignItems:"center",gap:ae.ux.rem(ue.x)},$o={width:ae.ux.rem(1.5),height:ae.ux.rem(1.5),display:"flex",alignItems:"center",justifyContent:"center"},Lo=ae.ux.prefixedStylesheet("voice_profile",{container:[Bo],sectionTitle:[zo],chips:[Go],sectionDescription:[To],description:[Fo],footer:[jo],applyButton:[No],skipButton:[No],roleTypeAhead:[Vo],dialectSelect:[Do],dialectLabel:[Mo],dialectIcon:[$o]});var Ho=n(9295);const Ko=ee.UI.Node.make((({view:e,state:t,notify:n})=>J.createElement("div",{className:Lo.container},J.createElement("section",null,J.createElement("h2",{className:Lo.sectionTitle},"Formality"),J.createElement(Uo,{className:Lo.chips,chips:e("styles").pipe(A.U(C.UI((e=>Object.assign(Object.assign({},e),{isUnselectable:!1}))))),onToggle:e=>n({kind:$.ix.Kind.selectStyle,id:e.id})()})),J.createElement("section",null,J.createElement("h2",{className:Lo.sectionTitle},"Tone"),J.createElement(te.F.div,{className:Lo.sectionDescription},"Select up to"," ",e("maxSelectableTones").pipe(A.U((e=>{return t=e,Number.isInteger(t)&&t>=0&&t<10?function(e){return["zero","one","two","three","four","five","six","seven","eight","nine"][e]}(e):`${e}`;var t})))),J.createElement(Uo,{className:Lo.chips,chips:e("tones").pipe(A.U(C.UI((e=>Object.assign(Object.assign({},e),{isUnselectable:!0}))))),onToggle:(e,t)=>n({kind:$.ix.Kind.toggleTone,selected:t,id:e.id})()})),J.createElement(te.F.Fragment,null,t.pipe(A.U((e=>(0,i.zG)(e.roles,k.c2,u.fold(i.gn,(t=>J.createElement("section",null,J.createElement("h2",{className:Lo.sectionTitle},"Your profession"),J.createElement(ve.pY,{className:Lo.roleTypeAhead,placeholder:"Product designer",text:e.roleTypeaheadText,onInputChange:e=>n({kind:"updateRoleTypeaheadText",text:e})(),onSelectionChange:e=>n({kind:$.ix.Kind.selectRole,role:u.fromNullable(e)})(),options:t,label:e=>e.label,clearButton:!0,selectOnBlur:!0}))))))))),J.createElement("section",null,J.createElement("h2",{className:Lo.sectionTitle},"I write in"),J.createElement(te.F.Fragment,null,t.pipe(A.U((({dialects:e,selectedDialect:t})=>J.createElement(ve.Ph,{className:Lo.dialectSelect,options:e.filter((e=>!Ho.L.Dialect.Id.eq.equals(e.id,t.id))),selection:t,onSelectionChange:e=>n({kind:$.ix.Kind.selectDialect,dialect:e})(),label:e=>e.label,renderOption:e=>J.createElement("div",{className:Lo.dialectLabel},J.createElement("div",{className:Lo.dialectIcon},J.createElement("img",{src:e.iconUrl,style:{width:ae.ux.rem(1),height:ae.ux.rem(1)}})),e.label)})))))),J.createElement(te.F.Fragment,null,e("description").pipe(A.U((e=>""!==e.trim()?J.createElement("div",{className:Lo.description},e):null)))),J.createElement(te.F.div,{className:Lo.footer},J.createElement(ve.zx.Tertiary,{className:Lo.skipButton,onClick:n({kind:$.ix.Kind.closeVoiceProfile}),name:"closeVoiceProfile"},"Close"),e("applyButtonEnabled").pipe(A.U((e=>J.createElement(ve.zx.Primary,{className:Lo.applyButton,onClick:n({kind:$.ix.Kind.applyVoiceProfile}),disabled:!e,name:"applyVoiceProfile"},"Use this voice"))))))));function Zo(e){const t=m.h.create("");return ee.Z.fromSideEffect((n=>{"updateRoleTypeaheadText"===n.kind?t.set(n.text):(n.kind===$.ix.Kind.selectRole&&t.set((0,i.zG)(n.role,u.fold((()=>""),(e=>e.label)))),e.notify(n))}),m.h.combine(e.state,t,(({stagingVoiceProfile:e,session:t},n)=>(0,i.zG)(b.Yt(u.Apply)({voiceProfile:(0,i.zG)($.z_.toStarted(t),u.map((e=>e.voiceProfile))),stagingVoiceProfile:e}),u.fold((()=>({tones:[],styles:[],roles:[],maxSelectableTones:0,applyButtonEnabled:!1,description:"",roleTypeaheadText:"",dialects:$.LA.Dialect.all(),selectedDialect:$.LA.Dialect.american})),(({stagingVoiceProfile:e,voiceProfile:t})=>(0,i.zG)(t.styles,C.Ew((t=>t.id===e.selectedStyle)),(o=>({styles:(0,i.zG)(t.styles,C.UI((t=>Object.assign(Object.assign({},t),{kind:t.id===e.selectedStyle?"selected":"unselected"})))),tones:(0,i.zG)(o,u.fold((()=>[]),(t=>(0,i.zG)(t.tones,C.UI((n=>Object.assign(Object.assign({},n),{kind:(0,i.zG)(u.fromNullable(e.selectedTonesPerStyle.get(e.selectedStyle)),u.getOrElse((()=>new Set)),(e=>e.has(n.id)?"selected":e.size>=t.maxTones?"disabled":"unselected"))}))))))),roles:t.roles,maxSelectableTones:(0,i.zG)(o,u.fold((()=>3),(e=>e.maxTones))),applyButtonEnabled:!$.LA.Selections.eq.equals(e,t),description:"These voice settings will apply to any text you generate with GrammarlyGO.",roleTypeaheadText:(0,i.zG)(e.selectedRole,u.filter((()=>""===n)),u.chain((e=>u.fromNullable(t.roles.find((t=>t.id===e))))),u.fold((()=>n),(e=>e.label))),dialects:t.dialects,selectedDialect:t.dialects.find((t=>$.LA.Dialect.Id.eq.equals(t.id,e.selectedDialect)))||$.LA.Dialect.american})))))))))}const Wo="submitBtn",qo={padding:ae.ux.rem(ue.mh),background:"white",border:`0.5px solid ${le.BlueGray10}`,borderRadius:ae.ux.rem(ce.xB+ce.fe),display:"flex",flexDirection:"column",gap:ae.ux.rem(ue.mh)},Yo={color:Ue.XY.Content.Primary.Default,fontWeight:700,fontSize:ae.ux.rem(1.25),lineHeight:ae.ux.rem(1.5),margin:0},Xo={border:`${ae.ux.px(1)} solid ${le.NeutralGray20}`,borderRadius:ae.ux.rem(ce.xB),padding:`${ae.ux.rem(ue.x+ue.yC)} ${ae.ux.rem(ue.x)}`,height:ae.ux.rem(8)},Qo={display:"flex",alignItems:"flex-start",$nest:{"& input[type='checkbox']":{margin:`${ae.ux.rem(ue.W9)} ${ae.ux.rem(ue.x)} 0 0`,minWidth:ae.ux.rem(1),minHeight:ae.ux.rem(1)},"& label":{color:Ue.XY.Content.Primary.Default,fontWeight:400,fontSize:ae.ux.rem(.75),lineHeight:ae.ux.rem(1.125)}}},Jo=Object.assign({width:ae.ux.percent(100)},o.Es.buttonOverrideSpecificity({fontSize:ae.ux.rem(.875)},Wo)),er={display:"flex",flexDirection:"column",gap:ae.ux.rem(ue.x)},tr={container:ae.ux.style(qo),title:ae.ux.style(Yo),feedbackTextarea:ae.ux.style(Xo),checkboxGroup:ae.ux.style(Qo),domain:ae.ux.style({fontWeight:700}),submitButton:ae.ux.joinClasses([Wo,ae.ux.style(Jo)]),bottomSection:ae.ux.style(er)};var nr=n(18208);const ir={display:"flex",flexDirection:"row",justifyContent:"space-between",paddingLeft:ae.ux.rem(ue.mh),paddingRight:ae.ux.rem(ue.mh)},or={width:ae.ux.rem(5),height:ae.ux.rem(5),cursor:"pointer",display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center",gap:ae.ux.rem(ue.x),borderRadius:ae.ux.rem(ce.HP),fontWeight:400,fontSize:ae.ux.rem(.75),lineHeight:ae.ux.rem(1.125),$nest:{"&:hover":{backgroundColor:Ue.XY.Surface.Secondary.Default}}},rr={backgroundColor:le.Blue10,$nest:{"&:hover":{backgroundColor:le.Blue10}}},sr=Object.assign({},o.Es.iconSizeRems(1.5)),ar=ae.ux.stylesheet({scoreRow:[ir],scoreButton:[or],scoreButtonSelected:[rr],emojiIcon:[sr]}),lr=(e,t)=>(0,ne.Sh)(ar.scoreButton,e===t&&ar.scoreButtonSelected),cr=(0,ne.xb)((({selectedScore:e,onSelectScore:t})=>J.createElement("div",{className:ar.scoreRow},J.createElement("div",Object.assign({},lr($.x2.Mood.dissatisfied,e),{onClick:()=>t($.x2.Mood.dissatisfied)}),J.createElement(ve.XR,{className:ar.emojiIcon}),"I dislike it"),J.createElement("div",Object.assign({},lr($.x2.Mood.ok,e),{onClick:()=>t($.x2.Mood.ok)}),J.createElement(ve.R6,{className:ar.emojiIcon}),"It′s OK"),J.createElement("div",Object.assign({},lr($.x2.Mood.satisfied,e),{onClick:()=>t($.x2.Mood.satisfied)}),J.createElement(ve.OJ,{className:ar.emojiIcon}),"I like it!")))),ur=(0,ne.xb)(ve.b),dr=ee.UI.Node.make((({state:e,view:t,notify:n})=>{const o="domainCheckbox"+nr.fg(5);return J.createElement(te.F.div,{className:tr.container},J.createElement("h1",{className:tr.title},"How do you like Grammarly?"),J.createElement(cr,{selectedScore:t("formData").pipe(A.U(d.ei("mood"))),onSelectScore:e=>n({kind:$.ix.Kind.updateFeedbackForm,feedbackData:{mood:e}})()}),J.createElement(ur,{className:tr.feedbackTextarea,placeholder:["How can we improve?"],fitContentHeight:!1,text:t("formData").pipe(A.U((({message:e})=>null!=e?e:""))),onChange:e=>n({kind:$.ix.Kind.updateFeedbackForm,feedbackData:{message:e}})()}),e.pipe(A.U((({formData:e,domain:t,source:r})=>J.createElement("div",{className:tr.bottomSection},(0,i.zG)(t,u.fold(i.gn,(t=>J.createElement("div",{className:tr.checkboxGroup},J.createElement("input",{type:"checkbox",id:o,checked:void 0!==e.domain,onChange:n({kind:$.ix.Kind.updateFeedbackForm,feedbackData:{domain:void 0!==e.domain?void 0:t}})}),J.createElement("label",{htmlFor:o},"Include the domain ",J.createElement("b",null,t)," with my feedback to help improve Grammarly."))))),(0,i.zG)(u.fromNullable(void 0!==e.mood?Object.assign(Object.assign({},e),{mood:e.mood,source:r}):null),u.fold((()=>J.createElement(ve.zx.Primary,{disabled:!0,className:tr.submitButton,onClick:i.Q1},"Submit")),(e=>J.createElement(ve.zx.Primary,{disabled:!1,className:tr.submitButton,onClick:n({kind:$.ix.Kind.submitFeedbackForm,feedbackData:e})},"Submit")))))))))}));var mr;function pr(e,t){return ee.Z.fromSideEffect((t=>e.notify(t)),e.state.view((e=>{var n,i;return{formData:e.stagingFeedbackFormData,domain:t.showDomainCheckbox,source:null!==(i=null===(n=e.stagingFeedbackFormData)||void 0===n?void 0:n.source)&&void 0!==i?i:$.x2.Source.resultCard}})))}!function(e){e.empty={showDomainCheckbox:u.none}}(mr||(mr={}));const hr={position:"relative",padding:ae.ux.rem(ue.x),paddingTop:0},gr=ae.ux.stylesheet({contentGrid:[hr]}),fr={position:"absolute",top:0,right:ae.ux.rem(ue.x),display:"flex",flexDirection:"column",gap:ae.ux.rem(ue.x),zIndex:1e3,transition:"top 0.1s ease-in"},xr={top:ae.ux.rem(ue.F2)},br=ae.ux.stylesheet({container:[fr],containerWithOffset:[fr,xr]}),vr=ae.ux.keyframes({from:{transform:`translateY(${ae.ux.rem(.25)})`,opacity:0},to:{transform:"translateY(0)",opacity:1}}),yr={background:Ue.S5.Surface.Primary.Default,color:Ue.S5.Content.Primary.Default,borderRadius:ae.ux.rem(ce.xB+ce.fe),display:"flex",flexDirection:"row",alignItems:"center",padding:`${ae.ux.rem(ue.x)} ${ae.ux.rem(ue.qp)}`,gap:ae.ux.rem(ue.qp),fontSize:ae.ux.rem(.75),lineHeight:ae.ux.rem(1.125),animation:`${vr} 0.1s ease-in`},Cr=Object.assign({},o.Es.iconSizeRems(1.5)),kr=ae.ux.stylesheet({notification:[yr],checkmarkIcon:[Cr]}),wr=ee.UI.Node.make((({view:e,notify:t})=>J.createElement(te.F.div,{className:kr.notification,"data-id":e("id")},e("kind").pipe(A.U((e=>{if(e===$.Cl.Kind.feedbackSubmitted)return J.createElement(J.Fragment,null,J.createElement(ve.j4,{className:kr.checkmarkIcon}),J.createElement("div",null,"Thanks for the feedback!"));(0,M.L0)(e)}))),e("id").pipe(A.U((e=>J.createElement(ve.xx,{name:"notificationClose",onClick:t({kind:"dismissNotification",id:e}),size:"small"})))))));const Sr=ee.UI.List.make(C.bw,wr),_r=ee.UI.Grid.make((({slots:e,view:t})=>J.createElement(te.F.div,{className:t("contentOverflowUnderToolbar").pipe(A.U((0,j.RN)(br.containerWithOffset,br.container)))},e.content))),Er=ee.UI.Knot.make(_r,{content:Sr});function Or(e){return ee.Z.composeKnot({root:()=>e.assistant.state.view(d.H6("contentOverflowUnderToolbar")),content:(t=e.notifications,ee.Z.composeList(C.Ot,(()=>t.state.view(C.GY)),(e=>function(e,t){return ee.Z.fromSideEffect((e=>{if("dismissNotification"===e.kind)return t.dismiss(e.id);(0,M.L0)(e.kind)}),e)}(e,t))))});var t}const Ir=ee.UI.Grid.make((({slots:e})=>J.createElement("div",{className:gr.contentGrid},e.notifications,e.content))),Ar=ee.UI.Union.make("kind",{chat:So,voiceProfile:Ko,feedbackForm:dr}),Rr=ee.UI.Knot.make(Ir,{content:Ar,notifications:Er});function Pr({vms:e,assistantMaxHeight:t,feedbackFormOptions:n}){return ee.Z.composeKnot({content:Ur(e.assistant,t,n),notifications:Or(e)})}function Ur(e,t,n){return ee.Z.composeUnion({chat:_o(e,t),voiceProfile:Zo(e),feedbackForm:pr(e,n)},(()=>e.state.view("activeView").view((e=>({kind:"voiceProfile"===e||"feedbackForm"===e?e:"chat"})))))}const Br={padding:`${ae.ux.rem(ue.x)}`,fontSize:ae.ux.rem(.75),lineHeight:ae.ux.rem(1.125),color:Ue.XY.Content.Secondary.Default,cursor:"default"},zr={color:le.Blue60},Tr=ae.ux.stylesheet({label:[Br],upgrade:[zr]});const Gr=ee.UI.Node.make((({state:e,notify:t})=>{const{ref:n,onMount:i}=ye.P.useElWatcher(),{ref:o,onMount:r}=ye.P.useElWatcher(),a=J.useMemo((()=>n.pipe(U.oA,T.w((e=>c.R(e,"mouseenter").pipe(Co.c(G.of(null).pipe(Ut.g(500),s.R(c.R(e,"mouseleave"))))))),l.b(t({kind:$.ix.Kind.creditsInfoHover})))),[n]);ye.P.useSubscriptionTo(a);const u=J.useMemo((()=>o.pipe(_t.QV(Et.E),U.oA,l.b((e=>t({kind:$.ix.Kind.mount,name:$.ec.creditsInfoButton,element:e})())))),[o]);return ye.P.useSubscriptionTo(u),J.createElement(te.F.Fragment,null,e.pipe(A.U((({user:e,availability:n})=>{const o=$.a8.isActive(n)?function(e){const t=`${e.promptsRemaining}/${e.promptsAllocated} prompts left. `,n=$.a8.Active.daysUntilRefillDate(e.refillDate),i=$.a8.Active.hoursUntilRefillDate(e.refillDate);return n>0?t+`Next refill in ${n} ${nr._6(n,"day","days")}.`:i>0?t+`Next refill in ${i} ${nr._6(i,"hour","hours")}.`:t+"Next refill in less than an hour."}(n):e.isFree?"To get more prompts, upgrade to Premium.":"To get more prompts, contact support.",s=$.a8.isActive(n)?`${n.promptsRemaining} ${nr._6(n.promptsRemaining,"prompt","prompts")}`:e.isFree?J.createElement(J.Fragment,null,"0 prompts. ",J.createElement("span",{className:Tr.upgrade},"Upgrade")):"0 prompts";return!e.isFree&&$.a8.isActive(n)?J.createElement(In.u,{title:o},J.createElement("div",{ref:i,className:Tr.label},s)):J.createElement(ve.zx.Tertiary,{onClick:t({kind:$.ix.Kind.creditsInfoClick,userIsFree:e.isFree}),title:o,name:"creditsInfo",mount:r},J.createElement("div",{ref:i},s))}))))})),Fr=ee.UI.Union.asOption(Gr);function jr(e){const t=e.state.view((e=>(0,i.zG)(e.availability,u.fromPredicate((0,j.Kg)($.a8.isActive,$.a8.isPassive)),u.filter((()=>u.isSome($.z_.toStarted(e.session)))))));return ee.Z.composeOption(function(e,t,n){return ee.Z.fromSideEffect((t=>e.notify(t)),(0,i.zG)(z.aj([t,n]),A.U((([e,t])=>({user:e,availability:t})))))}(e,e.state.view("user"),t.pipe(U.oA)),(()=>m.h.combine(t,e.state.view("activeView"),((e,t)=>(0,i.zG)(e,u.filter((()=>"voiceProfile"!==t&&"feedbackForm"!==t)))))))}const Nr="voiceBtn",Vr=o.Es.buttonOverrideSpecificity({padding:0,paddingRight:ae.ux.rem(ue.x),paddingLeft:ae.ux.rem(ue.F2),gap:ae.ux.rem(ue.x),flexWrap:"nowrap",$nest:{"& > i":Object.assign({},o.Es.iconSizeRems(1.5))}},Nr),Dr={stroke:le.BlueGray60},Mr={voiceButton:ae.ux.joinClasses([Nr,ae.ux.style(Vr)]),voiceIcon:ae.ux.style(Dr)},$r=ee.UI.Node.make((({view:e,notify:t})=>J.createElement(ve.zx.Tertiary,{className:Mr.voiceButton,onClick:t({kind:$.ix.Kind.openVoiceProfile,source:"toolbar"}),name:"toolbarVoiceProfile"},J.createElement(ve.uA,{className:Mr.voiceIcon}),J.createElement(te.F.span,null,e("styleLabel"))))),Lr={display:"flex",alignItems:"center",gap:ae.ux.rem(ue.x),color:le.BlueGray60,fontWeight:400,fontSize:ae.ux.rem(.75),lineHeight:ae.ux.rem(1.125)},Hr=ae.ux.prefixedStylesheet("back_button",{buttonAndLabel:[Lr]}),Kr=ee.UI.Node.make((({notify:e,view:t})=>J.createElement("div",{className:Hr.buttonAndLabel},J.createElement(ve.zx.Tertiary,{compact:!0,onClick:e({kind:$.ix.Kind.goBack}),name:"goBack"},J.createElement(ke.JO.Arrow,{direction:ke.n4.left})),J.createElement(te.F.Fragment,null,t("activeViewLabel").pipe(A.U(u.fold(i.gn,(e=>J.createElement("span",null,e)))))))));var Zr=n(5315);const Wr="bnrGr",qr="bnrGo",Yr="goLogo",Xr="betaBadge",Qr="sepAndRight",Jr=ae.ux.style({display:"flex",alignItems:"center",justifyContent:"space-between",width:ae.ux.percent(100),gap:ae.ux.rem(ue.x),position:"relative",overflow:"hidden"}),es=ae.ux.style({display:"flex",flexDirection:"row",alignItems:"center",gap:ae.ux.rem(Zr.x)}),ts={height:ae.ux.rem(1),borderLeft:`1px solid ${le.BlueGray20}`},ns=ae.ux.style(ts),is=ae.ux.style({display:"flex",flexDirection:"row",alignItems:"center"}),os=ae.ux.joinClasses([ae.ux.style({display:"flex",alignItems:"center",justifyContent:"center",height:ae.ux.rem(2),width:ae.ux.rem(2.375)}),Yr]),rs=ae.ux.style({display:"flex",flexDirection:"row",alignItems:"center"}),ss=Xr,as=ae.ux.style({width:ae.ux.rem(10),overflowWrap:"normal",whiteSpace:"normal",textAlign:"left"}),ls=ae.ux.style(Object.assign(Object.assign({},ts),{marginLeft:ae.ux.rem(ue.x),marginRight:ae.ux.rem(ue.F2)})),cs=ae.ux.joinClasses([ae.ux.style({display:"flex",alignItems:"center"}),Qr]),us=ae.ux.style({display:"flex",flexDirection:"row",alignItems:"center",height:ae.ux.rem(2)}),ds=e=>ae.ux.rem(79*(null!=e?e:1)/16),ms=ae.ux.joinClasses([ae.ux.style({width:ds(),height:ae.ux.rem(1),paddingTop:ae.ux.rem(ue.W9),marginLeft:ae.ux.rem(ue.F2+ue.yC)}),Wr]),ps=ae.ux.joinClasses([ae.ux.style({minWidth:ae.ux.rem(1.625)}),qr]),hs=ae.ux.keyframes({from:{opacity:0},to:{opacity:1}}),gs=ae.ux.keyframes({"0%":{opacity:0},"99%":{opacity:0},"100%":{opacity:1}}),fs=ae.ux.keyframes({from:{opacity:1,transform:"translateX(0)"},to:{opacity:0,transform:"translateX(-50%)"}}),xs=ae.ux.keyframes({from:{transform:"translateX(0)"},to:{transform:`translateX(${ds(-1)})`}}),bs=ae.ux.style({$nest:{[`.${Qr}`]:{animation:`${hs} 300ms cubic-bezier(0.52, 0, 0.23, 1)`},[`.${Xr}`]:{animation:`${hs} 300ms cubic-bezier(0.52, 0, 0.23, 1)`},[`.${Yr}`]:{animation:`${gs} 300ms linear`}}}),vs=ae.ux.style({position:"absolute",top:ae.ux.rem(ue.W9),zIndex:1,$nest:{[`.${Wr}`]:{animation:`${fs} 300ms cubic-bezier(0.52, 0, 0.23, 1)`},[`.${qr}`]:{animation:`${xs} 300ms cubic-bezier(0.52, 0, 0.23, 1)`}}}),ys=ee.UI.Grid.make((({slots:e})=>J.createElement("div",{className:es},e.back,J.createElement("div",{className:ns}),e.voice))),Cs=ee.UI.Knot.make(ys,{back:Kr,voice:$r}),ks=()=>J.createElement("div",{className:rs},J.createElement(ve.T3,{className:os}),J.createElement(In.u,{title:J.createElement("div",{className:as},"GrammarlyGO is still in beta testing. Please check for any inaccuracies.")},J.createElement(ve.Ct,{className:ss},"Beta"))),ws=ee.UI.Node.make(ks),Ss=ee.UI.Composite.make(ee.UI.Grid.make((({slots:e})=>J.createElement("div",{className:is},J.createElement(ks,null),J.createElement("div",{className:cs},J.createElement("div",{className:ls}),e.content)))),$r),_s=ee.UI.Node.make((()=>J.createElement("div",{className:us},J.createElement(ve.Pe,{className:ms}),J.createElement(ve.T3,{className:ps})))),Es=ee.UI.Union.make("kind",{goBanner:_s,goLogoOnly:ws,goLogoAndVoiceButton:Ss,backButton:Kr,backButtonAndVoiceButton:Cs}),Os=ee.UI.Transition.make({toolbarEntry:bs},{bannerExit:vs}),Is=ee.UI.Grid.make((({slots:e})=>J.createElement("div",{className:Jr},e.left,e.right))),As=ee.UI.Knot.make(Is,{left:ee.UI.Animated.make(Os,Es),right:Fr});var Rs=n(93756);function Ps(e){return ee.Z.composeUnion({goBanner:()=>G.of(null),goLogoOnly:()=>G.of(null),goLogoAndVoiceButton:Ts(e),backButton:Us(e),backButtonAndVoiceButton:zs(e)},(()=>Y.H(1e3).pipe(Co.c(e.state.view((({activeView:e,session:t})=>(0,i.zG)($.z_.toStarted(t),u.map((e=>e.voiceProfile)),u.foldW((()=>({kind:"goLogoOnly"})),(()=>"loadingError"===e?{kind:"goLogoOnly"}:"loading"===e||"beforeResults"===e||"afterResults"===e?{kind:"goLogoAndVoiceButton"}:"voiceProfile"===e||"feedbackForm"===e?{kind:"backButton"}:"actionSelected"===e?{kind:"backButtonAndVoiceButton"}:(0,M.L0)(e))))))),F.O({kind:"goBanner"}))))}function Us(e){return ee.Z.fromSideEffect((t=>e.notify(t)),e.state.view("activeView").view((e=>({activeViewLabel:"voiceProfile"===e?u.some("My voice"):"feedbackForm"===e?u.some("Share your thoughts"):u.none}))))}function Bs(e){var t;return(null===(t=e.styles.find((t=>$.LA.Style.Id.eq.equals(t.id,e.selectedStyle))))||void 0===t?void 0:t.label)||""}function zs(e){return ee.Z.fromSideEffect((t=>e.notify(t.action)),e.state.view("session").view($.z_.toStarted).pipe(U.oA,A.U((({voiceProfile:e})=>({back:{activeViewLabel:u.none},voice:{styleLabel:Bs(e)}})))))}function Ts(e){return ee.Z.fromSideEffect((t=>e.notify(t)),e.state.view("session").view((0,i.ls)($.z_.toStarted,u.map((e=>e.voiceProfile)))).pipe(U.oA,A.U((e=>({kind:"goLogoAndVoiceButton",styleLabel:Bs(e)})))))}const Gs=ee.UI.Knot.make(we,{toolbar:As,content:Rr});function Fs(e){return ee.UI.Composite.make(ee.UI.Grid.make((({slots:t})=>J.createElement(Ft.Provider,{value:{notifyUnmount:t=>e.notify(t)}},t.assistant))),Gs)}function js(e,t=mr.empty){return ee.Z.composeKnot({root:Ie(e.position,e.assistant),content:Pr({vms:e,assistantMaxHeight:e.position.state.view((0,i.ls)(p,u.chain(d.ei("assistantMaxHeight")))),feedbackFormOptions:t}),toolbar:(n=e.assistant,ee.Z.composeKnot({left:ee.Z.animatingFlow(Ps(n),((e,t)=>(0,i.zG)(e,u.filter((({kind:e})=>"goBanner"===e)),u.map((()=>Rs.Hk("bannerExit","toolbarEntry")))))),right:jr(n)}))});var n}ee.UI.Knot.make(Pe,{toolbar:As,content:Rr})},74911:(e,t,n)=>{n.d(t,{P:()=>f});var i=n(89894),o=n(13578),r=n(62172),s=n(88392),a=n(9546),l=n(20654),c=n(99223);const u={color:o.XY.Content.OnPrimary.Default,backgroundColor:l.BO.BrandGreen60,transitionProperty:"border, background, color",fontWeight:"bold",$nest:{"&:not([data-disabled='true'])":{$nest:{"&[data-hovered='true']":{backgroundColor:l.BO.BrandGreen80},"&:focus-visible":{boxShadow:`0 0 0 2px ${o.XY.Surface.Primary.Default}, 0 0 0 4px ${l.BO.BrandGreen80}`},"&[data-active='true'], &:active":{backgroundColor:l.BO.BrandGreen60,color:o.XY.Surface.Primary.Default}}}}},d={backgroundColor:"transparent",fontWeight:"normal",color:r.BlueGray80,stroke:r.BlueGray80,boxShadow:`inset 0 0 0 1px ${r.BlueGray5}`,transitionProperty:"border, background, color",$nest:{"& > i":{stroke:i.ux.important(r.BlueGray80),fill:i.ux.important(r.BlueGray80)},"&:not([data-disabled='true'])":{$nest:{"&[data-hovered='true']":{backgroundColor:r.BlueGray0},"&:focus-visible":{boxShadow:`inset 0 0 0 1px ${r.BlueGray80}, 0 0 0 1px ${r.BlueGray80}, 0 0 0 2px ${o.XY.Surface.Primary.Default}, 0 0 0 4px ${r.BlueGray80}`},"&[data-active='true'], &:active":{backgroundColor:"transparent",color:r.BlueGray80}}}}},m="button",p={padding:0,$nest:{"& > i":{marginLeft:0}}},h=e=>({minWidth:i.ux.rem(e),minHeight:i.ux.rem(e),lineHeight:i.ux.rem(e),$nest:{"& > i":{minWidth:i.ux.rem(e)}}}),g=e=>l.Es.specificity(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({borderRadius:i.ux.rem(s.xB),fontSize:i.ux.rem(.75),textAlign:"center",padding:`0 ${i.ux.rem(a.x)}`,userSelect:"none",display:"inline-flex",alignItems:"center",justifyContent:"center"},e.compact?p:{}),"small"===e.size?h(1.5):{}),"medium"===e.size?h(1.75):{}),"large"===e.size?h(2):{}),{$nest:{"& > i":{marginLeft:i.ux.rem(-.25)},"&[data-disabled='true']":{opacity:.4,cursor:"not-allowed"}}}),"primary"===e.type?u:{}),"secondary"===e.type?d:{}),"tertiary"===e.type?(e=>({backgroundColor:"transparent",fontWeight:"normal",color:o.XY.Content.Secondary.Default,transitionProperty:"border, background, color",$nest:{"& > i":{stroke:i.ux.important(o.XY.Content.Secondary.Default),fill:i.ux.important(o.XY.Content.Secondary.Default)},"&:not([data-disabled='true'])":{$nest:Object.assign(Object.assign({"&[data-hovered='true'], &[data-active='true'], &:active":{backgroundColor:r.BlueGray0,color:o.XY.Content.Secondary.Default}},"dark"===e.theme?{"&[data-hovered='true'], &[data-active='true'], &:active":{backgroundColor:i.ux.color(r.BlueGray0).toRGBA().fade(.2).toString()}}:{}),{"&:focus-visible":{boxShadow:`0 0 0 2px ${o.XY.Surface.Primary.Default}, 0 0 0 4px ${o.XY.Content.Secondary.Default}`}})}}}))(e):{}),m,c.baseButtonContentOverrideSpecificity),f=e=>i.ux.joinClasses([m,i.ux.style(g(e))])},18599:(e,t,n)=>{n.d(t,{j4:()=>S,XR:()=>y,CT:()=>l,T3:()=>x,rN:()=>v,Pe:()=>b,k8:()=>c,L3:()=>s,Ho:()=>m,R6:()=>C,kc:()=>f,Gv:()=>d,cv:()=>p,OJ:()=>k,wN:()=>u,uA:()=>r,T6:()=>h});var i=n(27378),o=n(31278);const r=e=>i.createElement(o.a1,Object.assign({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},e),i.createElement("path",{d:"M12 7L12 17",strokeLinecap:"round"}),i.createElement("path",{d:"M9 9L9 15",strokeLinecap:"round"}),i.createElement("path",{d:"M15 9L15 15",strokeLinecap:"round"}),i.createElement("path",{d:"M18 11L18 13",strokeLinecap:"round"}),i.createElement("path",{d:"M6 11L6 13",strokeLinecap:"round"})),s=e=>i.createElement(o.a1,Object.assign({width:"12",height:"15",viewBox:"0 0 12 15",fill:"#99A0B3"},e),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.5 0.5C3.67157 0.5 3 1.17157 3 2V3H0.5C0.223858 3 0 3.22386 0 3.5C0 3.77614 0.223858 4 0.5 4H1.04536L1.82983 12.237C1.95203 13.5201 3.02968 14.5 4.31857 14.5H7.68143C8.97032 14.5 10.048 13.5201 10.1702 12.237L10.9546 4H11.5C11.7761 4 12 3.77614 12 3.5C12 3.22386 11.7761 3 11.5 3H9V2C9 1.17157 8.32843 0.5 7.5 0.5H4.5ZM8 3V2C8 1.72386 7.77614 1.5 7.5 1.5H4.5C4.22386 1.5 4 1.72386 4 2V3H8ZM2.04988 4H9.95012L9.17467 12.1422C9.10135 12.9121 8.45476 13.5 7.68143 13.5H4.31857C3.54524 13.5 2.89865 12.9121 2.82533 12.1422L2.04988 4Z",stroke:"none"}));var a=n(13578);const l=e=>i.createElement(o.a1,Object.assign({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},e),i.createElement("path",{d:"M14 11.5H16.7929L8.92289 19.37L10.4851 13.1213L10.6404 12.5H10H7.20711L15.0771 4.62999L13.5149 10.8787L13.3596 11.5H14Z",stroke:a.XY.Content.Secondary.Default,strokeMiterlimit:"4.25735"})),c=e=>i.createElement(o.a1,Object.assign({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},e),i.createElement("rect",{x:"4.5",y:"4.5",width:"6",height:"6",rx:"1.5",stroke:a.XY.Content.Secondary.Default}),i.createElement("rect",{x:"4.5",y:"13.5",width:"6",height:"6",rx:"1.5",stroke:a.XY.Content.Secondary.Default}),i.createElement("rect",{x:"13.5",y:"4.5",width:"6",height:"6",rx:"1.5",stroke:a.XY.Content.Secondary.Default}),i.createElement("path",{d:"M14.5513 15.8162L12.9269 16.3577C12.7902 16.4033 12.7902 16.5967 12.9269 16.6423L14.5513 17.1838C15.1485 17.3828 15.6172 17.8515 15.8162 18.4487L16.3577 20.0731C16.4033 20.2098 16.5967 20.2098 16.6423 20.0731L17.1838 18.4487C17.3828 17.8515 17.8515 17.3828 18.4487 17.1838L20.0731 16.6423C20.2098 16.5967 20.2098 16.4033 20.0731 16.3577L18.4487 15.8162C17.8515 15.6172 17.3828 15.1485 17.1838 14.5513L16.6423 12.9269C16.5967 12.7902 16.4033 12.7902 16.3577 12.9269L15.8162 14.5513C15.6172 15.1485 15.1485 15.6172 14.5513 15.8162Z",fill:a.XY.Content.Secondary.Default,stroke:a.XY.Content.Secondary.Default})),u=e=>i.createElement(o.a1,Object.assign({width:"32",height:"32",fill:a.XY.Content.Secondary.Default,viewBox:"0 0 32 32"},e),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24 16a8 8 0 1 1-16 0 8 8 0 0 1 16 0Zm1 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-11-3a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-4a1 1 0 0 0-1-1h-4Z",stroke:"none"})),d=e=>i.createElement(o.a1,Object.assign({width:"12",height:"15",viewBox:"0 0 12 15",fill:"#99A0B3"},e),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.5 0.5C0.776142 0.5 1 0.723858 1 1V2H11.5C11.7022 2 11.8845 2.12182 11.9619 2.30866C12.0393 2.4955 11.9966 2.71055 11.8536 2.85355L8.70711 6L11.8536 9.14645C11.9966 9.28945 12.0393 9.5045 11.9619 9.69134C11.8845 9.87818 11.7022 10 11.5 10H1V14.5C1 14.7761 0.776142 15 0.5 15C0.223858 15 0 14.7761 0 14.5V1C0 0.723858 0.223858 0.5 0.5 0.5ZM1 9H10.2929L7.64645 6.35355C7.45118 6.15829 7.45118 5.84171 7.64645 5.64645L10.2929 3H1V9Z",stroke:"none"})),m=e=>i.createElement(o.a1,Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),i.createElement("circle",{cx:"8",cy:"8",r:"5",stroke:"#C2C6D4",strokeWidth:"2"}),i.createElement("path",{d:"M13 8C13 8.76694 12.8236 9.5236 12.4844 10.2114C12.1452 10.8993 11.6523 11.4999 11.0438 11.9668C10.4354 12.4336 9.72765 12.7543 8.97545 12.9039C8.22325 13.0535 7.44671 13.0281 6.7059 12.8296",stroke:"#05735A",strokeWidth:"2",strokeLinecap:"round"})),p=e=>i.createElement(o.a1,Object.assign({width:"12",height:"12",viewBox:"0 0 12 12",fill:"none"},e),i.createElement("path",{stroke:"#fff",strokeLinecap:"round",strokeWidth:".857",d:"m4 4 2 2m2 2L6 6m0 0 2-2M6 6 4 8"})),h=e=>i.createElement(o.a1,Object.assign({width:"18",height:"18",viewBox:"0 0 18 18",fill:"#99A0B3"},e),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.0607 3.64286C9.5893 2.78571 8.4107 2.78571 7.93926 3.64286L3.16592 12.3214C2.69448 13.1786 3.28378 14.25 4.22667 14.25H13.7733C14.7162 14.25 15.3055 13.1786 14.8341 12.3214L10.0607 3.64286ZM8.25 6C8.25 5.58579 8.58579 5.25 9 5.25C9.41421 5.25 9.75 5.58579 9.75 6V9.75C9.75 10.1642 9.41421 10.5 9 10.5C8.58579 10.5 8.25 10.1642 8.25 9.75V6ZM9.75 12C9.75 12.4142 9.41421 12.75 9 12.75C8.58579 12.75 8.25 12.4142 8.25 12C8.25 11.5858 8.58579 11.25 9 11.25C9.41421 11.25 9.75 11.5858 9.75 12Z",stroke:"none"}));var g=n(20654);const f=e=>i.createElement(o.a1,Object.assign({width:"18",height:"18",viewBox:"0 0 18 18",fill:g.BO.BrandGreen60},e),i.createElement("path",{d:"M17.1056 9.44721L0.992696 17.5037C0.607324 17.6963 0.174955 17.3439 0.285972 16.9276L1.83393 11.1228C1.93505 10.7436 2.24864 10.4586 2.63576 10.394L9.52041 9.2466C9.79894 9.20018 9.79894 8.79982 9.52041 8.7534L2.63576 7.60596C2.24864 7.54144 1.93505 7.25644 1.83393 6.87723L0.285971 1.07239C0.174955 0.656082 0.607322 0.303661 0.992694 0.496347L17.1056 8.55279C17.4741 8.73705 17.4741 9.26295 17.1056 9.44721Z",stroke:"none"})),x=e=>i.createElement(o.a1,Object.assign({width:"26",height:"12",viewBox:"0 0 26 12",fill:g.BO.BrandGreen60},e),i.createElement("path",{d:"M19.3727 0.000327934C16.1036 0.000327934 13.4619 2.6865 13.4619 6.00016C13.4619 9.31383 16.1081 12 19.3727 12C22.6374 12 25.2836 9.31474 25.2836 6.00016C25.2836 2.68559 22.6374 0.000327934 19.3727 0.000327934ZM19.3727 9.73428C17.3867 9.73428 15.7766 8.06247 15.7766 6.00016C15.7766 3.93786 17.3867 2.26604 19.3727 2.26604C21.3587 2.26604 22.9688 3.93786 22.9688 6.00016C22.9688 8.06247 21.3587 9.73428 19.3727 9.73428Z",stroke:"none"}),i.createElement("path",{d:"M12.6746 6.42151H7.39304V8.29493H8.68981C9.01927 8.30238 9.34872 8.28019 9.67419 8.22864L9.69144 8.24589C9.08392 9.13311 7.98875 9.75788 6.70651 9.75788C4.63967 9.75788 2.99964 8.11512 2.99964 5.9938C2.99964 3.87247 4.63967 2.23062 6.70651 2.23062C7.30404 2.23157 7.89242 2.3776 8.42105 2.65615C8.94969 2.93471 9.40278 3.33745 9.74139 3.82979L11.593 2.55844C11.0537 1.76195 10.3255 1.11146 9.47342 0.665066C8.62136 0.218676 7.672 -0.00970839 6.71014 0.000316333C5.92081 -0.00586192 5.13814 0.145157 4.40777 0.444568C3.6774 0.74398 3.01395 1.18579 2.45608 1.74425C1.89822 2.3027 1.45712 2.96663 1.15848 3.69731C0.859842 4.428 0.709651 5.21083 0.716666 6.00015C0.716666 9.35378 3.34108 12 6.60571 12C8.60354 12 10.2626 10.8658 10.9192 9.61622L10.9519 9.63347C10.8546 10.0093 10.8049 10.3958 10.8039 10.784V11.7221L12.6755 11.7167V6.42242L12.6746 6.42151Z",stroke:"none"})),b=e=>i.createElement(o.a1,Object.assign({width:"79",height:"15",viewBox:"0 0 79 15",fill:a.XY.Content.Secondary.Default},e),i.createElement("path",{stroke:"none",d:"M7.76927 3.34994C7.12351 3.34994 6.60106 3.87239 6.60106 4.50309V4.51815C5.97131 3.82626 5.21824 3.28876 3.94178 3.28876C2.05251 3.28782 0.284668 4.67159 0.284668 7.13037V7.16143C0.284668 9.60515 2.02144 11.004 3.94272 11.004C5.18717 11.004 5.94118 10.4966 6.63213 9.66634V10.0664C6.63213 11.5415 5.87906 12.3106 4.28066 12.3106C3.40427 12.3106 2.68226 12.1261 2.00638 11.8192C1.89907 11.7731 1.77575 11.742 1.62231 11.742C1.09987 11.742 0.669676 12.1722 0.669676 12.6946C0.669676 13.1248 0.931369 13.4477 1.3305 13.6011C2.29914 13.9852 3.25177 14.1697 4.34279 14.1697C5.94118 14.1697 7.12445 13.8318 7.89353 13.0636C8.58541 12.3718 8.93841 11.2958 8.93841 9.82072V4.51721C8.93841 3.87145 8.41597 3.349 7.77021 3.349L7.76927 3.34994ZM6.63213 7.16143C6.63213 8.28351 5.75574 9.06765 4.6186 9.06765C3.48146 9.06765 2.62013 8.29951 2.62013 7.16143V7.13037C2.62013 6.00829 3.48052 5.22415 4.6186 5.22415C5.75668 5.22415 6.63213 6.00829 6.63213 7.13037V7.16143Z"}),i.createElement("path",{stroke:"none",d:"M14.3577 3.34988C13.6658 3.34988 13.1133 4.0879 12.7744 4.88709V4.51809C12.7744 3.87233 12.252 3.34988 11.6062 3.34988C10.9604 3.34988 10.438 3.87233 10.438 4.51809V10.6039C10.438 11.2496 10.9604 11.7721 11.6062 11.7721C12.252 11.7721 12.7744 11.2496 12.7744 10.6039V8.42183C12.7744 6.76224 13.4352 5.85479 14.6185 5.57898C15.0948 5.47167 15.4949 5.10266 15.4949 4.48797C15.4949 3.82714 15.0797 3.35083 14.3577 3.35083V3.34988Z"}),i.createElement("path",{stroke:"none",d:"M19.5002 3.34988C18.4092 3.34988 17.61 3.50332 16.872 3.78008C16.5029 3.91845 16.2422 4.27146 16.2422 4.68659C16.2422 5.22409 16.6724 5.63923 17.2108 5.63923C17.3181 5.63923 17.4104 5.62416 17.5488 5.57804C17.994 5.43966 18.5174 5.34741 19.1622 5.34741C20.3304 5.34741 20.9301 5.88491 20.9301 6.85355V6.99193C20.3464 6.79237 19.7468 6.65399 18.9165 6.65399C16.9651 6.65399 15.5964 7.48425 15.5964 9.28221V9.31328C15.5964 10.9427 16.872 11.8342 18.4242 11.8342C19.5614 11.8342 20.3455 11.4191 20.9141 10.7893V10.8044C20.9141 11.2957 21.3593 11.773 22.0361 11.773C22.6659 11.773 23.1733 11.2816 23.1733 10.6509V6.90062C23.1733 5.7936 22.8965 4.88709 22.2818 4.2724C21.6982 3.68877 20.7757 3.34988 19.5002 3.34988ZM20.9602 8.77483C20.9602 9.62016 20.2222 10.2198 19.1312 10.2198C18.3781 10.2198 17.8557 9.85078 17.8557 9.22103V9.18996C17.8557 8.45195 18.4703 8.05282 19.4691 8.05282C20.0377 8.05282 20.5601 8.17614 20.9602 8.36064V8.77577V8.77483Z"}),i.createElement("path",{stroke:"none",d:"M34.4752 3.28764C33.3531 3.28764 32.4927 3.7489 31.7698 4.59422C31.3396 3.76396 30.5253 3.28764 29.4494 3.28764C28.2661 3.28764 27.5592 3.9174 27.0207 4.60929V4.51703C27.0207 3.87127 26.4983 3.34883 25.8525 3.34883C25.2068 3.34883 24.6843 3.87127 24.6843 4.51703V10.6037C24.6843 11.2495 25.2068 11.7719 25.8525 11.7719C26.4983 11.7719 27.0207 11.2495 27.0207 10.6037V7.08407C27.0207 5.978 27.5582 5.40848 28.4346 5.40848C29.311 5.40848 29.8024 5.97705 29.8024 7.08407V10.6037C29.8024 11.2495 30.3248 11.7719 30.9706 11.7719C31.6164 11.7719 32.1388 11.2495 32.1388 10.6037V7.08407C32.1388 5.978 32.6763 5.40848 33.5527 5.40848C34.4291 5.40848 34.9205 5.97705 34.9205 7.08407V10.6037C34.9205 11.2495 35.4429 11.7719 36.0887 11.7719C36.7344 11.7719 37.2569 11.2495 37.2569 10.6037V6.31594C37.2569 4.33347 36.212 3.28858 34.4752 3.28858V3.28764Z"}),i.createElement("path",{stroke:"none",d:"M48.5558 3.28764C47.4337 3.28764 46.5733 3.7489 45.8504 4.59422C45.4202 3.76396 44.6059 3.28764 43.53 3.28764C42.3467 3.28764 41.6397 3.9174 41.1013 4.60929V4.51703C41.1013 3.87127 40.5789 3.34883 39.9331 3.34883C39.2873 3.34883 38.7649 3.87127 38.7649 4.51703V10.6037C38.7649 11.2495 39.2873 11.7719 39.9331 11.7719C40.5789 11.7719 41.1013 11.2495 41.1013 10.6037V7.08407C41.1013 5.978 41.6388 5.40848 42.5152 5.40848C43.3916 5.40848 43.883 5.97705 43.883 7.08407V10.6037C43.883 11.2495 44.4054 11.7719 45.0512 11.7719C45.6969 11.7719 46.2194 11.2495 46.2194 10.6037V7.08407C46.2194 5.978 46.7569 5.40848 47.6333 5.40848C48.5097 5.40848 49.001 5.97705 49.001 7.08407V10.6037C49.001 11.2495 49.5235 11.7719 50.1692 11.7719C50.815 11.7719 51.3374 11.2495 51.3374 10.6037V6.31594C51.3374 4.33347 50.2926 3.28858 48.5558 3.28858V3.28764Z"}),i.createElement("path",{stroke:"none",d:"M56.11 3.34988C55.019 3.34988 54.2198 3.50332 53.4818 3.78008C53.1128 3.91845 52.8521 4.27146 52.8521 4.68659C52.8521 5.22409 53.2822 5.63923 53.8207 5.63923C53.928 5.63923 54.0203 5.62416 54.1586 5.57804C54.6039 5.43966 55.1273 5.34741 55.7721 5.34741C56.9403 5.34741 57.5399 5.88491 57.5399 6.85355V6.99193C56.9563 6.79237 56.3567 6.65399 55.5264 6.65399C53.5741 6.65399 52.2063 7.48425 52.2063 9.28221V9.31328C52.2063 10.9427 53.4818 11.8342 55.0341 11.8342C56.1712 11.8342 56.9554 11.4191 57.5239 10.7893V10.8044C57.5239 11.2957 57.9692 11.773 58.646 11.773C59.2758 11.773 59.7831 11.2816 59.7831 10.6509V6.90062C59.7831 5.7936 59.5064 4.88709 58.8917 4.2724C58.3081 3.68877 57.3856 3.34988 56.11 3.34988ZM57.5701 8.77483C57.5701 9.62016 56.832 10.2198 55.741 10.2198C54.988 10.2198 54.4655 9.85078 54.4655 9.22103V9.18996C54.4655 8.45195 55.0802 8.05282 56.079 8.05282C56.6475 8.05282 57.17 8.17614 57.5701 8.36064V8.77577V8.77483Z"}),i.createElement("path",{stroke:"none",d:"M65.1976 3.34988C64.5057 3.34988 63.9522 4.0879 63.6142 4.88709V4.51809C63.6142 3.87233 63.0918 3.34988 62.446 3.34988C61.8003 3.34988 61.2778 3.87233 61.2778 4.51809V10.6039C61.2778 11.2496 61.8003 11.7721 62.446 11.7721C63.0918 11.7721 63.6142 11.2496 63.6142 10.6039V8.42183C63.6142 6.76224 64.2751 5.85479 65.4583 5.57898C65.9346 5.47167 66.3347 5.10266 66.3347 4.48797C66.3347 3.82714 65.9196 3.35083 65.1976 3.35083V3.34988Z"}),i.createElement("path",{stroke:"none",d:"M68.2759 0.367645C67.6301 0.367645 67.1077 0.890089 67.1077 1.53585V10.6038C67.1077 11.2495 67.6301 11.772 68.2759 11.772C68.9216 11.772 69.4441 11.2495 69.4441 10.6038V1.53585C69.4441 0.890089 68.9216 0.367645 68.2759 0.367645Z"}),i.createElement("path",{stroke:"none",d:"M77.1111 3.34988C76.5115 3.34988 76.1736 3.74901 75.9891 4.24133L74.2673 9.02146L72.4844 4.22627C72.2849 3.67276 71.9469 3.34988 71.3624 3.34988C70.7166 3.34988 70.2092 3.81114 70.2092 4.47196C70.2092 4.6254 70.2704 4.85603 70.3325 5.00947L73.1453 11.5264L73.0681 11.7109C72.8525 12.126 72.6529 12.2023 72.2378 12.2023C72.0684 12.2023 71.946 12.1712 71.7464 12.11C71.6542 12.0789 71.5469 12.0488 71.3624 12.0488C70.8861 12.0488 70.4399 12.4329 70.4399 13.0015C70.4399 13.57 70.8399 13.8468 71.1779 13.9701C71.5619 14.1085 71.9309 14.1857 72.4534 14.1857C73.8522 14.1857 74.5432 13.5559 75.235 11.8803L78.109 4.97935C78.1551 4.87203 78.2163 4.61034 78.2163 4.42584C78.2163 3.81114 77.7089 3.34988 77.1093 3.34988H77.1111Z"})),v=()=>i.createElement("svg",{width:"240",height:"35",viewBox:"0 0 240 35",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{d:"M209.923 15.8961H197.325V20.5059H200.418C201.204 20.5238 201.989 20.4701 202.766 20.3428L202.807 20.3852C201.358 22.5683 198.746 24.1056 195.687 24.1056C190.757 24.1056 186.845 20.0635 186.845 14.8437C186.845 9.62393 190.757 5.58174 195.687 5.58174C197.113 5.58398 198.514 5.94373 199.775 6.62748C201.035 7.31123 202.116 8.30558 202.926 9.51667L207.343 6.39063C206.054 4.42875 204.315 2.82438 202.279 1.72725C200.245 0.627883 197.977 0.0692616 195.685 0.0960754C193.807 0.080434 191.94 0.449124 190.2 1.18651C188.461 1.92165 186.88 3.00985 185.55 4.38406C184.22 5.75827 183.169 7.39168 182.456 9.19044C181.746 10.9892 181.384 12.9153 181.402 14.8593C181.402 23.1113 187.662 29.6226 195.449 29.6226C200.219 29.6226 204.172 26.8317 205.738 23.7571L205.816 23.7995C205.584 24.7246 205.465 25.6743 205.463 26.6306V28.9388L209.927 28.9254H209.923V15.8984V15.8961Z",fill:"white"}),i.createElement("path",{d:"M225.901 0C218.113 0 211.801 6.62972 211.801 14.8102C211.801 22.9906 218.113 29.6204 225.901 29.6204C233.688 29.6204 240 22.9906 240 14.8102C240 6.62972 233.688 0 225.901 0ZM226.018 24.1191C221.187 24.1191 217.271 20.0054 217.271 14.9308C217.271 9.85632 221.187 5.74263 226.018 5.74263C230.848 5.74263 234.765 9.85632 234.765 14.9308C234.765 20.0054 230.848 24.1191 226.018 24.1191Z",fill:"white"}),i.createElement("path",{d:"M17.223 8.39048C15.737 8.39048 14.5348 9.63062 14.5348 11.1277V11.1635C13.0857 9.52113 11.3528 8.24524 8.41547 8.24524C4.06802 8.24301 0 11.5277 0 17.3642V17.4379C0 23.2386 3.99653 26.5591 8.41763 26.5591C11.2813 26.5591 13.0164 25.3547 14.6063 23.3839V24.3335C14.6063 27.835 12.8734 29.6606 9.19528 29.6606C7.1786 29.6606 5.51717 29.2226 3.96188 28.4942C3.71494 28.3847 3.43117 28.3109 3.07809 28.3109C1.87588 28.3109 0.885953 29.3321 0.885953 30.5722C0.885953 31.5934 1.48814 32.3598 2.40659 32.724C4.63555 33.6357 6.82768 34.0737 9.33824 34.0737C13.0164 34.0737 15.7392 33.2715 17.5089 31.4482C19.1011 29.8058 19.9134 27.2518 19.9134 23.7503V11.1612C19.9134 9.62839 18.7111 8.38825 17.2252 8.38825L17.223 8.39048ZM14.6063 17.4379C14.6063 20.1014 12.5896 21.9628 9.97293 21.9628C7.35622 21.9628 5.3742 20.1394 5.3742 17.4379V17.3642C5.3742 14.7007 7.35406 12.8393 9.97293 12.8393C12.5918 12.8393 14.6063 14.7007 14.6063 17.3642V17.4379Z",fill:"white"}),i.createElement("path",{d:"M32.3836 8.39038C30.7914 8.39038 29.5199 10.1422 28.7401 12.0393V11.1634C28.7401 9.63052 27.5379 8.39038 26.0519 8.39038C24.5659 8.39038 23.3637 9.63052 23.3637 11.1634V25.6093C23.3637 27.1422 24.5659 28.3823 26.0519 28.3823C27.5379 28.3823 28.7401 27.1422 28.7401 25.6093V20.4298C28.7401 16.4904 30.2607 14.3364 32.9836 13.6816C34.0797 13.4269 35.0003 12.551 35.0003 11.0919C35.0003 9.52327 34.045 8.39262 32.3836 8.39262V8.39038Z",fill:"white"}),i.createElement("path",{d:"M44.2178 8.39038C41.7072 8.39038 39.8682 8.7546 38.1699 9.41154C37.3208 9.74001 36.7207 10.5779 36.7207 11.5634C36.7207 12.8392 37.7107 13.8247 38.9497 13.8247C39.1967 13.8247 39.4089 13.7889 39.7274 13.6794C40.7519 13.3509 41.9563 13.132 43.4401 13.132C46.1283 13.132 47.5081 14.4079 47.5081 16.7071V17.0356C46.1651 16.5619 44.7853 16.2334 42.8748 16.2334C38.3843 16.2334 35.2348 18.2042 35.2348 22.4721V22.5459C35.2348 26.4138 38.1699 28.5298 41.7419 28.5298C44.3586 28.5298 46.163 27.5444 47.4713 26.0495V26.0853C47.4713 27.2517 48.4959 28.3846 50.0534 28.3846C51.5025 28.3846 52.6701 27.2182 52.6701 25.7211V16.8189C52.6701 14.1911 52.0332 12.0393 50.6187 10.5802C49.2757 9.1948 47.1529 8.39038 44.2178 8.39038ZM47.5775 21.2677C47.5775 23.2743 45.8792 24.6977 43.3686 24.6977C41.6357 24.6977 40.4335 23.8217 40.4335 22.3269V22.2531C40.4335 20.5013 41.848 19.5539 44.1463 19.5539C45.4546 19.5539 46.6568 19.8466 47.5775 20.2846V21.27V21.2677Z",fill:"white"}),i.createElement("path",{d:"M78.6766 8.24286C76.0945 8.24286 74.1147 9.33776 72.4511 11.3443C71.4611 9.37351 69.5874 8.24286 67.1115 8.24286C64.3887 8.24286 62.7619 9.73773 61.5229 11.3801V11.1611C61.5229 9.62824 60.3207 8.3881 58.8347 8.3881C57.3487 8.3881 56.1465 9.62824 56.1465 11.1611V25.6093C56.1465 27.1422 57.3487 28.3823 58.8347 28.3823C60.3207 28.3823 61.5229 27.1422 61.5229 25.6093V17.2545C61.5229 14.629 62.7597 13.2772 64.7764 13.2772C66.7931 13.2772 67.9238 14.6268 67.9238 17.2545V25.6093C67.9238 27.1422 69.126 28.3823 70.612 28.3823C72.098 28.3823 73.3002 27.1422 73.3002 25.6093V17.2545C73.3002 14.629 74.5371 13.2772 76.5537 13.2772C78.5704 13.2772 79.7011 14.6268 79.7011 17.2545V25.6093C79.7011 27.1422 80.9034 28.3823 82.3893 28.3823C83.8753 28.3823 85.0775 27.1422 85.0775 25.6093V15.4312C85.0775 10.7254 82.6731 8.24509 78.6766 8.24509V8.24286Z",fill:"white"}),i.createElement("path",{d:"M111.077 8.24286C108.495 8.24286 106.516 9.33776 104.852 11.3443C103.862 9.37351 101.988 8.24286 99.5124 8.24286C96.7895 8.24286 95.1628 9.73773 93.9237 11.3801V11.1611C93.9237 9.62824 92.7215 8.3881 91.2355 8.3881C89.7496 8.3881 88.5474 9.62824 88.5474 11.1611V25.6093C88.5474 27.1422 89.7496 28.3823 91.2355 28.3823C92.7215 28.3823 93.9237 27.1422 93.9237 25.6093V17.2545C93.9237 14.629 95.1606 13.2772 97.1773 13.2772C99.194 13.2772 100.325 14.6268 100.325 17.2545V25.6093C100.325 27.1422 101.527 28.3823 103.013 28.3823C104.499 28.3823 105.701 27.1422 105.701 25.6093V17.2545C105.701 14.629 106.938 13.2772 108.955 13.2772C110.971 13.2772 112.102 14.6268 112.102 17.2545V25.6093C112.102 27.1422 113.304 28.3823 114.79 28.3823C116.276 28.3823 117.478 27.1422 117.478 25.6093V15.4312C117.478 10.7254 115.074 8.24509 111.077 8.24509V8.24286Z",fill:"white"}),i.createElement("path",{d:"M128.461 8.39038C125.95 8.39038 124.111 8.7546 122.413 9.41154C121.564 9.74001 120.964 10.5779 120.964 11.5634C120.964 12.8392 121.954 13.8247 123.193 13.8247C123.44 13.8247 123.652 13.7889 123.97 13.6794C124.995 13.3509 126.199 13.132 127.683 13.132C130.371 13.132 131.751 14.4079 131.751 16.7071V17.0356C130.408 16.5619 129.028 16.2334 127.118 16.2334C122.625 16.2334 119.478 18.2042 119.478 22.4721V22.5459C119.478 26.4138 122.413 28.5298 125.985 28.5298C128.602 28.5298 130.406 27.5444 131.714 26.0495V26.0853C131.714 27.2517 132.739 28.3846 134.296 28.3846C135.745 28.3846 136.913 27.2182 136.913 25.7211V16.8189C136.913 14.1911 136.276 12.0393 134.862 10.5802C133.519 9.1948 131.396 8.39038 128.461 8.39038ZM131.82 21.2677C131.82 23.2743 130.122 24.6977 127.612 24.6977C125.879 24.6977 124.676 23.8217 124.676 22.3269V22.2531C124.676 20.5013 126.091 19.5539 128.389 19.5539C129.698 19.5539 130.9 19.8466 131.82 20.2846V21.27V21.2677Z",fill:"white"}),i.createElement("path",{d:"M149.373 8.39038C147.781 8.39038 146.507 10.1422 145.73 12.0393V11.1634C145.73 9.63052 144.527 8.39038 143.041 8.39038C141.555 8.39038 140.353 9.63052 140.353 11.1634V25.6093C140.353 27.1422 141.555 28.3823 143.041 28.3823C144.527 28.3823 145.73 27.1422 145.73 25.6093V20.4298C145.73 16.4904 147.25 14.3364 149.973 13.6816C151.069 13.4269 151.99 12.551 151.99 11.0919C151.99 9.52327 151.034 8.39262 149.373 8.39262V8.39038Z",fill:"white"}),i.createElement("path",{d:"M156.456 1.31152C154.97 1.31152 153.768 2.55166 153.768 4.08452V25.6093C153.768 27.1422 154.97 28.3823 156.456 28.3823C157.942 28.3823 159.144 27.1422 159.144 25.6093V4.08452C159.144 2.55166 157.942 1.31152 156.456 1.31152Z",fill:"white"}),i.createElement("path",{d:"M176.788 8.39038C175.408 8.39038 174.63 9.3378 174.206 10.5064L170.244 21.8532L166.141 10.4707C165.682 9.15681 164.904 8.39038 163.559 8.39038C162.073 8.39038 160.906 9.48528 160.906 11.0539C160.906 11.4181 161.046 11.9656 161.189 12.3298L167.662 27.7991L167.484 28.2371C166.988 29.2225 166.529 29.4035 165.574 29.4035C165.184 29.4035 164.902 29.3298 164.443 29.1845C164.231 29.1108 163.984 29.0393 163.559 29.0393C162.463 29.0393 161.436 29.9509 161.436 31.3006C161.436 32.6502 162.357 33.3071 163.135 33.5999C164.018 33.9283 164.867 34.1116 166.07 34.1116C169.289 34.1116 170.879 32.6167 172.471 28.6393L179.084 12.2583C179.19 12.0035 179.331 11.3824 179.331 10.9444C179.331 9.48528 178.163 8.39038 176.783 8.39038H176.788Z",fill:"white"})),y=e=>i.createElement(o.a1,Object.assign({width:"24",height:"24",fill:"none",viewBox:"0.5 0 24 24"},e),i.createElement("path",{d:"M12.5 23.25C18.7132 23.25 23.75 18.2132 23.75 12C23.75 5.7868 18.7132 0.75 12.5 0.75C6.2868 0.75 1.25 5.7868 1.25 12C1.25 18.2132 6.2868 23.25 12.5 23.25Z",fill:"url(#paint0_linear_4506_11023_disheartening_emoji)",stroke:"none"}),i.createElement("path",{d:"M8.97126 19.5491C10.9569 18.1193 14.0431 18.1193 16.0295 19.5491C16.3344 19.7674 16.5155 19.5315 16.4184 19.3455C14.4879 15.6555 10.5121 15.6555 8.58164 19.3455C8.48451 19.5315 8.66564 19.7674 8.97126 19.5491Z",fill:"#302C3B",stroke:"none"}),i.createElement("path",{d:"M19.895 12.8239C17.9806 13.5491 15.4865 12.8809 14.1909 11.2954C13.9925 11.0531 13.7945 11.2046 13.8328 11.376C14.5936 14.775 17.807 15.6364 20.1654 13.0721C20.2839 12.9435 20.1886 12.7133 19.895 12.8239Z",fill:"#302C3B",stroke:"none"}),i.createElement("path",{d:"M10.8091 11.2954C9.51351 12.8813 7.01976 13.5491 5.10501 12.8239C4.81176 12.7133 4.71614 12.9431 4.83464 13.0721C7.19301 15.6364 10.4064 14.775 11.1673 11.376C11.2059 11.2046 11.0079 11.0531 10.8091 11.2954Z",fill:"#302C3B",stroke:"none"}),i.createElement("defs",null,i.createElement("linearGradient",{id:"paint0_linear_4506_11023_disheartening_emoji",x1:"12.5002",y1:"23.25",x2:"12.5002",y2:"0.750188",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"#FFA027"}),i.createElement("stop",{offset:"0.2723",stopColor:"#FFC151"}),i.createElement("stop",{offset:"0.7633",stopColor:"#FFC93F"}),i.createElement("stop",{offset:"1",stopColor:"#FFE261"})))),C=e=>i.createElement(o.a1,Object.assign({width:"24",height:"24",fill:"none",viewBox:"0.5 0 24 24"},e),i.createElement("path",{d:"M12.5 23.25C18.7132 23.25 23.75 18.2132 23.75 12C23.75 5.7868 18.7132 0.75 12.5 0.75C6.2868 0.75 1.25 5.7868 1.25 12C1.25 18.2132 6.2868 23.25 12.5 23.25Z",fill:"url(#paint0_linear_4506_11027_neutral_emoji)",stroke:"none"}),i.createElement("path",{d:"M17.3266 17.25H7.6726C6.7336 17.25 6.7336 15.75 7.6726 15.75H17.3266C18.2656 15.75 18.2656 17.25 17.3266 17.25Z",fill:"#302C3B",stroke:"none"}),i.createElement("path",{d:"M8.7496 12.1875C9.68158 12.1875 10.4371 11.1801 10.4371 9.9375C10.4371 8.69486 9.68158 7.6875 8.7496 7.6875C7.81762 7.6875 7.0621 8.69486 7.0621 9.9375C7.0621 11.1801 7.81762 12.1875 8.7496 12.1875Z",fill:"#302C3B",stroke:"none"}),i.createElement("path",{d:"M16.2496 12.1875C17.1816 12.1875 17.9371 11.1801 17.9371 9.9375C17.9371 8.69486 17.1816 7.6875 16.2496 7.6875C15.3176 7.6875 14.5621 8.69486 14.5621 9.9375C14.5621 11.1801 15.3176 12.1875 16.2496 12.1875Z",fill:"#302C3B",stroke:"none"}),i.createElement("defs",null,i.createElement("linearGradient",{id:"paint0_linear_4506_11027_neutral_emoji",x1:"12.5002",y1:"23.25",x2:"12.5002",y2:"0.750188",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"#FFA027"}),i.createElement("stop",{offset:"0.2723",stopColor:"#FFC151"}),i.createElement("stop",{offset:"0.7633",stopColor:"#FFC93F"}),i.createElement("stop",{offset:"1",stopColor:"#FFE261"})))),k=e=>i.createElement(o.a1,Object.assign({width:"24",height:"24",fill:"none",viewBox:"0.5 0 24 24"},e),i.createElement("path",{d:"M12.5 23.25C18.7132 23.25 23.75 18.2132 23.75 12C23.75 5.7868 18.7132 0.75 12.5 0.75C6.2868 0.75 1.25 5.7868 1.25 12C1.25 18.2132 6.2868 23.25 12.5 23.25Z",fill:"url(#paint0_linear_11994_841_smiling_emoji)",stroke:"none"}),i.createElement("path",{d:"M5.82085 15.8453C7.89191 15.8453 9.57085 14.1663 9.57085 12.0953C9.57085 10.0242 7.89191 8.34528 5.82085 8.34528C3.74978 8.34528 2.07085 10.0242 2.07085 12.0953C2.07085 14.1663 3.74978 15.8453 5.82085 15.8453Z",fill:"url(#paint1_radial_11994_841_smiling_emoji)",stroke:"none"}),i.createElement("path",{d:"M19.1792 15.75C21.2502 15.75 22.9292 14.0711 22.9292 12C22.9292 9.92893 21.2502 8.25 19.1792 8.25C17.1081 8.25 15.4292 9.92893 15.4292 12C15.4292 14.0711 17.1081 15.75 19.1792 15.75Z",fill:"url(#paint2_radial_11994_841_smiling_emoji)",stroke:"none"}),i.createElement("path",{d:"M14.0844 9.3015C15.5 7.72425 17.7012 7.7235 19.1176 9.3015C19.3344 9.543 19.4634 9.282 19.3944 9.07725C18.0181 5.0055 15.1831 5.0055 13.8069 9.07725C13.7379 9.282 13.8669 9.54262 14.0844 9.3015Z",fill:"#302C3B",stroke:"none"}),i.createElement("path",{d:"M5.88312 9.3015C7.29949 7.72425 9.49999 7.7235 10.9164 9.3015C11.1331 9.543 11.2629 9.282 11.1931 9.07725C9.81687 5.0055 6.98187 5.0055 5.60562 9.07725C5.53699 9.282 5.66562 9.54262 5.88312 9.3015Z",fill:"#302C3B",stroke:"none"}),i.createElement("path",{d:"M17.1961 13.647C14.3352 15.7061 10.6614 15.705 7.802 13.647C7.397 13.356 7.15512 13.6706 7.28487 13.9178C9.4805 18.1151 15.5187 18.1144 17.7147 13.9178C17.8437 13.6703 17.6026 13.3556 17.1961 13.647Z",fill:"#302C3B",stroke:"none"}),i.createElement("defs",null,i.createElement("linearGradient",{id:"paint0_linear_11994_841_smiling_emoji",x1:"12.5002",y1:"23.25",x2:"12.5002",y2:"0.750188",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"#FFA027"}),i.createElement("stop",{offset:"0.2723",stopColor:"#FFC151"}),i.createElement("stop",{offset:"0.7633",stopColor:"#FFC93F"}),i.createElement("stop",{offset:"1",stopColor:"#FFE261"})),i.createElement("radialGradient",{id:"paint1_radial_11994_841_smiling_emoji",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(5.82103 12.0952) scale(3.75 3.75)"},i.createElement("stop",{stopColor:"#F18D84"}),i.createElement("stop",{offset:"0.2514",stopColor:"#F29180",stopOpacity:"0.7486"}),i.createElement("stop",{offset:"0.5118",stopColor:"#F49E73",stopOpacity:"0.4882"}),i.createElement("stop",{offset:"0.7755",stopColor:"#F8B25F",stopOpacity:"0.2245"}),i.createElement("stop",{offset:"1",stopColor:"#FDCA47",stopOpacity:"0"})),i.createElement("radialGradient",{id:"paint2_radial_11994_841_smiling_emoji",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(19.179 12) scale(3.75)"},i.createElement("stop",{stopColor:"#F18D84"}),i.createElement("stop",{offset:"0.2514",stopColor:"#F29180",stopOpacity:"0.7486"}),i.createElement("stop",{offset:"0.5118",stopColor:"#F49E73",stopOpacity:"0.4882"}),i.createElement("stop",{offset:"0.7755",stopColor:"#F8B25F",stopOpacity:"0.2245"}),i.createElement("stop",{offset:"1",stopColor:"#FDCA47",stopOpacity:"0"}))));var w=n(62172);const S=e=>i.createElement(o.a1,Object.assign({width:"24",height:"24",viewBox:"0 0 24 24",fill:w.Green30},e),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22ZM18.2071 9.20711C18.5976 8.81658 18.5976 8.18342 18.2071 7.79289C17.8166 7.40237 17.1834 7.40237 16.7929 7.79289L10 14.5858L8.20711 12.7929C7.81658 12.4024 7.18342 12.4024 6.79289 12.7929C6.40237 13.1834 6.40237 13.8166 6.79289 14.2071L10 17.4142L18.2071 9.20711Z",stroke:"none"}))},15906:(e,t,n)=>{n.d(t,{vw:()=>_,Ct:()=>ce,zx:()=>i,j4:()=>o.j4,xx:()=>he,XR:()=>o.XR,CT:()=>o.CT,T3:()=>o.T3,rN:()=>o.rN,Pe:()=>o.Pe,k8:()=>o.k8,L3:()=>o.L3,Ho:()=>o.Ho,R6:()=>o.R6,kc:()=>o.kc,Ph:()=>se,cv:()=>o.cv,OJ:()=>o.OJ,wN:()=>o.wN,b:()=>C,pY:()=>q,uA:()=>o.uA,T6:()=>o.T6});var i,o=n(18599),r=n(27378),s=n(64757),a=n(12187),l=n(74911),c=n(20654),u=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n};!function(e){e.Primary=e=>{var{className:t,compact:n,theme:i,children:o,onClick:d,size:m}=e,p=u(e,["className","compact","theme","children","onClick","size"]);return r.createElement(s.zx.Primary,Object.assign({},(0,a.Sh)((0,l.P)({compact:n,theme:null!=i?i:"light",size:null!=m?m:"large",type:"primary"}),t),p,{onClick:(0,c.m)(d)}),o)},e.Secondary=e=>{var{className:t,compact:n,theme:i,children:o,onClick:d,size:m}=e,p=u(e,["className","compact","theme","children","onClick","size"]);return r.createElement(s.zx.Ghost,Object.assign({},(0,a.Sh)((0,l.P)({compact:n,theme:null!=i?i:"light",size:null!=m?m:"large",type:"secondary"}),t),p,{onClick:(0,c.m)(d)}),o)},e.Tertiary=e=>{var{className:t,compact:n,theme:i,children:o,onClick:d,size:m}=e,p=u(e,["className","compact","theme","children","onClick","size"]);return r.createElement(s.zx.Tertiary,Object.assign({},(0,a.Sh)((0,l.P)({compact:n,theme:null!=i?i:"light",size:null!=m?m:"large",type:"tertiary"}),t),p,{onClick:(0,c.m)(d)}),o)}}(i||(i={}));var d=n(88392),m=n(89894),p=n(15073),h=n(5114),g=n(31542),f=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n};const x="#161719",b="#646B81",v=e=>{var{children:t,style:n,dataGrammarlyPart:i="ui-kit-iframe"}=e,o=f(e,["children","style","dataGrammarlyPart"]);const[s,a]=r.useState(null),l=r.useCallback((e=>{var t,n;let i=null;"contentDocument"in e.target&&(i=null!==(n=null===(t=e.target.contentDocument)||void 0===t?void 0:t.body)&&void 0!==n?n:null),a(i),i&&(i.style.margin="0",i.style.height="100vh",i.style.overflowY="hidden")}),[]),c=r.useContext(p.u.Context);return r.useEffect((()=>{const e=c.subscribe((e=>{s&&p.u.setRootCssVar(s,h.some(e))}));return()=>e.unsubscribe()}),[s]),r.createElement("iframe",Object.assign({},o,{style:Object.assign({},n),onLoad:l,srcDoc:"<html><body></body></html>","data-grammarly-part":i}),s&&(0,g.createPortal)(t,s))},y=1.375,C=({fitContentHeight:e,text:t,onChange:n,placeholder:i,disabled:o,className:s,onFocus:a,onBlur:l,onKeyPressEnter:c,autofocus:u,onKeyUpEscape:p})=>{const h=y*(i?i.length:1),[g,f]=r.useState({kind:"rem",value:h}),[C,k]=r.useState(null);return r.useEffect((()=>{C&&void 0!==u&&(C.focus(),C.selectionStart=t.length,C.selectionEnd=t.length)}),[u,C]),r.useLayoutEffect((()=>{if(""===t)f({kind:"rem",value:h});else{const e=null==C?void 0:C.scrollHeight;f(e?{kind:"px",value:e}:{kind:"rem",value:h})}}),[t,C,i]),r.createElement(v,{className:s,style:{height:e?"rem"===g.kind?m.ux.rem(g.value):m.ux.px(g.value):void 0}},r.createElement("style",{dangerouslySetInnerHTML:{__html:`\n      .container {\n        position: relative;\n        width: 100%;\n        height: 100%;\n      }\n      .textarea {\n        box-sizing: border-box;\n        border-radius: ${m.ux.rem(d.xB)};\n        overflow-y: auto;\n        width: 100%;\n        height: 100%;\n        border: none;\n        padding: 0px;\n        background: transparent;\n        resize: none;\n        font-family: Inter, sans-serif;\n        font-size: ${m.ux.rem(.875)};\n        font-weight: 400;\n        color: ${x};\n      }\n      .textarea::placeholder {\n        color: ${b};\n      }\n      .textarea:focus {\n        outline: none;\n      }\n      .placeholder {\n        position: absolute;\n        top: 0px;\n        left: 0px;\n        width: 100%;\n        height: 100%;\n        background: transparent;\n        font-family: Inter, sans-serif;\n        font-size: ${m.ux.rem(.875)};\n        font-weight: 400;\n        z-index: -1;\n        color: ${b};\n      }\n      `}}),r.createElement("div",{className:"container"},r.createElement("textarea",{className:"textarea",style:{lineHeight:m.ux.rem(y)},value:t,ref:k,onChange:e=>n(e.target.value),placeholder:1===(null==i?void 0:i.length)?i[0]:void 0,disabled:o,onFocus:()=>null==a?void 0:a(),onBlur:()=>null==l?void 0:l(),onKeyPress:e=>{c&&"Enter"===e.key&&!e.shiftKey&&(e.preventDefault(),e.stopPropagation(),c())},onKeyUp:e=>{p&&"Escape"===e.key&&(e.preventDefault(),e.stopPropagation(),p())}}),((null==i?void 0:i.length)||0)>1&&""===t?r.createElement("div",{className:"placeholder",style:{lineHeight:m.ux.rem(y)}},(i||[]).map(((e,t)=>r.createElement(r.Fragment,{key:t},e,r.createElement("br",null))))):null))};var k=n(22232),w=function(){function e(e,t,n){void 0===t&&(t=0),void 0===n&&(n=!0),this._capacity=e,this._start=t,this._allowOverflow=n,this._nextId=t}return Object.defineProperty(e.prototype,"id",{get:function(){return this._nextId},enumerable:!1,configurable:!0}),e.prototype.newId=function(){var e=this._nextId;if(e>this._capacity){if(!this._allowOverflow)throw new k.ej("ids limit reached: "+this._capacity);this._nextId=e=0}return this._nextId++,e},e.prototype.reset=function(){this._nextId=this._start},e}();const S=new w(999999);var _;!function(e){e.create=function(e){return null!=e?e:S.newId()}}(_||(_={}));var E=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n};const O=e=>{var{text:t,onChange:n,placeholder:i,disabled:o,className:s,onFocus:a,onBlur:l,onKeyPressEnter:c,autofocus:u,onKeyUpEscape:p}=e,h=E(e,["text","onChange","placeholder","disabled","className","onFocus","onBlur","onKeyPressEnter","autofocus","onKeyUpEscape"]);const[g,f]=r.useState(null);return r.useEffect((()=>{g&&void 0!==u&&g.focus()}),[u,g]),r.createElement(v,{className:s,style:{height:m.ux.rem(1.375)}},r.createElement("style",{dangerouslySetInnerHTML:{__html:`\n      .textBox {\n        box-sizing: border-box;\n        border-radius: ${m.ux.rem(d.xB)};\n        overflow-y: auto;\n        width: 100%;\n        height: 100%;\n        border: none;\n        padding: 0;\n        background: transparent;\n        resize: none;\n        font-family: Inter, sans-serif;\n        font-size: ${m.ux.rem(.875)};\n        font-weight: 400;\n        color: ${x};\n      }\n      .textBox::placeholder {\n        color: ${b};\n      }\n      .textBox:focus {\n        outline: none;\n      }\n      `}}),r.createElement("input",Object.assign({},h,{className:"textBox",style:{lineHeight:m.ux.rem(1.375)},value:t,ref:f,onChange:e=>n(e.target.value),placeholder:i,disabled:o,onFocus:()=>null==a?void 0:a(),onBlur:()=>null==l?void 0:l(),onKeyPress:e=>{c&&"Enter"===e.key&&!e.shiftKey&&(e.preventDefault(),e.stopPropagation(),c())},onKeyDown:e=>{p&&"Escape"===e.key&&(e.preventDefault(),e.stopPropagation(),p())}})))};var I=n(64015),A=n(90845),R=n(31278),P=n(32952),U=n(78674),B=n(85985),z=n(2834),T=n(74204),G=n(57050),F=n(9546),j=n(13578),N=n(62172);const V={padding:`${m.ux.rem(F.F2)} ${m.ux.rem(F.F2+F.Ze)} ${m.ux.rem(F.F2)} ${m.ux.rem(F.qp)}`,border:`1px solid ${j.S5.InteractiveNeutral.Primary.Default}`,borderRadius:m.ux.rem(d.xB),width:m.ux.rem(15),height:m.ux.rem(2),boxSizing:"border-box",position:"relative"},D={position:"absolute",right:m.ux.rem(F.x),top:m.ux.rem(.1875),border:"none",background:"transparent",display:"flex",alignItems:"center",cursor:"pointer",width:m.ux.rem(1.5),height:m.ux.rem(1.5),padding:0},M=Object.assign(Object.assign({},c.Es.iconSizeRems(1.5)),{$nest:{"& svg":{stroke:j.XY.Content.Secondary.Default}}}),$=e=>m.ux.color(N.BlueGray40).toRGBA().fade(e).toString(),L={padding:m.ux.rem(F.F2),background:"white",boxShadow:`0px 0px 0px 0.5px ${N.BlueGray40}, 0px 0px 2px 0.5px ${$(.5)}, 0px 1px 6px 0.5px ${$(.25)}`,borderRadius:m.ux.rem(d.xB),width:m.ux.rem(15),boxSizing:"border-box",overflowY:"auto",maxHeight:m.ux.rem(8.125),zIndex:9999,$nest:{"& > ul":{listStyle:"none",padding:0,margin:0,$nest:{"& > li":{padding:0,margin:0}}}}},H={border:"none",background:"transparent",width:"100%",cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",fontSize:m.ux.rem(.875),lineHeight:m.ux.rem(1.375),color:j.XY.Content.Primary.Default,padding:`${m.ux.rem(.1875)} ${m.ux.rem(F.qp)}`,borderRadius:m.ux.rem(d.xB),display:"flex",justifyContent:"flex-start",$nest:{"&:hover":{background:N.Blue0},"& mark":{backgroundColor:"unset",fontWeight:"bold"}}},K={width:m.ux.percent(100),border:"none"},Z=m.ux.prefixedStylesheet("select",{container:[V],clearBtn:[D],closeIcon:[M],menu:[L],menuOption:[H],menuOptionPart:[{whiteSpace:"pre"}],inputIframe:[K]}),W=new w(999999);function q({text:e,placeholder:t,clearButton:n,selectOnBlur:i,label:o,options:s,className:l,filterBy:u=((e,t)=>o(e).toLowerCase().includes(t.toLowerCase())),onInputChange:d,onSelectionChange:m}){const[p,h]=r.useState(!1),g=r.useRef(W.newId().toString()),[f,x]=r.useState(null),[b,v]=r.useState(null),{styles:y,attributes:C}=(0,T.D)(f,b,{placement:"bottom-start",modifiers:[{name:"offset",options:{offset:[0,4]}}]}),k=s.filter((t=>u(t,e.trim()))),w=p&&k.length>0,S=r.useMemo((()=>new P.xQ),[]);return A.P.useSubscriptionTo(S.pipe(U.b(50),B.h((e=>!e)),z.b((()=>{h(!1),i&&""!==e.trim()&&m(k.length>0?k[0]:null)})))),r.createElement("div",Object.assign({},(0,a.Sh)(Z.container,l),{ref:x}),r.createElement(O,{className:Z.inputIframe,placeholder:t,onChange:d,text:e,onFocus:()=>{h(!0),S.next(!0)},onBlur:()=>S.next(!1),role:"combobox","aria-haspopup":"listbox","aria-owns":g.current,"aria-expanded":w}),""!==e.trim()&&!!n&&r.createElement("button",{onClick:(0,c.m)((()=>m(null))),className:Z.clearBtn,"aria-label":"Clear",type:"button"},r.createElement(R.JO.Close,{className:Z.closeIcon})),w&&r.createElement("div",Object.assign({ref:v,style:y.popper},C.popper,{className:Z.menu,onFocus:()=>S.next(!0),onBlur:()=>S.next(!1)}),r.createElement("ul",{"aria-label":"menu-options",role:"listbox",id:g.current},k.map((t=>{const n=o(t);return r.createElement("li",{key:n,"aria-label":n,role:"option"},r.createElement("button",{className:Z.menuOption,onClick:(0,c.m)((()=>{m(t),h(!1)}))},r.createElement(Y,{label:n,pattern:e})))})))))}const Y=({label:e,pattern:t})=>{if(""===t.trim())return r.createElement(r.Fragment,null,e);const n=t.trim(),i=e.split(new RegExp(n,"i")),o=(0,G.zG)(i.map(((e,t)=>({token:e,mark:!1,end:t*n.length+i.slice(0,t).join("").length+e.length}))),I.iD({token:"",mark:!0,end:0})).map(((t,i,o)=>t.mark&&i>0?{token:e.slice(o[i-1].end,o[i-1].end+n.length),mark:!0}:{token:t.token,mark:!1})).filter((e=>e.token.length>0));return r.createElement(r.Fragment,null,o.map(((e,t)=>e.mark?r.createElement("mark",{key:t,className:Z.menuOptionPart},e.token):r.createElement("span",{key:t,className:Z.menuOptionPart},e.token))))},X={border:`1px solid ${j.S5.InteractiveNeutral.Primary.Default}`,borderRadius:m.ux.rem(d.xB),width:m.ux.rem(15),height:m.ux.rem(2),boxSizing:"border-box",position:"relative"},Q={padding:`${m.ux.rem(F.F2)} ${m.ux.rem(F.F2+F.Ze)} ${m.ux.rem(F.F2)} ${m.ux.rem(F.qp)}`,width:"100%",height:"100%",border:"none",background:"transparent",position:"relative",cursor:"pointer",display:"flex",alignItems:"center"},J={fontWeight:400,fontSize:m.ux.rem(.875),lineHeight:m.ux.rem(1.375),color:j.XY.Content.Primary.Default},ee=Object.assign(Object.assign({position:"absolute",top:m.ux.rem(F.F2),right:m.ux.rem(F.x)},c.Es.iconSizeRems(1.5)),{$nest:{"& svg":{stroke:j.XY.Content.Secondary.Default}}}),te=e=>m.ux.color(N.BlueGray40).toRGBA().fade(e).toString(),ne={padding:m.ux.rem(F.F2),background:"white",boxShadow:`0px 0px 0px 0.5px ${N.BlueGray40}, 0px 0px 2px 0.5px ${te(.5)}, 0px 1px 6px 0.5px ${te(.25)}`,borderRadius:m.ux.rem(d.xB),width:m.ux.rem(15),boxSizing:"border-box",overflowY:"auto",maxHeight:m.ux.rem(8.125),zIndex:9999,$nest:{"& > ul":{listStyle:"none",padding:0,margin:0,$nest:{"& > li":{padding:0,margin:0}}}}},ie={border:"none",background:"transparent",width:"100%",cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",fontSize:m.ux.rem(.875),lineHeight:m.ux.rem(1.375),color:j.XY.Content.Primary.Default,padding:`${m.ux.rem(.1875)} ${m.ux.rem(F.qp)}`,borderRadius:m.ux.rem(d.xB),display:"flex",justifyContent:"flex-start",$nest:{"&:hover":{background:N.Blue0}}},oe=m.ux.prefixedStylesheet("select",{container:[X],selectBtn:[Q],selectBtnLabel:[J],menu:[ne],menuOption:[ie],chevronIcon:[ee]}),re=new w(999999);function se({label:e,selection:t,className:n,placeholder:i,options:o,onSelectionChange:s,renderOption:l}){const[u,d]=r.useState(!1),m=r.useRef(re.newId().toString()),p=r.useRef(re.newId().toString()),[h,g]=r.useState(null),[f,x]=r.useState(null),{styles:b,attributes:v}=(0,T.D)(h,f,{placement:"bottom-start",modifiers:[{name:"offset",options:{offset:[0,4]}}]}),y=r.useMemo((()=>new P.xQ),[]),C=r.useMemo((()=>y.pipe(U.b(50),B.h((e=>!e)),z.b((()=>{d(!1)})))),[y,d]);return A.P.useSubscriptionTo(C),r.createElement("div",Object.assign({},(0,a.Sh)(oe.container,n),{ref:g}),r.createElement("button",{className:oe.selectBtn,onFocus:()=>{d(!0),y.next(!0)},onBlur:()=>y.next(!1),type:"button","aria-haspopup":"listbox","aria-owns":m.current,"aria-expanded":u,"aria-labelledby":p.current},r.createElement("div",{id:p.current,className:oe.selectBtnLabel},t?l?l(t):e(t):i),r.createElement(R.JO.Arrow,{direction:R.n4.down,className:oe.chevronIcon})),u&&r.createElement("div",Object.assign({ref:x,style:b.popper},v.popper,{className:oe.menu,onFocus:()=>y.next(!0),onBlur:()=>y.next(!1)}),r.createElement("ul",{"aria-label":"menu-options",role:"listbox",id:m.current},o.map(((t,n)=>{const i=e(t);return r.createElement("li",{key:n,"aria-label":i,role:"option"},r.createElement("button",{className:oe.menuOption,onClick:(0,c.m)((()=>{s(t),d(!1)}))},l?l(t):e(t)))})))))}const ae={color:N.BlueGray60,fontWeight:400,fontSize:m.ux.rem(.625),lineHeight:m.ux.rem(1),background:N.BlueGray0,borderRadius:m.ux.rem(d.fe),padding:`0 ${m.ux.rem(F.F2)}`,cursor:"default"},le=m.ux.stylesheet({badge:[ae]}),ce=({className:e,children:t})=>r.createElement("div",Object.assign({},(0,a.Sh)(le.badge,e)),t),ue="closeBtn",de="closeIcon",me=c.Es.buttonOverrideSpecificity({$nest:{[`& .${de}`]:Object.assign(Object.assign({},c.Es.iconSizeRems(1.5)),{stroke:m.ux.important(j.S5.Content.Primary.Default)})}},ue),pe={closeButton:m.ux.joinClasses([ue,m.ux.style(me)]),closeIcon:de},he=({name:e,className:t,size:n,onClick:o})=>r.createElement(i.Tertiary,Object.assign({},(0,a.Sh)(pe.closeButton,t),{onClick:o,compact:!0,size:n,theme:"dark",name:e}),r.createElement(R.JO.Close,{className:pe.closeIcon}))},8961:(e,t,n)=>{n.d(t,{Xd:()=>i,gy:()=>Be,kF:()=>j,Bx:()=>Te});var i,o=n(14601),r=n(32952),s=n(98403),a=n(77176),l=n(93508),c=n(16118),u=n(85985),d=n(2844),m=n(60797),p=n(67434),h=n(28043),g=n(5114),f=n(22232),x=n(55415),b=n(38983),v=n(35152),y=n(57050);!function(e){e.isTooltipOnboardingStep=function(e){return v.TG.StepName.isTooltipOnboardingStep(e.name)}}(i||(i={}));class C{constructor(e){var t,n,i,m,p;this._params=e,this._subs=new o.w,this._assistantElements=b.h.create({}),this._externalElements=b.h.create({}),this._hideAssistantTooltips=b.h.create(!1),this._nextCandidateStep=b.h.create(g.none),this._uiActions=new r.xQ,this.uiActions=this._uiActions.asObservable(),this.activeStep=b.h.combine(this._nextCandidateStep,this._assistantElements,this._externalElements,this._hideAssistantTooltips,((e,t,n,i)=>(0,y.zG)(e,g.chain((e=>function(e,t,n,i){switch(e){case v.TG.StepName.initial:return(0,y.zG)(g.fromNullable(n[v.nF.initialPopupAnchor]),g.map((e=>({name:v.TG.StepName.initial,reference:e.reference,placement:e.placement,offset:e.offset,boundaryAreaPadding:e.boundaryAreaPadding,show:!0}))));case v.TG.StepName.rewrite:return(0,y.zG)(g.fromNullable(n[v.nF.rewriteTooltipAnchor]),g.map((e=>({name:v.TG.StepName.rewrite,reference:e.reference,placement:e.placement,offset:e.offset,boundaryAreaPadding:e.boundaryAreaPadding,show:!0}))));case v.TG.StepName.prompts:return(0,y.zG)(g.fromNullable(t[v.ec.initialActionsList]),g.map((e=>({name:v.TG.StepName.prompts,reference:e.reference,placement:e.placement,offset:e.offset,boundaryAreaPadding:e.boundaryAreaPadding,show:!i}))));case v.TG.StepName.review:return(0,y.zG)(g.fromNullable(t[v.ec.followUpActionsList]),g.map((e=>({name:v.TG.StepName.review,reference:e.reference,placement:e.placement,offset:e.offset,boundaryAreaPadding:e.boundaryAreaPadding,show:!i}))));default:(0,f.L0)(e)}}(e,t,n,i)))))),this.promptsAllocated=this._params.promptsAllocated,this._subs.add((t=this._params.upstreamOnboardingState,n=this._params.session,i=this._params.textStats,m=this._params.forceDisabledOnboardingSteps,p=this._params.client,d.aj([n,t,i.pipe(k())]).pipe(a.U((([e,t,n])=>g.isNone(e)?!m.has(v.TG.StepName.initial)&&(0,y.zG)(t.initial[p],(({completed:e,lastSeen:t})=>!e&&void 0===t))?g.some(v.TG.StepName.initial):!m.has(v.TG.StepName.rewrite)&&!t.rewrite[p].completed&&t.initial[p].completed&&n>=30?g.some(v.TG.StepName.rewrite):g.none:v.Zq.Step.everyClient((e=>!e.completed))(t.prompts)&&!m.has(v.TG.StepName.prompts)?g.some(v.TG.StepName.prompts):v.Zq.Step.everyClient((e=>!e.completed))(t.review)&&!m.has(v.TG.StepName.review)?g.some(v.TG.StepName.review):g.none)))).subscribe(s.wW(this._nextCandidateStep))),this._subs.add(this._params.assistantMountActions.subscribe((({name:e,element:t})=>this._assistantElements.modify((n=>Object.assign(Object.assign({},n),{[e]:{reference:t,placement:"left"}})))))),this._subs.add(this._params.assistantUnmountActions.subscribe((({name:e})=>this._assistantElements.modify((t=>Object.assign(Object.assign({},t),{[e]:void 0})))))),this._subs.add(this._params.externalElements.subscribe(s.wW(this._externalElements))),this._subs.add(this._params.hideAssistantOnboardingTooltips.subscribe(s.wW(this._hideAssistantTooltips))),this._subs.add(this._params.session.pipe(a.U(g.isSome),l.O(!1),c.G(),u.h((([e,t])=>e&&!t))).subscribe((()=>this._assistantElements.set({}))))}notify(e){this._uiActions.next(e)}dispose(){this._subs.unsubscribe()}}function k(){return(0,y.ls)(m.oA,a.U(x.ei("wordCount")),l.O(0),c.G(),p.R(((e,[t,n])=>(0,y.zG)(Math.abs(n-t),(t=>t<=2?e+t:e))),0),l.O(0),h.x())}var w,S=n(64015),_=n(66310),E=n(41398),O=n(80544),I=n(79692),A=n(2834),R=n(24209),P=n(17343),U=n(40151),B=n(8125),z=n(83078);function T(e,t,n,i,o=1e3){return e.pipe(u.h((0,B.W9)(v.lG.is(v.lG.Kind.mount),(e=>n(e.step)))),_.w((({step:e})=>t.pipe(a.U(z.FX(e)),_.w((e=>e?i.pipe(P.h(Date.now())):U.E)),u.h((e=>Date.now()-e>=o)),P.h(e)))))}!function(e){e.completeInitialOrRewriteStepOnSessionInit=({session:e})=>e.pipe(l.O(g.none),c.G(),a.U((([e,t])=>g.isNone(e)&&g.isSome(t)?g.some(t):g.none)),m.oA,_.w((e=>(0,y.zG)([g.some(v.TG.StepName.initial),v.z_.Mode.isRewriteOrQuickRewrite(e.value.mode)?g.some(v.TG.StepName.rewrite):g.none],S.oA)))),e.completeReviewStepOnSecondResultReceived=({session:e,activeStep:t})=>e.pipe(a.U((0,y.ls)(g.chain(v.z_.toStarted),g.fold((()=>0),(e=>e.resultHistory.length)))),c.G(),u.h((([e,t])=>1===e&&2===t)),E.M(t),a.U((([e,t])=>(0,y.zG)(t,g.filter((e=>e===v.TG.StepName.review))))),m.oA),e.completeActiveAssistantStepOnSessionEnd=({session:e,activeStep:t,visibleForMs:n,onboardingUIActions:i})=>T(i,t.pipe(O.QV(I.E)),v.TG.StepName.isAssistantOnboardingStep,e.pipe(c.G(),u.h((([e,t])=>g.isSome(e)&&g.isNone(t)))),n),e.completeStepOnCloseClick=({onboardingUIActions:e,trackingService:t})=>e.pipe(u.h(v.lG.is(v.lG.Kind.close)),a.U((e=>(e.step===v.TG.StepName.initial&&t.trackOnboardingPopupSkip(),e.step)))),e.completeInitialStepOnTryItOutClick=({onboardingUIActions:e,trackingService:t})=>e.pipe(u.h(v.lG.is(v.lG.Kind.tryItOut)),a.U((()=>(t.trackOnboardingPopupNext(),v.TG.StepName.initial)))),e.completeReviewStepOnResultInteraction=({assistantUIActions:e})=>e.pipe(u.h((0,B.W9)(v.ix.isResultAction,(e=>"complete"===e.result.kind))),a.U((()=>v.TG.StepName.review))),e.completeAssistantStepsOnUserActions=({assistantUIActions:e,activeStep:t})=>e.pipe(u.h((0,B.Kg)(v.ix.is(v.ix.Kind.clickActionBrick),v.ix.is(v.ix.Kind.promptSend),v.ix.is(v.ix.Kind.openVoiceProfile),v.ix.is(v.ix.Kind.openFeedbackForm))),E.M(t),a.U((([e,t])=>(0,y.zG)(t,g.filter(v.TG.StepName.isAssistantOnboardingStep)))),m.oA),e.completeInitialStepOnDispose=({onboardingUIActions:e,activeStep:t,disposed:n,visibleForMs:i})=>T(e,t,(e=>e===v.TG.StepName.initial),n,i);const t=e=>t=>n=>t(n).pipe(A.b((t=>{var i;return null===(i=n.logger)||void 0===i?void 0:i.debug(`${e} - step to complete: ${t}`)})));function n(e){return e.pipe(p.R(((e,t)=>({seen:new Set(e.seen).add(t),step:e.seen.has(t)?g.none:g.some(t)})),{seen:new Set,step:g.none}),a.U((e=>e.step)),m.oA)}e.defaultCompletionSources=[t("session init")(e.completeInitialOrRewriteStepOnSessionInit),t("second result received")(e.completeReviewStepOnSecondResultReceived),t("session end")(e.completeActiveAssistantStepOnSessionEnd),t("user closed step")(e.completeStepOnCloseClick),t("user clicked try-it-out")(e.completeInitialStepOnTryItOutClick),t("user interacted with results")(e.completeReviewStepOnResultInteraction),t("user interacted with assistant")(e.completeAssistantStepsOnUserActions),t("feature disposed")(e.completeInitialStepOnDispose)],e.extractStepsToComplete=function(e,t){return R.T(...e.map((e=>e(t)))).pipe(n)}}(w||(w={}));var G=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n};class F extends C{constructor(e,t){super(e),this._onDispose=t}dispose(){super.dispose(),this._onDispose()}}function j(e){var{assistantUIActions:t,trackingService:n,completeOnboardingStep:i,stepCompletionSources:r,disposed:s,logger:a}=e,l=G(e,["assistantUIActions","trackingService","completeOnboardingStep","stepCompletionSources","disposed","logger"]);const c=new o.w,d=new F(Object.assign(Object.assign({},l),{assistantMountActions:t.pipe(u.h(v.ix.is(v.ix.Kind.mount))),assistantUnmountActions:t.pipe(u.h(v.ix.is(v.ix.Kind.unmount)))}),(()=>c.unsubscribe()));return c.add(w.extractStepsToComplete(null!=r?r:w.defaultCompletionSources,{onboardingUIActions:d.uiActions,assistantUIActions:t,activeStep:d.activeStep.view(g.map((e=>e.name))),session:l.session,trackingService:n,disposed:s,logger:a}).subscribe(i)),c.add(function(e,t){return e.pipe(u.h(v.lG.is(v.lG.Kind.mount)),A.b((e=>{switch(e.step){case v.TG.StepName.initial:return t.trackOnboardingPopupView();case v.TG.StepName.prompts:return t.trackOnboardingPromptsTooltipView();case v.TG.StepName.review:return t.trackOnboardingReviewTooltipView();case v.TG.StepName.rewrite:return t.trackOnboardingRewriteTooltipView();default:(0,f.L0)(e.step)}})))}(d.uiActions,n).subscribe()),d}var N=n(34217),V=n(27378),D=n(15906),M=n(89894),$=n(88392),L=n(13578),H=n(9546),K=n(20654);const Z="tryItOutBtn",W="skipBtn",q=M.ux.rem($.xB+$.fe),Y={width:M.ux.rem(25.875),background:L.XY.Surface.Primary.Default},X={display:"flex",alignItems:"center",justifyContent:"center",height:M.ux.rem(14.5625),width:"100%",backgroundColor:"#00231F",backgroundImage:"url(https://assets.grammarly.com/icons/v1/cheetah-onboarding.2x.png)",backgroundPosition:`top ${M.ux.rem(1)} left 0`,backgroundSize:"100%",backgroundRepeat:"no-repeat",borderTopLeftRadius:q,borderTopRightRadius:q},Q={display:"flex",flexDirection:"column",gap:M.ux.rem(H.F2),padding:`${M.ux.rem(H.mh)} ${M.ux.rem(H.x0)} ${M.ux.rem(H.sD)} ${M.ux.rem(H.sD)}`,color:L.XY.Content.Primary.Default},J={display:"flex",flexDirection:"row",alignItems:"center",gap:M.ux.rem(H.x),fontWeight:"bold",fontSize:M.ux.rem(1),lineHeight:M.ux.rem(1.5)},ee={fontSize:M.ux.rem(.875),lineHeight:M.ux.rem(1.375)},te={display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",borderBottomLeftRadius:q,borderBottomRightRadius:q,padding:`${M.ux.rem(H.qp)} ${M.ux.rem(H.sD)} ${M.ux.rem(H.qp)} ${M.ux.rem(H.sD)}`,backgroundColor:L.XY.Surface.Secondary.Default,color:L.XY.Content.Secondary.Default,fontSize:M.ux.rem(.875),lineHeight:M.ux.rem(1.3125),$nest:{a:{color:"inherit"}}},ne={width:M.ux.rem(12),lineHeight:M.ux.rem(1.25)},ie=Object.assign({marginRight:M.ux.rem(.5)},K.Es.buttonOverrideSpecificity({fontSize:M.ux.rem(.875)},W)),oe=K.Es.buttonOverrideSpecificity({fontSize:M.ux.rem(.875),fontWeight:"bold"},Z),re={position:"absolute",top:M.ux.rem(H.x),right:M.ux.rem(H.x)},se={container:M.ux.style(Y),image:M.ux.style(X),content:M.ux.style(Q),contentHeader:M.ux.style(J),contentText:M.ux.style(ee),footer:M.ux.style(te),footerText:M.ux.style(ne),footerButtons:M.ux.style({display:"flex",flexDirection:"row",alignItems:"flex-end"}),skipButton:M.ux.joinClasses([W,M.ux.style(ie)]),tryItOutButton:M.ux.joinClasses([Z,M.ux.style(oe)]),link:M.ux.style({display:"inline"}),closeButton:M.ux.style(re)};var ae=n(12187),le=n(74204),ce=n(62172);const ue=e=>M.ux.color(ce.BlueGray40).toRGBA().fade(e).toString(),de={filter:`drop-shadow(0px 0px 0.5px ${ce.BlueGray40}) drop-shadow(0px 0px 2px ${ue(.5)}) drop-shadow(0px 1px 6px ${ue(.25)})`,borderRadius:M.ux.rem($.xB+$.fe)},me=M.ux.stylesheet({popover:[de]}),pe=V.forwardRef((function({placement:e,style:t,arrowColor:n},i){return V.createElement("div",{ref:i,style:{width:33}},V.createElement("svg",{width:33,height:12,viewBox:"0 0 33 12.5",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:Object.assign(Object.assign(Object.assign({position:"absolute"},t),{transform:`${(null==t?void 0:t.transform)||""} rotate(${he(e)}deg)`.trimStart()}),ge(e))},V.createElement("path",{d:"M0.5 3.41877e-07C3.5 3.41877e-07 29.5 3.41877e-07 32.5 3.41877e-07C28.5 3.41877e-07 26.4111 0.903505 24.1814 3.69994L17.5562 11.4728C16.957 12.1757 15.8652 12.1757 15.2661 11.4728L8.64084 3.69994C6.41113 0.903505 4.5 3.41877e-07 0.5 3.41877e-07Z",fill:n||"white"})))}));function he(e){return(null==e?void 0:e.startsWith("right"))?90:(null==e?void 0:e.startsWith("bottom"))?180:(null==e?void 0:e.startsWith("left"))?270:0}function ge(e){return(null==e?void 0:e.startsWith("bottom"))?{top:-12}:(null==e?void 0:e.startsWith("top"))?{bottom:-12}:(null==e?void 0:e.startsWith("right"))?{transformOrigin:"top left",top:-16.5,left:0}:(null==e?void 0:e.startsWith("left"))?{transformOrigin:"top right",top:-16.5,right:0}:{}}const fe=(0,ae.xb)((({reference:e,placement:t,offset:n,boundaryAreaPadding:i,className:o,arrowColor:r,children:s})=>{const[a,l]=V.useState(null),[c,u]=V.useState(null),d=(0,K.sJ)(),{styles:m,attributes:p,state:h}=(0,le.D)(e,a,{placement:t,modifiers:[{name:"offset",options:{offset:[0,12+(null!=n?n:0)]}},{name:"arrow",options:{element:c,padding:12}},{name:"preventOverflow",options:{padding:null!=i?i:5}},d]});return V.createElement("div",Object.assign({ref:l,style:m.popper},p.popper,(0,ae.Sh)(me.popover,o)),V.createElement(pe,{ref:u,style:m.arrow,placement:null==h?void 0:h.placement,arrowColor:r}),s)}));var xe=n(90845);const be=N.UI.Node.make((({view:e,notify:t})=>{const{ref:n,onMount:i}=xe.P.useElWatcher(),o=V.useMemo((()=>n.pipe(O.QV(I.E),m.oA,A.b((e=>t({kind:v.lG.Kind.mount,step:v.TG.StepName.initial,element:e})())))),[n]);return xe.P.useSubscriptionTo(o),V.createElement(fe,{className:se.container,reference:e("reference"),placement:e("placement"),offset:e("offset"),boundaryAreaPadding:e("boundaryAreaPadding"),arrowColor:L.XY.Surface.Secondary.Default},V.createElement(D.xx,{onClick:t({kind:v.lG.Kind.close,step:v.TG.StepName.initial}),name:"onboardingClose",size:"medium",className:se.closeButton}),V.createElement("div",{className:se.image},V.createElement(D.rN,null)),V.createElement("div",{className:se.content,ref:i},V.createElement("div",{className:se.contentHeader},V.createElement("div",null,"Write faster with GrammarlyGO"),V.createElement(D.Ct,null,"Beta")),V.createElement("div",{className:se.contentText},"Brainstorm, write, and rewrite with generative AI assistance at your fingertips.")),V.createElement("div",{className:se.footer},V.createElement("div",{className:se.footerText},"If you use GrammarlyGO,"," ",V.createElement("a",{href:"https://grammarly.com/terms",rel:"noreferrer",target:"_blank",className:se.link},"additional terms")," ","apply."),V.createElement("div",{className:se.footerButtons},V.createElement(D.zx.Tertiary,{onClick:t({kind:v.lG.Kind.close,step:v.TG.StepName.initial}),className:se.skipButton,name:"skip"},"Skip"),V.createElement(D.zx.Primary,{onClick:t({kind:v.lG.Kind.tryItOut}),className:se.tryItOutButton,name:"tryItOut"},"Try it out"))))}));function ve(e){return N.Z.fromSideEffect((t=>e.notify(t)),e.activeStep.pipe(m.oA))}const ye={animation:`${M.ux.keyframes({from:{opacity:0},to:{opacity:1}})} linear 0.1s`,background:ce.Green80,borderRadius:M.ux.rem(H.x),width:M.ux.rem(13.75),color:L.S5.Content.Primary.Default,padding:M.ux.rem(H.mh),fontSize:M.ux.rem(.875),lineHeight:M.ux.rem(1.375),display:"flex",flexDirection:"column",gap:M.ux.rem(H.yC),$nest:{"&[data-popper-reference-hidden='true']":{visibility:"hidden"}}},Ce=M.ux.rem(.5),ke=M.ux.rem(-.5),we=ce.Green80,Se={$nest:{"&[data-placement='bottom']":{top:ke,borderLeft:`${Ce} solid transparent`,borderRight:`${Ce} solid transparent`,borderBottom:`${Ce} solid ${we}`},"&[data-placement='top']":{bottom:ke,borderLeft:`${Ce} solid transparent`,borderRight:`${Ce} solid transparent`,borderTop:`${Ce} solid ${we}`},"&[data-placement='right']":{left:ke,borderTop:`${Ce} solid transparent`,borderBottom:`${Ce} solid transparent`,borderRight:`${Ce} solid ${we}`},"&[data-placement='left']":{right:ke,borderTop:`${Ce} solid transparent`,borderBottom:`${Ce} solid transparent`,borderLeft:`${Ce} solid ${we}`}}},_e=M.ux.stylesheet({tooltip:[ye],arrow:[Se]}),Ee=(0,ae.xb)((({reference:e,placement:t,offset:n,boundaryAreaPadding:i,children:o})=>{var r,s;const[a,l]=V.useState(null),[c,u]=V.useState(null),d=(0,K.sJ)(),{styles:m,attributes:p,state:h}=(0,le.D)(e,a,{placement:t,modifiers:[{name:"offset",options:{offset:[0,12+(null!=n?n:0)]}},{name:"arrow",options:{element:c,padding:12}},{name:"preventOverflow",options:{padding:null!=i?i:5}},d]});return V.createElement("div",Object.assign({ref:l,style:m.popper},p.popper,{className:_e.tooltip}),V.createElement("div",{ref:u,style:m.arrow,className:_e.arrow,"data-placement":(null===(r=null==h?void 0:h.placement)||void 0===r?void 0:r.startsWith("bottom"))?"bottom":(null==h?void 0:h.placement.startsWith("top"))?"top":(null==h?void 0:h.placement.startsWith("right"))?"right":(null===(s=null==h?void 0:h.placement)||void 0===s?void 0:s.startsWith("left"))?"left":void 0}),o)})),Oe={position:"absolute",top:M.ux.rem(H.x),right:M.ux.rem(H.x)},Ie=M.ux.stylesheet({title:[{fontWeight:700}],closeButton:[Oe]}),Ae={[v.TG.StepName.prompts]:{title:"Start with a prompt",description:e=>e?`Choose a suggested prompt, or type your own to get started. You’ll get ${e} each month.`:"Choose a suggested prompt, or type your own to get started."},[v.TG.StepName.review]:{title:"How does this sound?",description:"Adjust it to your liking with additional prompts. Don’t forget to check for any inaccuracies. "},[v.TG.StepName.rewrite]:{title:"Want help rewriting?",description:"Select your text to rewrite it with GrammarlyGO."}},Re=N.UI.Node.make((({state:e,view:t,notify:n})=>{const{ref:i,onMount:o}=xe.P.useElWatcher(),r=V.useMemo((()=>i.pipe(m.oA,E.M(t("name")),O.QV(I.E),a.U((([e,t])=>({element:e,stepName:t}))),A.b((({element:e,stepName:t})=>n({kind:v.lG.Kind.mount,step:t,element:e})())))),[i]);return xe.P.useSubscriptionTo(r),V.createElement(Ee,{reference:t("reference"),placement:t("placement"),offset:t("offset"),boundaryAreaPadding:t("boundaryAreaPadding")},e.pipe(a.U((e=>V.createElement(V.Fragment,null,V.createElement(D.xx,{onClick:n({kind:v.lG.Kind.close,step:e.name}),name:"tooltipClose",className:Ie.closeButton,size:"small"}),V.createElement("div",{className:Ie.title},Ae[e.name].title),V.createElement("div",{ref:o},e.name===v.TG.StepName.prompts?Ae[e.name].description(e.promptsAllocated):Ae[e.name].description))))))})),Pe=N.UI.Union.asOption(Re);function Ue(e){return N.Z.composeOption(function(e){return N.Z.fromSideEffect((t=>e.notify(t)),e.activeStep.pipe(m.oA,u.h(i.isTooltipOnboardingStep),E.M(e.promptsAllocated.pipe(a.U(g.toUndefined))),a.U((([e,t])=>Object.assign(Object.assign({},e),{promptsAllocated:t})))))}(e),(()=>e.activeStep.pipe(a.U(g.filter(i.isTooltipOnboardingStep)))))}const Be=N.UI.Union.make("kind",{none:N.UI.Node.empty,initial:be,tooltip:Pe});var ze=n(76974);function Te(e){return N.Z.composeUnion({none:()=>ze.of(null),initial:ve(e),tooltip:Ue(e)},(()=>e.activeStep.view(Ge).view((e=>({kind:e})))))}function Ge(e){return(0,y.zG)(e,g.filter((e=>e.show)),g.fold((()=>"none"),(e=>{switch(e.name){case v.TG.StepName.initial:return"initial";case v.TG.StepName.prompts:case v.TG.StepName.review:case v.TG.StepName.rewrite:return"tooltip";default:(0,f.L0)(e.name)}})))}},99223:(e,t,n)=>{n.r(t),n.d(t,{baseButtonContentOverrideSpecificity:()=>c,buttonOverrideSpecificity:()=>d,cheetahButtonContentOverrideSpecificity:()=>u,heightAndMinHeightRems:()=>r,iconSizeRems:()=>s,repeatClassSelector:()=>a,specificity:()=>l,widthAndMinWidthRems:()=>o});var i=n(89894);function o(e){return{width:i.ux.rem(e),minWidth:i.ux.rem(e)}}function r(e){return{height:i.ux.rem(e),minHeight:i.ux.rem(e)}}function s(e,t){return Object.assign(Object.assign({},o(e)),r(null!=t?t:e))}function a(e,t){return`.${e}`.repeat(t)}function l(e,t,n){return{$nest:{[`&${a(t,n)}`]:e}}}const c=6,u=c+1;function d(e,t){return l(e,t,u)}},97547:(e,t,n)=>{n.d(t,{E:()=>a,Jj:()=>r,ap:()=>s});var i=n(77176),o=n(31699);function r(e){const t=function(e){const t=e.ownerDocument;if(t)return t;throw new Error("target does not have ownerDocument")}(e).defaultView;if(t)return t;throw new Error("active document is detached from a window")}const s=["b","i"];function a(e,t=s){return"string"==typeof e?{dangerouslySetInnerHTML:{__html:(0,o.sanitize)(e,{ALLOWED_TAGS:t})}}:{dangerouslySetInnerHTML:e.pipe(i.U((e=>({__html:(0,o.sanitize)(e,{ALLOWED_TAGS:t})}))))}}},20654:(e,t,n)=>{n.d(t,{Es:()=>T,BO:()=>o,eG:()=>k.e,E9:()=>r,JY:()=>U,C7:()=>s,uj:()=>C,m:()=>O,NN:()=>a,lA:()=>z,gM:()=>E,sJ:()=>S});var i=n(62172);const o=Object.assign(Object.assign({},i),{BrandGreen60:"#018374",BrandGreen80:"#017467"});var r;function s(e=document){return{top:0,left:0,height:e.documentElement.clientHeight,width:e.documentElement.clientWidth}}function a(e,t){return n=>{const i=function(e,t){const n=e.left<t.left?t.left:e.left+e.width>t.left+t.width?t.left+t.width-e.width:e.left,i=e.top<t.top?t.top:e.top+e.height>t.top+t.height?t.top+t.height-e.height:e.top;return Object.assign(Object.assign({},e),{left:n,top:i})}({left:e.left+n.x,top:e.top+n.y,width:e.width,height:e.height},t);return{x:i.left-e.left,y:i.top-e.top}}}!function(e){e.fromCartesian=function({x:e,y:t}){return{top:t,left:e}},e.l1Distance=function(e,t){return Math.abs(e.top-t.top)+Math.abs(e.left-t.left)}}(r||(r={}));var l,c=n(57050),u=n(97547),d=n(85985),m=n(28043),p=n(66310),h=n(49708),g=n(2834),f=n(77176),x=n(2768),b=n(55721),v=n(39719),y=n(67434);function C(){return(0,c.ls)(d.h((e=>!!e)),m.x(),p.w((e=>h.R(e,"mousedown").pipe(d.h((e=>!e.button)),g.b((e=>e.preventDefault())),f.U((t=>({element:e,startPos:{x:t.clientX,y:t.clientY}}))),p.w((e=>h.R((0,u.Jj)(e.element),"mousemove").pipe(x.R(h.R((0,u.Jj)(e.element),"mouseup",{capture:!0})),b.p(10),f.U((({clientX:t,clientY:n})=>({kind:"dragInProgress",element:e.element,startPos:e.startPos,delta:{x:t-e.startPos.x,y:n-e.startPos.y}}))),v.l({kind:"dragDone"}))))))),y.R(((e,t)=>"dragDone"===t.kind?{translate:e.translate,lastTranslate:e.translate,dragging:!1,dragStart:!1,dragEnd:e.dragging}:{dragging:!0,dragStart:!e.dragging,dragEnd:!1,lastTranslate:e.lastTranslate,translate:{x:t.delta.x+e.lastTranslate.x,y:t.delta.y+e.lastTranslate.y}}),l.create()))}!function(e){e.create=function(){return{translate:{x:0,y:0},lastTranslate:{x:0,y:0},dragging:!1,dragStart:!1,dragEnd:!1}}}(l||(l={}));var k=n(99341),w=n(27378);function S(){return w.useMemo((()=>({name:"nudgeArrow",phase:"afterMain",enabled:!0,fn:()=>{},effect:({instance:e})=>{const t=setTimeout((()=>e.forceUpdate()),0);return()=>clearTimeout(t)}})),[])}var _=n(34530);function E(e){return w.useMemo((()=>({name:"maxSize",phase:"main",enabled:!0,requiresIfExists:["offset","preventOverflow","flip"],fn({state:t,name:n}){const i=(0,_.Z)(t),{x:o,y:r}=t.modifiersData.preventOverflow||{x:0,y:0},{width:s,height:a}=t.rects.popper,[l]=t.placement.split("-"),c="top"===l?"top":"bottom",u={width:s-i["left"===l?"left":"right"]-o,height:a-i[c]-r};t.modifiersData[n]=u,null==e||e(u)}})),[])}function O(e){return t=>{(null==t?void 0:t.isTrusted)&&(null==e||e(t))}}var I=n(64015),A=n(5114),R=n(45701),P=n(35498);function U(){return R.contramap((({matchScore:e})=>e))(P.Df)}function B(e){return e.split(/\s+/).map((e=>e.trim())).filter((e=>""!==e))}function z(e,t,n){const i=B(e),o=[...B(t),...(0,c.zG)(n,I.tS((e=>B(e))))],r=i.map((()=>null));let s=0;for(const e of o){if(s>=i.length)break;e.toLowerCase().includes(i[s].toLowerCase())&&(r[s]=0,++s)}return r.includes(null)?A.none:A.some(r.map((e=>null!=e?e:0)).reduce(((e,t)=>e+t),0))}var T=n(99223)},99341:(e,t,n)=>{n.d(t,{e:()=>i,n:()=>a});var i,o=n(57050),r=n(48044),s=n(5114);function a(e){return(t,n)=>i=>(0,o.zG)(i,r.cq(e)(t,(0,o.ls)(s.some,n)),s.getOrElse((()=>(0,o.zG)(i,r.dx(e)(t,n(s.none))))))}!function(e){e.set=function(e,t){return n=>Object.assign(Object.assign({},n),{[e]:t})}}(i||(i={}))},51369:(e,t,n)=>{n.d(t,{X:()=>A});var i,o=n(59312),r=n(27378),s=n(57050),a=n(5114),l=n(19962),c=n(44060),u=n(11413),d=n(89894),m=n(32096),p=n(40327),h=n(5739),g=n(49708),f=n(85985),x=n(41398),b=n(24209),v=n(17343),y=n(98403),C=n(38194),k=n(598),w=n(50628),S=n(25781),_=n(83078),E=n(18625);!function(e){var t="scrollaction";e.emit=function(e){return self.dispatchEvent(new CustomEvent(t,{detail:e}))},e.observe=E.P((function(){return g.R(self,t)}))}(i||(i={}));var O=n(42103),I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._subs=[],t._outOfTarget=function(e){return function(t){return!l.UL.hasPoint(t.getBoundingClientRect(),e)}},t}return(0,o.ZT)(t,e),t.prototype.componentDidMount=function(){this._listenTooltipAppearance()},t.prototype.componentWillUnmount=function(){this._subs.forEach((function(e){return e.unsubscribe()})),this._subs=[],this.context.hide()},t.prototype.render=function(){return r.createElement(h.F.div,{"data-role":"tooltip"},this.context.state.view(this.props.children))},t.prototype._listenTooltipAppearance=function(){var e=this,t=g.R(document,"keydown").pipe(f.h((function(e){return e.keyCode===S.R.ESC_CODE}))),n=g.R(document,"mousedown").pipe(x.M(this.context.state),f.h((function(t){var n=t[0],i=t[1];return(0,p.pipe)(i,a.map((function(e){return e.target})),a.filter((function(){return l.pK(n.target)})),_.wo(e._outOfTarget({x:n.clientX,y:n.clientY})))}))),o=b.T(t,n,g.R(document,"scroll"),i.observe.pipe(f.h((function(e){return"show"===e.detail})))).pipe(v.h(y.PU),C.B());this._subs=[this.context.hasContent.pipe(f.h(Boolean),k.c(o.pipe(w.P()))).subscribe(this.context.hide),this.context.hasContent.pipe(f.h(Boolean),k.c(b.T(y.gw(!0,500),o.pipe(v.h(!1))).pipe(w.P())),f.h(Boolean)).subscribe(this.context.show)]},t.contextType=O.G.Context,t}(r.Component),A=function(){return r.createElement(I,null,(0,s.ls)(a.map((function(e){return r.createElement(u.t.ByAbsoluteRect,(0,o.pi)({rect:l.UL.fromEl(e.target),className:U.container},u.t.Alignment.toSelector(e.alignment),{withPin:!0}),r.createElement("div",{className:U.content},e.content))})),a.toNullable))},R={position:"fixed",zIndex:m.DY,pointerEvents:"none",$nest:{"@media print":{visibility:"hidden"}}},P={padding:"".concat(d.ux.rem(.25)," ").concat(d.ux.rem(1)),borderRadius:d.ux.rem(m.fx),background:c.Il.BackgroundTooltip,color:c.Il.CoreNeutral1,textAlign:"center",whiteSpace:"nowrap",letterSpacing:d.ux.px(.25),fontSize:d.ux.rem(.75),lineHeight:d.ux.rem(1)},U=d.ux.stylesheet({container:[R],content:[P]})},13853:(e,t,n)=>{n.d(t,{$T:()=>m,DZ:()=>h,Eh:()=>k,G:()=>f,G0:()=>a,KX:()=>b,Lx:()=>u,Od:()=>p,ZN:()=>C,e5:()=>l,hX:()=>s,nI:()=>w,nq:()=>d,ri:()=>r,t9:()=>v,u4:()=>c,yW:()=>x});var i=n(73975),o=n(23460),r=function(e){return new Set([e])};function s(e){return function(t){for(var n,i=t.values(),o=new Set;!(n=i.next()).done;){var r=n.value;e(r)&&o.add(r)}return o}}function a(e){var t=v(e);return function(n,i){if(void 0===i){var o=a(e);return function(e){return o(n,e)}}if(g(n))return i;if(g(i))return n;var r=new Set(n);return i.forEach((function(e){t(e,r)||r.add(e)})),r}}function l(e){var t=v(e);return function(n,i){if(void 0===i){var o=l(e);return function(e){return o(e,n)}}return s((function(e){return!t(e,i)}))(n)}}function c(e){var t=y(e);return function(e,n){return function(i){return t(i).reduce(n,e)}}}function u(e,t){var n=y(e);return function(e){return function(i){return n(i).reduce((function(n,i){return t.concat(n,e(i))}),t.empty)}}}var d=function(e){var t=y(e);return function(e,n){return function(i){return t(i).reduceRight((function(e,t){return n(t,e)}),e)}}};function m(e){var t=v(e);return function(e){return function(n){if(t(e)(n))return n;var i=new Set(n);return i.add(e),i}}}var p=function(e){return function(t){return function(n){return s((function(n){return!e.equals(t,n)}))(n)}}};function h(e){var t=v(e);return function(e){return function(n){var i=new Set;return n.forEach((function(n){var o=e(n);"Some"!==o._tag||t(o.value,i)||i.add(o.value)})),i}}}new Set;var g=function(e){return 0===e.size},f=function(e){return function(t){for(var n,i=t.values(),o=!1;!o&&!(n=i.next()).done;)o=e(n.value);return o}};function x(e){return(0,o.ff)(f((0,o.ff)(e)))}function b(e){var t=v(e);return function(n,i){if(void 0===i){var o=b(e);return function(e){return o(e,n)}}return x((function(e){return t(e,i)}))(n)}}function v(e){return function(t,n){if(void 0===n){var i=v(e);return function(e){return i(t,e)}}for(var o,r=n.values(),s=!1;!s&&!(o=r.next()).done;)s=e.equals(t,o.value);return s}}var y=function(e){return function(t){var n=[];return t.forEach((function(e){return n.push(e)})),n.sort(e.compare)}};function C(e){return{show:function(t){var n=[];return t.forEach((function(t){n.push(e.show(t))})),"new Set([".concat(n.sort().join(", "),"])")}}}function k(e){var t=b(e);return(0,i.f7)((function(e,n){return t(e,n)&&t(n,e)}))}var w=function(e){return function(t){for(var n=t.length,i=new Set,o=v(e),r=0;r<n;r++){var s=t[r];o(s,i)||i.add(s)}return i}}}}]);